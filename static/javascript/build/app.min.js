!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("app",[],t):"object"==typeof exports?exports.app=t():e.app=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1);(0,n.init)()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(){o.init(window.location.pathname),u.init(window.location.pathname),l.init(window.location.pathname)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i;var a=r(2),o=n(a),s=r(156),u=n(s),c=r(160),l=n(c)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=this;e.match(/^\/app\/login\/$/)&&document.querySelector("form").addEventListener("submit",function(e){var r,n;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=document.querySelector('input[name="email"]').value,n=document.querySelector('input[name="password"]').value,t.prev=3,t.next=6,s.default.awrap(c.login(r,n));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),alert(t.t0.message),t.abrupt("return");case 12:window.location="/app";case 13:case"end":return t.stop()}},null,t,[[3,8]])})}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=i(o);t.init=a;var u=r(73),c=n(u)},function(e,t,r){(function(t){var n="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(4),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}e.exports={default:e.exports,__esModule:!0}}).call(t,function(){return this}())},function(e,t,r){(function(t,n){"use strict";var i=r(6).default,a=r(37).default,o=r(39).default,s=r(43).default;!function(t){function r(e,t,r,n){var i=a((t||c).prototype),o=new m(n||[]);return i._invoke=y(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function c(){}function l(){}function f(){}function h(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function p(e){this.arg=e}function d(e){function t(r,n,i,a){var o=u(e[r],e,n);if("throw"!==o.type){var c=o.arg,l=c.value;return l instanceof p?s.resolve(l.arg).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):s.resolve(l).then(function(e){c.value=e,i(c)},a)}a(o.arg)}function r(e,r){function n(){return new s(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var i;this._invoke=r}function y(e,t,r){var n=_;return function(i,a){if(n===D)throw new Error("Generator is already running");if(n===R){if("throw"===i)throw a;return C()}for(;;){var o=r.delegate;if(o){if("return"===i||"throw"===i&&o.iterator[i]===b){r.delegate=null;var s=o.iterator.return;if(s){var c=u(s,o.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=u(o.iterator[i],o.iterator,a);if("throw"===c.type){r.delegate=null,i="throw",a=c.arg;continue}i="next",a=b;var l=c.arg;if(!l.done)return n=k,l;r[o.resultName]=l.value,r.next=o.nextLoc,r.delegate=null}if("next"===i)n===k?r.sent=a:r.sent=b;else if("throw"===i){if(n===_)throw n=R,a;r.dispatchException(a)&&(i="next",a=b)}else"return"===i&&r.abrupt("return",a);n=D;var c=u(e,t,r);if("normal"===c.type){n=r.done?R:k;var l={value:c.arg,done:r.done};if(c.arg!==N)return l;r.delegate&&"next"===i&&(a=b)}else"throw"===c.type&&(n=R,i="throw",a=c.arg)}}}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function E(e){if(e){var t=e[B];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(A.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=b,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:b,done:!0}}var b,A=Object.prototype.hasOwnProperty,S="function"==typeof i?i:{},B=S.iterator||"@@iterator",w=S.toStringTag||"@@toStringTag",T="object"==typeof e,I=t.regeneratorRuntime;if(I)return void(T&&(e.exports=I));I=t.regeneratorRuntime=T?e.exports:{},I.wrap=r;var _="suspendedStart",k="suspendedYield",D="executing",R="completed",N={},L=f.prototype=c.prototype;l.prototype=L.constructor=f,f.constructor=l,f[w]=l.displayName="GeneratorFunction",I.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},I.mark=function(e){return o?o(e,f):(e.__proto__=f,w in e||(e[w]="GeneratorFunction")),e.prototype=a(L),e},I.awrap=function(e){return new p(e)},h(d.prototype),I.async=function(e,t,n,i){var a=new d(r(e,t,n,i));return I.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},h(L),L[B]=function(){return this},L[w]="Generator",L.toString=function(){return"[object Generator]"},I.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},I.values=E,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=b,this.done=!1,this.delegate=null,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&A.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=b)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=A.call(i,"catchLoc"),s=A.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&A.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?this.next=i.finallyLoc:this.complete(a),N},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),N}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},N}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:void 0)}).call(t,function(){return this}(),r(5))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){y&&p&&(y=!1,p.length?d=p.concat(d):g=-1,d.length&&s())}function s(){if(!y){var e=i(o);y=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,y=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var p,d=[],y=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){e.exports={default:r(7),__esModule:!0}},function(e,t,r){r(8),r(36),e.exports=r(15).Symbol},function(e,t,r){"use strict";var n=r(9),i=r(10),a=r(11),o=r(12),s=r(14),u=r(18),c=r(13),l=r(21),f=r(22),h=r(24),p=r(23),d=r(25),y=r(30),g=r(31),v=r(32),m=r(33),E=r(26),C=r(20),b=n.getDesc,A=n.setDesc,S=n.create,B=y.get,w=i.Symbol,T=i.JSON,I=T&&T.stringify,_=!1,k=p("_hidden"),D=n.isEnum,R=l("symbol-registry"),N=l("symbols"),L="function"==typeof w,x=Object.prototype,U=o&&c(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=b(x,t);n&&delete x[t],A(e,t,r),n&&e!==x&&A(x,t,n)}:A,F=function(e){var t=N[e]=S(w.prototype);return t._k=e,o&&_&&U(x,e,{configurable:!0,set:function(t){a(this,k)&&a(this[k],e)&&(this[k][e]=!1),U(this,e,C(1,t))}}),t},O=function(e){return"symbol"==typeof e},P=function(e,t,r){return r&&a(N,t)?(r.enumerable?(a(e,k)&&e[k][t]&&(e[k][t]=!1),r=S(r,{enumerable:C(0,!1)})):(a(e,k)||A(e,k,C(1,{})),e[k][t]=!0),U(e,t,r)):A(e,t,r)},M=function(e,t){m(e);for(var r,n=g(t=E(t)),i=0,a=n.length;a>i;)P(e,r=n[i++],t[r]);return e},V=function(e,t){return void 0===t?S(e):M(S(e),t)},j=function(e){var t=D.call(this,e);return!(t||!a(this,e)||!a(N,e)||a(this,k)&&this[k][e])||t},K=function(e,t){var r=b(e=E(e),t);return!r||!a(N,t)||a(e,k)&&e[k][t]||(r.enumerable=!0),r},q=function(e){for(var t,r=B(E(e)),n=[],i=0;r.length>i;)a(N,t=r[i++])||t==k||n.push(t);return n},H=function(e){for(var t,r=B(E(e)),n=[],i=0;r.length>i;)a(N,t=r[i++])&&n.push(N[t]);return n},z=function(e){if(void 0!==e&&!O(e)){for(var t,r,n=[e],i=1,a=arguments;a.length>i;)n.push(a[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!O(t))return t}),n[1]=t,I.apply(T,n)}},G=c(function(){var e=w();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))});L||(w=function(){if(O(this))throw TypeError("Symbol is not a constructor");return F(h(arguments.length>0?arguments[0]:void 0))},u(w.prototype,"toString",function(){return this._k}),O=function(e){return e instanceof w},n.create=V,n.isEnum=j,n.getDesc=K,n.setDesc=P,n.setDescs=M,n.getNames=y.get=q,n.getSymbols=H,o&&!r(35)&&u(x,"propertyIsEnumerable",j,!0));var Q={for:function(e){return a(R,e+="")?R[e]:R[e]=w(e)},keyFor:function(e){return d(R,e)},useSetter:function(){_=!0},useSimple:function(){_=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=p(e);Q[e]=L?t:F(t)}),_=!0,s(s.G+s.W,{Symbol:w}),s(s.S,"Symbol",Q),s(s.S+s.F*!L,"Object",{create:V,defineProperty:P,defineProperties:M,getOwnPropertyDescriptor:K,getOwnPropertyNames:q,getOwnPropertySymbols:H}),T&&s(s.S+s.F*(!L||G),"JSON",{stringify:z}),f(w,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){e.exports=!r(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(10),i=r(15),a=r(16),o="prototype",s=function(e,t,r){var u,c,l,f=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,y=e&s.B,g=e&s.W,v=h?i:i[t]||(i[t]={}),m=h?n:p?n[t]:(n[t]||{})[o];h&&(r=t);for(u in r)c=!f&&m&&u in m,c&&u in v||(l=c?m[u]:r[u],v[u]=h&&"function"!=typeof m[u]?r[u]:y&&c?a(l,n):g&&m[u]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[o]=e[o],t}(l):d&&"function"==typeof l?a(Function.call,l):l,d&&((v[o]||(v[o]={}))[u]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(17);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){e.exports=r(19)},function(e,t,r){var n=r(9),i=r(20);e.exports=r(12)?function(e,t,r){return n.setDesc(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(10),i="__core-js_shared__",a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,r){var n=r(9).setDesc,i=r(11),a=r(23)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(21)("wks"),i=r(24),a=r(10).Symbol;e.exports=function(e){return n[e]||(n[e]=a&&a[e]||(a||i)("Symbol."+e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(9),i=r(26);e.exports=function(e,t){for(var r,a=i(e),o=n.getKeys(a),s=o.length,u=0;s>u;)if(a[r=o[u++]]===t)return r}},function(e,t,r){var n=r(27),i=r(29);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(26),i=r(9).getNames,a={}.toString,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.get=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(9);e.exports=function(e){var t=n.getKeys(e),r=n.getSymbols;if(r)for(var i,a=r(e),o=n.isEnum,s=0;a.length>s;)o.call(e,i=a[s++])&&t.push(i);return t}},function(e,t,r){var n=r(28);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(34);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=!0},function(e,t){},function(e,t,r){e.exports={default:r(38),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){e.exports={default:r(40),__esModule:!0}},function(e,t,r){r(41),e.exports=r(15).Object.setPrototypeOf},function(e,t,r){var n=r(14);n(n.S,"Object",{setPrototypeOf:r(42).set})},function(e,t,r){var n=r(9).getDesc,i=r(34),a=r(33),o=function(e,t){if(a(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=r(16)(Function.call,n(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:i(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(44),__esModule:!0}},function(e,t,r){r(36),r(45),r(51),r(55),e.exports=r(15).Promise},function(e,t,r){"use strict";var n=r(46)(!0);r(48)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(47),i=r(29);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):(a-55296<<10)+(o-56320)+65536)}}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){"use strict";var n=r(35),i=r(14),a=r(18),o=r(19),s=r(11),u=r(49),c=r(50),l=r(22),f=r(9).getProto,h=r(23)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",g="values",v=function(){return this};e.exports=function(e,t,r,m,E,C,b){c(r,t,m);var A,S,B=function(e){if(!p&&e in _)return _[e];switch(e){case y:return function(){return new r(this,e)};case g:return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",T=E==g,I=!1,_=e.prototype,k=_[h]||_[d]||E&&_[E],D=k||B(E);if(k){var R=f(D.call(new e));l(R,w,!0),!n&&s(_,d)&&o(R,h,v),T&&k.name!==g&&(I=!0,D=function(){return k.call(this)})}if(n&&!b||!p&&!I&&_[h]||o(_,h,D),u[t]=D,u[w]=v,E)if(A={values:T?D:B(g),keys:C?D:B(y),entries:T?B("entries"):D},b)for(S in A)S in _||a(_,S,A[S]);else i(i.P+i.F*(p||I),t,A);return A}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(9),i=r(20),a=r(22),o={};r(19)(o,r(23)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n.create(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){r(52);var n=r(49);n.NodeList=n.HTMLCollection=n.Array},function(e,t,r){"use strict";var n=r(53),i=r(54),a=r(49),o=r(26);e.exports=r(48)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n,i=r(9),a=r(35),o=r(10),s=r(16),u=r(56),c=r(14),l=r(34),f=r(33),h=r(17),p=r(57),d=r(58),y=r(42).set,g=r(63),v=r(23)("species"),m=r(64),E=r(65),C="Promise",b=o.process,A="process"==u(b),S=o[C],B=function(){},w=function(e){var t,r=new S(B);return e&&(r.constructor=function(e){e(B,B)}),(t=S.resolve(r)).catch(B),t===r},T=function(){function e(t){var r=new S(t);return y(r,e.prototype),r}var t=!1;try{if(t=S&&S.resolve&&w(),y(e,S),e.prototype=i.create(S.prototype,{constructor:{value:e}}),e.resolve(5).then(function(){})instanceof e||(t=!1),t&&r(12)){var n=!1;S.resolve(i.setDesc({},"then",{get:function(){n=!0}})),t=n}}catch(e){t=!1}return t}(),I=function(e,t){return!(!a||e!==S||t!==n)||g(e,t)},_=function(e){var t=f(e)[v];return void 0!=t?t:e},k=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},D=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=h(t),this.reject=h(r)},R=function(e){try{e()}catch(e){return{error:e}}},N=function(e,t){if(!e.n){e.n=!0;var r=e.c;E(function(){for(var n=e.v,i=1==e.s,a=0,s=function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,u=t.reject;try{o?(i||(e.h=!0),r=o===!0?n:o(n),r===t.promise?u(TypeError("Promise-chain cycle")):(a=k(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}};r.length>a;)s(r[a++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,i=e.p;L(i)&&(A?b.emit("unhandledRejection",n,i):(t=o.onunhandledrejection)?t({promise:i,reason:n}):(r=o.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},L=function(e){var t,r=e._d,n=r.a||r.c,i=0;if(r.h)return!1;for(;n.length>i;)if(t=n[i++],t.fail||!L(t.promise))return!1;return!0},x=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),N(t,!0))},U=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===e)throw TypeError("Promise can't be resolved itself");(t=k(e))?E(function(){var n={r:r,d:!1};try{t.call(e,s(U,n,1),s(x,n,1))}catch(e){x.call(n,e)}}):(r.v=e,r.s=1,N(r,!1))}catch(e){x.call({r:r,d:!1},e)}}};T||(S=function(e){h(e);var t=this._d={p:p(this,S,C),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{e(s(U,t,1),s(x,t,1))}catch(e){x.call(t,e)}},r(70)(S.prototype,{then:function(e,t){var r=new D(m(this,S)),n=r.promise,i=this._d;return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,i.c.push(r),i.a&&i.a.push(r),i.s&&N(i,!1),n},catch:function(e){return this.then(void 0,e)}})),c(c.G+c.W+c.F*!T,{Promise:S}),r(22)(S,C),r(71)(C),n=r(15)[C],c(c.S+c.F*!T,C,{reject:function(e){var t=new D(this),r=t.reject;return r(e),t.promise}}),c(c.S+c.F*(!T||w(!0)),C,{resolve:function(e){if(e instanceof S&&I(e.constructor,this))return e;var t=new D(this),r=t.resolve;return r(e),t.promise}}),c(c.S+c.F*!(T&&r(72)(function(e){S.all(e).catch(function(){})})),C,{all:function(e){var t=_(this),r=new D(t),n=r.resolve,a=r.reject,o=[],s=R(function(){d(e,!1,o.push,o);var r=o.length,s=Array(r);r?i.each.call(o,function(e,i){var o=!1;t.resolve(e).then(function(e){o||(o=!0,s[i]=e,--r||n(s))},a)}):n(s)});return s&&a(s.error),r.promise},race:function(e){var t=_(this),r=new D(t),n=r.reject,i=R(function(){d(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(e,t,r){var n=r(28),i=r(23)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[i])?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},function(e,t,r){var n=r(16),i=r(59),a=r(60),o=r(33),s=r(61),u=r(62);e.exports=function(e,t,r,c){var l,f,h,p=u(e),d=n(r,c,t?2:1),y=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(a(p))for(l=s(e.length);l>y;y++)t?d(o(f=e[y])[0],f[1]):d(e[y]);else for(h=p.call(e);!(f=h.next()).done;)i(h,d,f.value,t)}},function(e,t,r){var n=r(33);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(49),i=r(23)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){var n=r(47),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(56),i=r(23)("iterator"),a=r(49);e.exports=r(15).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){var n=r(33),i=r(17),a=r(23)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n,i,a,o=r(10),s=r(66).set,u=o.MutationObserver||o.WebKitMutationObserver,c=o.process,l=o.Promise,f="process"==r(28)(c),h=function(){var e,t,r;for(f&&(e=c.domain)&&(c.domain=null,e.exit());n;)t=n.domain,r=n.fn,t&&t.enter(),r(),t&&t.exit(),n=n.next;i=void 0,e&&e.enter()};if(f)a=function(){c.nextTick(h)};else if(u){var p=1,d=document.createTextNode("");new u(h).observe(d,{characterData:!0}),a=function(){d.data=p=-p}}else a=l&&l.resolve?function(){l.resolve().then(h)}:function(){s.call(o,h)};e.exports=function(e){var t={fn:e,next:void 0,domain:f&&c.domain};i&&(i.next=t),n||(n=t,a()),i=t}},function(e,t,r){var n,i,a,o=r(16),s=r(67),u=r(68),c=r(69),l=r(10),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,y=0,g={},v="onreadystatechange",m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},E=function(e){m.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},n(y),y},p=function(e){delete g[e]},"process"==r(28)(f)?n=function(e){f.nextTick(o(m,e,1))}:d?(i=new d,a=i.port2,i.port1.onmessage=E,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",E,!1)):n=v in c("script")?function(e){u.appendChild(c("script"))[v]=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(o(m,e,1),0)}),e.exports={set:h,clear:p}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){e.exports=r(10).document&&document.documentElement},function(e,t,r){var n=r(34),i=r(10).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(18);e.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},function(e,t,r){"use strict";var n=r(15),i=r(9),a=r(12),o=r(23)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.setDesc(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(23)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(t,r,n,i){var a,o,s,u,c,l,f,h,v,E,b;return m.default.async(function(S){for(;;)switch(S.prev=S.next){case 0:return a=y(n),o=g(i),S.next=4,m.default.awrap(p(t,r,a));case 4:return s=S.sent,S.next=7,m.default.awrap(B.deriveKey(o,s.email,s.saltKey));case 7:return u=S.sent,S.next=10,m.default.awrap(B.deriveKey(o,s.email,s.saltEnc));case 10:return c=S.sent,S.next=13,m.default.awrap(B.generateKeyPairJWK());case 13:return l=S.sent,f=l.publicKey,h=l.privateKey,S.next=18,m.default.awrap(B.generateAES256Key());case 18:return v=S.sent,s.verifier=A.default.computeVerifier(d(),e.from(s.saltAuth,"hex"),e.from(s.email,"utf8"),e.from(u,"hex")).toString("hex"),E=B.encryptAES(c,(0,C.default)(v)),b=B.encryptAES(v,(0,C.default)(h)),s.publicKey=(0,C.default)(f),s.encPrivateKey=(0,C.default)(b),s.encSymmetricKey=(0,C.default)(E),S.abrupt("return",T.post("/auth/signup",s));case 26:case"end":return S.stop()}},null,this)}function o(t,r){var n,i,a,o,s,u,c,l,f,h,p,v,E,C,b,S;return m.default.async(function(w){for(;;)switch(w.prev=w.next){case 0:return n=y(t),i=g(r),w.next=4,m.default.awrap(T.post("/auth/login-s",{email:n}));case 4:return a=w.sent,o=a.saltKey,s=a.saltAuth,w.next=9,m.default.awrap(B.deriveKey(i,n,o));case 9:return u=w.sent,w.next=12,m.default.awrap(B.srpGenKey());case 12:return c=w.sent,l=new A.default.Client(d(),e.from(s,"hex"),e.from(n,"utf8"),e.from(u,"hex"),e.from(c,"hex")),f=l.computeA().toString("hex"),w.next=17,m.default.awrap(T.post("/auth/login-a",{srpA:f,email:n}));case 17:return h=w.sent,p=h.sessionStarterId,v=h.srpB,l.setB(new e(v,"hex")),E=l.computeM1().toString("hex"),w.next=24,m.default.awrap(T.post("/auth/login-m1",{srpM1:E,sessionStarterId:p}));case 24:C=w.sent,b=C.srpM2,l.checkM2(new e(b,"hex")),S=l.computeK().toString("hex"),localStorage.setItem("currentSessionId",S);case 29:case"end":return w.stop()}},null,this)}function s(e,t){return T.post("/api/billing/subscriptions",{token:e,quantity:1,plan:t})}function u(){return localStorage.getItem("currentSessionId")||I}function c(){return u()!==I}function l(){return m.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.default.awrap(T.post("/auth/logout"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("Failed to logout",e.t0);case 8:case"end":return e.stop()}},null,this,[[0,5]])}function f(){return m.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.awrap(T.del("/api/billing/subscriptions"));case 2:case"end":return e.stop()}},null,this)}function h(){return m.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.awrap(T.get("/auth/whoami"));case 2:case"end":return e.stop()}},null,this)}function p(e,t,r){return m.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=r,n.t1=e,n.t2=t,n.next=5,m.default.awrap(B.generateAccountId());case 5:return n.t3=n.sent,n.next=8,m.default.awrap(B.getRandomHex());case 8:return n.t4=n.sent,n.next=11,m.default.awrap(B.getRandomHex());case 11:return n.t5=n.sent,n.next=14,m.default.awrap(B.getRandomHex());case 14:return n.t6=n.sent,n.abrupt("return",{email:n.t0,firstName:n.t1,lastName:n.t2,id:n.t3,saltEnc:n.t4,saltAuth:n.t5,saltKey:n.t6});case 16:case"end":return n.stop()}},null,this)}function d(){return A.default.params[2048]}function y(e){return e.trim().toLowerCase()}function g(e){return e.trim().normalize("NFKD")}Object.defineProperty(t,"__esModule",{value:!0});var v=r(3),m=i(v),E=r(78),C=i(E);t.signup=a,t.login=o,t.subscribe=s,t.getCurrentSessionId=u,t.hasSessionId=c,t.logout=l,t.cancelAccount=f,t.whoami=h;var b=r(80),A=i(b),S=r(142),B=n(S),w=r(148),T=n(w),I="__NO_SESSION__"}).call(t,r(74).Buffer)},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,n):"string"==typeof t?f(e,t,r):d(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return u(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function l(e,t){if(u(t),e=a(e,t<0?0:0|y(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);e=a(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function h(e,t){var r=t.length<0?0:0|y(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function d(e,t){if(o.isBuffer(t)){var r=0|y(t.length);return e=a(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?a(e,0):h(e,t);if("Buffer"===t.type&&$(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function C(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(a(e,c)===a(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*o}else l!==-1&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(a(e,c+h)!==a(t,h)){f=!1;break}if(f)return c}return-1}function A(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function S(e,t,r,n){return X(z(t,e.length-r),e,r,n)}function B(e,t,r,n){return X(G(t),e,r,n)}function w(e,t,r,n){return B(e,t,r,n)}function T(e,t,r,n){return X(W(t),e,r,n)}function I(e,t,r,n){return X(Q(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&a)<<6|63&u,f>127&&(o=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(o=f))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return D(n)}function D(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function L(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=H(e[a]);return i}function x(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function U(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function P(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function M(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(e,t,r,n,i){return i||M(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function j(e,t,r,n,i){return i||M(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function K(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Q(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function W(e){return Z.toByteArray(K(e))}function X(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e){return e!==e}var Z=r(75),J=r(76),$=r(77);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return c(null,e,t,r)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,u=Math.min(a,s),c=this.slice(n,i),l=e.slice(t,r),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},o.prototype.indexOf=function(e,t,r){return C(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return C(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return A(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":return B(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;F(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;F(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);F(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);F(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return V(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return V(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:z(new o(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function i(e){var t,n,i,a,o,s,u=e.length;o=r(e),s=new l(3*u/4-o),i=o>0?u-4:u;var f=0;for(t=0,n=0;t<i;t+=4,n+=3)a=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[f++]=a>>16&255,s[f++]=a>>8&255,s[f++]=255&a;return 2===o?(a=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[f++]=255&a):1===o&&(a=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[f++]=a>>8&255,s[f++]=255&a),s}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function o(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function s(e){for(var t,r=e.length,n=r%3,i="",a=[],s=16383,c=0,l=r-n;c<l;c+=s)a.push(o(e,c,c+s>l?l:c+s));return 1===n?(t=e[r-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),a.push(i),a.join("")}t.byteLength=n,t.toByteArray=i,t.fromByteArray=s;for(var u=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=f.length;h<p;++h)u[h]=f[h],c[f.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+p]=255&o,p+=d,o/=256,c-=8);e[r+p-d]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports={default:r(79),__esModule:!0}},function(e,t,r){var n=r(15);e.exports=function(e){return(n.JSON&&n.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},function(e,t,r){e.exports=r(81),e.exports.params=r(141)},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"assertion")}function i(e,t){o(e,"n");var r=t-e.length;n(r>-1,"Negative padding.  Very uncomfortable.");var i=new T(t);return i.fill(0,0,r),e.copy(i,r),I.equal(i.length,t),i}function a(e,t){return u(e),i(e.toBuffer(),t.N_length_bits/8)}function o(e,t){t=t||"arg",n(T.isBuffer(e),"Type error: "+t+" must be a buffer")}function s(e,t,r){r=r||"arg",n(T.isBuffer(e),"Type error: "+r+" must be a buffer"),e.length!=t.N_length_bits/8&&n(!1,r+" was "+e.length+", expected "+t.N_length_bits/8)}function u(e){I.equal(e.constructor.name,"BigInteger")}function c(e,t,r,n){o(t,"salt (salt)"),o(r,"identity (I)"),o(n,"password (P)");var i=B.createHash(e.hash).update(T.concat([r,new T(":"),n])).digest(),a=B.createHash(e.hash).update(t).update(i).digest();return w.fromBuffer(a)}function l(e,t,r,n){o(t,"salt (salt)"),o(r,"identity (I)"),o(n,"password (P)");var i=e.g.powm(c(e,t,r,n),e.N);return a(i,e)}function f(e){var t=B.createHash(e.hash).update(a(e.N,e)).update(a(e.g,e)).digest();return w.fromBuffer(t)}function h(e,t){if(arguments.length<2&&(t=e,e=32),"function"!=typeof t)throw"Callback required";B.randomBytes(e,function(e,r){return e?t(e):t(null,r)})}function p(e,t,r,n){u(r),u(t),u(n);var i=e.N,o=t.mul(r).add(e.g.powm(n,i)).mod(i);return a(o,e)}function d(e,t){return u(t),Math.ceil(t.bitLength()/8)<32&&console.warn("getA: client key length",t.bitLength(),"is less than the recommended 256"),a(e.g.powm(t,e.N),e)}function y(e,t,r){s(t,e,"A"),s(r,e,"B");var n=B.createHash(e.hash).update(t).update(r).digest();return w.fromBuffer(n)}function g(e,t,r,n,i,o){u(t),u(r),u(n),u(i),u(o);var s=e.g,c=e.N;if(_.ge(i)||c.le(i))throw new Error("invalid server-supplied 'B', must be 1..N-1");var l=i.sub(t.mul(s.powm(r,c))).powm(n.add(o.mul(r)),c).mod(c);return a(l,e)}function v(e,t,r,n,i){u(t),u(r),u(n),u(i);var o=e.N;if(_.ge(r)||o.le(r))throw new Error("invalid client-supplied 'A', must be 1..N-1");var s=r.mul(t.powm(i,o)).powm(n,o).mod(o);return a(s,e)}function m(e,t){return s(t,e,"S"),B.createHash(e.hash).update(t).digest()}function E(e,t,r,n){return s(t,e,"A"),s(r,e,"B"),s(n,e,"S"),B.createHash(e.hash).update(t).update(r).update(n).digest()}function C(e,t,r,n){return s(t,e,"A"),o(r,"M"),o(n,"K"),B.createHash(e.hash).update(t).update(r).update(n).digest()}function b(e,t){var r=e.length-t.length;if(r)return!1;for(var n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function A(e,t,r,n,i){return this instanceof A?(o(t,"salt (salt)"),o(r,"identity (I)"),o(n,"password (P)"),o(i,"secret1"),this._private={params:e,k_num:f(e),x_num:c(e,t,r,n),a_num:w.fromBuffer(i)},void(this._private.A_buf=d(e,this._private.a_num))):new A(e,t,r,n,i)}function S(e,t,r){return this instanceof S?(o(t,"verifier"),o(r,"secret2"),this._private={params:e,k_num:f(e),b_num:w.fromBuffer(r),v_num:w.fromBuffer(t)},void(this._private.B_buf=p(e,this._private.k_num,this._private.v_num,this._private.b_num))):new S(e,t,r)}const B=r(82),w=r(136),T=r(137),I=r(140),_=w(0);A.prototype={computeA:function(){return this._private.A_buf},setB:function(e){var t=this._private,r=w.fromBuffer(e),n=y(t.params,t.A_buf,e),i=g(t.params,t.k_num,t.x_num,t.a_num,r,n);t.K_buf=m(t.params,i),t.M1_buf=E(t.params,t.A_buf,e,i),t.M2_buf=C(t.params,t.A_buf,t.M1_buf,t.K_buf),t.u_num=n,t.S_buf=i},computeM1:function(){if(void 0===this._private.M1_buf)throw new Error("incomplete protocol");return this._private.M1_buf},checkM2:function(e){if(!b(this._private.M2_buf,e))throw new Error("server is not authentic")},computeK:function(){if(void 0===this._private.K_buf)throw new Error("incomplete protocol");return this._private.K_buf}},S.prototype={computeB:function(){return this._private.B_buf},setA:function(e){var t=this._private,r=w.fromBuffer(e),n=y(t.params,e,t.B_buf),i=v(t.params,t.v_num,r,t.b_num,n);t.K_buf=m(t.params,i),t.M1_buf=E(t.params,e,t.B_buf,i),t.M2_buf=C(t.params,e,t.M1_buf,t.K_buf),t.u_num=n,t.S_buf=i},checkM1:function(e){if(void 0===this._private.M1_buf)throw new Error("incomplete protocol");if(!b(this._private.M1_buf,e))throw new Error("client did not use the same password");return this._private.M2_buf},computeK:function(){if(void 0===this._private.K_buf)throw new Error("incomplete protocol");return this._private.K_buf}},e.exports={params:r(141),genKey:h,computeVerifier:l,Client:A,Server:S}},function(e,t,r){(function(n){function i(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function a(e,t){for(var r in e)t(e[r],r)}var o=r(83);t.createHash=r(85),t.createHmac=r(97),t.randomBytes=function(e,t){if(!t||!t.call)return new n(o(e));try{t.call(this,void 0,new n(o(e)))}catch(e){t(e)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=r(98)(t);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync,r(100)(t,e.exports),a(["createCredentials","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){i("sorry,",e,"is not implemented yet")}})}).call(t,r(74).Buffer)},function(e,t,r){(function(t,n){!function(){var i=("undefined"==typeof window?t:window)||{};_crypto=i.crypto||i.msCrypto||r(84),e.exports=function(e){if(_crypto.getRandomValues){var t=new n(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),r(74).Buffer)},function(e,t){},function(e,t,r){(function(t){function n(e){return function(){var r=[],n={update:function(e,n){return t.isBuffer(e)||(e=new t(e,n)),r.push(e),this},digest:function(n){var i=t.concat(r),a=e(i);return r=null,n?a.toString(n):a}};return n}}var i=r(86),a=n(r(94)),o=n(r(96));e.exports=function(e){return"md5"===e?new a:"rmd160"===e?new o:i(e)}}).call(t,r(74).Buffer)},function(e,t,r){var t=e.exports=function(e){var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r},n=r(74).Buffer,i=r(87)(n);t.sha1=r(88)(n,i),t.sha256=r(92)(n,i),t.sha512=r(93)(n,i)},function(e,t){e.exports=function(e){function t(t,r){this._block=new e(t),this._finalSize=r,this._blockSize=t,this._len=0,this._s=0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,r){"string"==typeof t&&(r=r||"utf8",t=new e(t,r));for(var n=this._len+=t.length,i=this._s=this._s||0,a=0,o=this._block;i<n;){for(var s=Math.min(t.length,a+this._blockSize-i%this._blockSize),u=s-a,c=0;c<u;c++)o[i%this._blockSize+c]=t[c+a];i+=u,a+=u,i%this._blockSize===0&&this._update(o)}return this._s=i,this},t.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var r=this._update(this._block)||this._hash();return e?r.toString(e):r},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},function(e,t,r){var n=r(89).inherits;e.exports=function(e,t){function r(){return d.length?d.pop().init():this instanceof r?(this._w=p,t.call(this,64,56),this._h=null,void this.init()):new r}function i(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function a(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function o(e,t){return e+t|0}function s(e,t){return e<<t|e>>>32-t}var u=0,c=4,l=8,f=12,h=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return n(r,t),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},r.prototype._POOL=d,r.prototype._update=function(e){var t,r,n,u,c,l,f,h,p,d;t=l=this._a,r=f=this._b,n=h=this._c,u=p=this._d,c=d=this._e;for(var y=this._w,g=0;g<80;g++){var v=y[g]=g<16?e.readInt32BE(4*g):s(y[g-3]^y[g-8]^y[g-14]^y[g-16],1),m=o(o(s(t,5),i(g,r,n,u)),o(o(c,v),a(g)));c=u,u=n,n=s(r,30),r=t,t=m}this._a=o(t,l),this._b=o(r,f),this._c=o(n,h),this._d=o(u,p),this._e=o(c,d)},r.prototype._hash=function(){d.length<100&&d.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,u),t.writeInt32BE(0|this._b,c),t.writeInt32BE(0|this._c,l),t.writeInt32BE(0|this._d,f),t.writeInt32BE(0|this._e,h),t},r}},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),u(n,e,n.depth)}function a(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return E(i)||(i=u(e,i,n)),i}var a=c(e,r);if(a)return a;var o=Object.keys(r),y=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),w(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(r);if(0===o.length){if(T(r)){var g=r.name?": "+r.name:"";return e.stylize("[Function"+g+"]","special")}if(A(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(B(r))return e.stylize(Date.prototype.toString.call(r),"date");
if(w(r))return l(r)}var v="",m=!1,C=["{","}"];if(d(r)&&(m=!0,C=["[","]"]),T(r)){var b=r.name?": "+r.name:"";v=" [Function"+b+"]"}if(A(r)&&(v=" "+RegExp.prototype.toString.call(r)),B(r)&&(v=" "+Date.prototype.toUTCString.call(r)),w(r)&&(v=" "+l(r)),0===o.length&&(!m||0==r.length))return C[0]+v+C[1];if(n<0)return A(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var S;return S=m?f(e,r,n,y,o):o.map(function(t){return h(e,r,n,y,t,m)}),e.seen.pop(),p(S,v,C)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)R(t,String(o))?a.push(h(e,t,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(e,t,r,n,i,!0))}),a}function h(e,t,r,n,i,a){var o,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),R(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(r)?u(e,c.value,null):u(e,c.value,r-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function m(e){return"number"==typeof e}function E(e){return"string"==typeof e}function C(e){return"symbol"==typeof e}function b(e){return void 0===e}function A(e){return S(e)&&"[object RegExp]"===_(e)}function S(e){return"object"==typeof e&&null!==e}function B(e){return S(e)&&"[object Date]"===_(e)}function w(e){return S(e)&&("[object Error]"===_(e)||e instanceof Error)}function T(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),U[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!E(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,a=n.length,o=String(e).replace(N,function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<a;s=n[++r])o+=g(s)||!S(s)?" "+s:" "+i(s);return o},t.deprecate=function(r,i){function a(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}if(b(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var o=!1;return a};var L,x={};t.debuglog=function(e){if(b(L)&&(L=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!x[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var r=n.pid;x[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else x[e]=function(){};return x[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=y,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=m,t.isString=E,t.isSymbol=C,t.isUndefined=b,t.isRegExp=A,t.isObject=S,t.isDate=B,t.isError=w,t.isFunction=T,t.isPrimitive=I,t.isBuffer=r(90);var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=r(91),t._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,function(){return this}(),r(5))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(89).inherits;e.exports=function(e,t){function r(){this.init(),this._w=p,t.call(this,64,56)}function i(e,t){return e>>>t|e<<32-t}function a(e,t){return e>>>t}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function u(e){return i(e,2)^i(e,13)^i(e,22)}function c(e){return i(e,6)^i(e,11)^i(e,25)}function l(e){return i(e,7)^i(e,18)^a(e,3)}function f(e){return i(e,17)^i(e,19)^a(e,10)}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return n(r,t),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},r.prototype._update=function(e){var t,r,n,i,a,p,d,y,g,v,m=this._w;t=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,a=0|this._e,p=0|this._f,d=0|this._g,y=0|this._h;for(var E=0;E<64;E++){var C=m[E]=E<16?e.readInt32BE(4*E):f(m[E-2])+m[E-7]+l(m[E-15])+m[E-16];g=y+c(a)+o(a,p,d)+h[E]+C,v=u(t)+s(t,r,n),y=d,d=p,p=a,a=i+g,i=n,n=r,r=t,t=g+v}this._a=t+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=i+this._d|0,this._e=a+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=y+this._h|0},r.prototype._hash=function(){var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},r}},function(e,t,r){var n=r(89).inherits;e.exports=function(e,t){function r(){this.init(),this._w=u,t.call(this,128,112)}function i(e,t,r){return e>>>r|t<<32-r}function a(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}var s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return n(r,t),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},r.prototype._update=function(e){var t,r,n,u,c,l,f,h,p,d,y,g,v,m,E,C,b=this._w;t=0|this._a,r=0|this._b,n=0|this._c,u=0|this._d,c=0|this._e,l=0|this._f,f=0|this._g,h=0|this._h,p=0|this._al,d=0|this._bl,y=0|this._cl,g=0|this._dl,v=0|this._el,m=0|this._fl,E=0|this._gl,C=0|this._hl;for(var A=0;A<80;A++){var S,B,w=2*A;if(A<16)S=b[w]=e.readInt32BE(4*w),B=b[w+1]=e.readInt32BE(4*w+4);else{var T=b[w-30],I=b[w-30+1],_=i(T,I,1)^i(T,I,8)^T>>>7,k=i(I,T,1)^i(I,T,8)^i(I,T,7);T=b[w-4],I=b[w-4+1];var D=i(T,I,19)^i(I,T,29)^T>>>6,R=i(I,T,19)^i(T,I,29)^i(I,T,6),N=b[w-14],L=b[w-14+1],x=b[w-32],U=b[w-32+1];B=k+L,S=_+N+(B>>>0<k>>>0?1:0),B+=R,S=S+D+(B>>>0<R>>>0?1:0),B+=U,S=S+x+(B>>>0<U>>>0?1:0),b[w]=S,b[w+1]=B}var F=o(t,r,n),O=o(p,d,y),P=i(t,p,28)^i(p,t,2)^i(p,t,7),M=i(p,t,28)^i(t,p,2)^i(t,p,7),V=i(c,v,14)^i(c,v,18)^i(v,c,9),j=i(v,c,14)^i(v,c,18)^i(c,v,9),K=s[w],q=s[w+1],H=a(c,l,f),z=a(v,m,E),G=C+j,Q=h+V+(G>>>0<C>>>0?1:0);G+=z,Q=Q+H+(G>>>0<z>>>0?1:0),G+=q,Q=Q+K+(G>>>0<q>>>0?1:0),G+=B,Q=Q+S+(G>>>0<B>>>0?1:0);var W=M+O,X=P+F+(W>>>0<M>>>0?1:0);h=f,C=E,f=l,E=m,l=c,m=v,v=g+G|0,c=u+Q+(v>>>0<g>>>0?1:0)|0,u=n,g=y,n=r,y=d,r=t,d=p,p=G+W|0,t=Q+X+(p>>>0<G>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+d|0,this._cl=this._cl+y|0,this._dl=this._dl+g|0,this._el=this._el+v|0,this._fl=this._fl+m|0,this._gl=this._gl+E|0,this._hl=this._hl+C|0,this._a=this._a+t+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+r+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<y>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+l+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<E>>>0?1:0)|0,this._h=this._h+h+(this._hl>>>0<C>>>0?1:0)|0},r.prototype._hash=function(){function t(e,t,n){r.writeInt32BE(e,n),r.writeInt32BE(t,n+4)}var r=new e(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),r},r}},function(e,t,r){function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,i=-1732584194,l=271733878,f=0;f<e.length;f+=16){var h=r,p=n,d=i,y=l;r=a(r,n,i,l,e[f+0],7,-680876936),l=a(l,r,n,i,e[f+1],12,-389564586),i=a(i,l,r,n,e[f+2],17,606105819),n=a(n,i,l,r,e[f+3],22,-1044525330),r=a(r,n,i,l,e[f+4],7,-176418897),l=a(l,r,n,i,e[f+5],12,1200080426),i=a(i,l,r,n,e[f+6],17,-1473231341),n=a(n,i,l,r,e[f+7],22,-45705983),r=a(r,n,i,l,e[f+8],7,1770035416),l=a(l,r,n,i,e[f+9],12,-1958414417),i=a(i,l,r,n,e[f+10],17,-42063),n=a(n,i,l,r,e[f+11],22,-1990404162),r=a(r,n,i,l,e[f+12],7,1804603682),l=a(l,r,n,i,e[f+13],12,-40341101),i=a(i,l,r,n,e[f+14],17,-1502002290),n=a(n,i,l,r,e[f+15],22,1236535329),r=o(r,n,i,l,e[f+1],5,-165796510),l=o(l,r,n,i,e[f+6],9,-1069501632),i=o(i,l,r,n,e[f+11],14,643717713),n=o(n,i,l,r,e[f+0],20,-373897302),r=o(r,n,i,l,e[f+5],5,-701558691),l=o(l,r,n,i,e[f+10],9,38016083),i=o(i,l,r,n,e[f+15],14,-660478335),n=o(n,i,l,r,e[f+4],20,-405537848),r=o(r,n,i,l,e[f+9],5,568446438),l=o(l,r,n,i,e[f+14],9,-1019803690),i=o(i,l,r,n,e[f+3],14,-187363961),n=o(n,i,l,r,e[f+8],20,1163531501),r=o(r,n,i,l,e[f+13],5,-1444681467),l=o(l,r,n,i,e[f+2],9,-51403784),i=o(i,l,r,n,e[f+7],14,1735328473),n=o(n,i,l,r,e[f+12],20,-1926607734),r=s(r,n,i,l,e[f+5],4,-378558),l=s(l,r,n,i,e[f+8],11,-2022574463),i=s(i,l,r,n,e[f+11],16,1839030562),n=s(n,i,l,r,e[f+14],23,-35309556),r=s(r,n,i,l,e[f+1],4,-1530992060),l=s(l,r,n,i,e[f+4],11,1272893353),i=s(i,l,r,n,e[f+7],16,-155497632),n=s(n,i,l,r,e[f+10],23,-1094730640),r=s(r,n,i,l,e[f+13],4,681279174),l=s(l,r,n,i,e[f+0],11,-358537222),i=s(i,l,r,n,e[f+3],16,-722521979),n=s(n,i,l,r,e[f+6],23,76029189),r=s(r,n,i,l,e[f+9],4,-640364487),l=s(l,r,n,i,e[f+12],11,-421815835),i=s(i,l,r,n,e[f+15],16,530742520),n=s(n,i,l,r,e[f+2],23,-995338651),r=u(r,n,i,l,e[f+0],6,-198630844),l=u(l,r,n,i,e[f+7],10,1126891415),i=u(i,l,r,n,e[f+14],15,-1416354905),n=u(n,i,l,r,e[f+5],21,-57434055),r=u(r,n,i,l,e[f+12],6,1700485571),l=u(l,r,n,i,e[f+3],10,-1894986606),i=u(i,l,r,n,e[f+10],15,-1051523),n=u(n,i,l,r,e[f+1],21,-2054922799),r=u(r,n,i,l,e[f+8],6,1873313359),l=u(l,r,n,i,e[f+15],10,-30611744),i=u(i,l,r,n,e[f+6],15,-1560198380),n=u(n,i,l,r,e[f+13],21,1309151649),r=u(r,n,i,l,e[f+4],6,-145523070),l=u(l,r,n,i,e[f+11],10,-1120210379),i=u(i,l,r,n,e[f+2],15,718787259),n=u(n,i,l,r,e[f+9],21,-343485551),r=c(r,h),n=c(n,p),i=c(i,d),l=c(l,y)}return Array(r,n,i,l)}function i(e,t,r,n,i,a){return c(l(c(c(t,e),c(n,a)),i),r)}function a(e,t,r,n,a,o,s){return i(t&r|~t&n,e,t,a,o,s)}function o(e,t,r,n,a,o,s){return i(t&n|r&~n,e,t,a,o,s)}function s(e,t,r,n,a,o,s){return i(t^r^n,e,t,a,o,s)}function u(e,t,r,n,a,o,s){return i(r^(t|~n),e,t,a,o,s)}function c(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function l(e,t){return e<<t|e>>>32-t}var f=r(95);e.exports=function(e){return f.hash(e,n,16)}},function(e,t,r){(function(t){function r(e,r){if(e.length%a!==0){var n=e.length+(a-e.length%a);e=t.concat([e,o],n)}for(var i=[],s=r?e.readInt32BE:e.readInt32LE,u=0;u<e.length;u+=a)i.push(s.call(e,u));return i}function n(e,r,n){for(var i=new t(r),a=n?i.writeInt32BE:i.writeInt32LE,o=0;o<e.length;o++)a.call(i,e[o],4*o,!0);return i}function i(e,i,a,o){t.isBuffer(e)||(e=new t(e));var u=i(r(e,o),e.length*s);return n(u,a,o)}var a=4,o=new t(a);o.fill(0);var s=8;e.exports={hash:i}}).call(t,r(74).Buffer)},function(e,t,r){(function(t){function r(e,t,r){return e^t^r}function n(e,t,r){return e&t|~e&r}function i(e,t,r){return(e|~t)^r}function a(e,t,r){return e&r|t&~r}function o(e,t,r){return e^(t|~r)}function s(e,t){return e<<t|e>>>32-t}function u(e){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var n=y(e),i=8*e.length,a=8*e.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);for(var o=0;o<n.length;o+=16)v(r,n,o);for(var o=0;o<5;o++){var s=r[o];r[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var u=g(r);return new t(u)}e.exports=u;/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
	
	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],y=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},g=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},v=function(e,t,u){for(var y=0;y<16;y++){var g=u+y,v=t[g];t[g]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var m,E,C,b,A,S,B,w,T,I;S=m=e[0],B=E=e[1],w=C=e[2],T=b=e[3],I=A=e[4];for(var _,y=0;y<80;y+=1)_=m+t[u+c[y]]|0,_+=y<16?r(E,C,b)+p[0]:y<32?n(E,C,b)+p[1]:y<48?i(E,C,b)+p[2]:y<64?a(E,C,b)+p[3]:o(E,C,b)+p[4],_|=0,_=s(_,f[y]),_=_+A|0,m=A,A=b,b=s(C,10),C=E,E=_,_=S+t[u+l[y]]|0,_+=y<16?o(B,w,T)+d[0]:y<32?a(B,w,T)+d[1]:y<48?i(B,w,T)+d[2]:y<64?n(B,w,T)+d[3]:r(B,w,T)+d[4],_|=0,_=s(_,h[y]),_=_+I|0,S=I,I=T,T=s(w,10),w=B,B=_;_=e[1]+C+T|0,e[1]=e[2]+b+I|0,e[2]=e[3]+A+S|0,e[3]=e[4]+m+B|0,e[4]=e[0]+E+w|0,e[0]=_}}).call(t,r(74).Buffer)},function(e,t,r){(function(t){function n(e,r){if(!(this instanceof n))return new n(e,r);this._opad=u,this._alg=e;var o="sha512"===e?128:64;r=this._key=t.isBuffer(r)?r:new t(r),r.length>o?r=i(e).update(r).digest():r.length<o&&(r=t.concat([r,a],o));for(var s=this._ipad=new t(o),u=this._opad=new t(o),c=0;c<o;c++)s[c]=54^r[c],u[c]=92^r[c];this._hash=i(e).update(s)}var i=r(85),a=new t(128);a.fill(0),e.exports=n,n.prototype.update=function(e,t){return this._hash.update(e,t),this},n.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)}}).call(t,r(74).Buffer)},function(e,t,r){var n=r(99);e.exports=function(e,t){t=t||{};var r=n(e);return t.pbkdf2=r.pbkdf2,t.pbkdf2Sync=r.pbkdf2Sync,t}},function(e,t,r){(function(t){e.exports=function(e){function r(e,t,r,i,a,o){if("function"==typeof a&&(o=a,a=void 0),"function"!=typeof o)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var s;try{s=n(e,t,r,i,a)}catch(e){return o(e)}o(void 0,s)})}function n(r,n,i,a,o){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof a)throw new TypeError("Key length not a number");if(a<0)throw new TypeError("Bad key length");o=o||"sha1",t.isBuffer(r)||(r=new t(r)),t.isBuffer(n)||(n=new t(n));var s,u,c,l=1,f=new t(a),h=new t(n.length+4);n.copy(h,0,0,n.length);for(var p=1;p<=l;p++){h.writeUInt32BE(p,n.length);var d=e.createHmac(o,r).update(h).digest();if(!s&&(s=d.length,c=new t(s),l=Math.ceil(a/s),u=a-(l-1)*s,a>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");d.copy(c,0,0,s);for(var y=1;y<i;y++){d=e.createHmac(o,r).update(d).digest();for(var g=0;g<s;g++)c[g]^=d[g]}var v=(p-1)*s,m=p==l?u:s;c.copy(f,v,0,m)}return f}return{pbkdf2:r,pbkdf2Sync:n}}}).call(t,r(74).Buffer)},function(e,t,r){e.exports=function(e,t){function n(){return Object.keys(o)}t=t||{};var i=r(101)(e);t.createCipher=i.createCipher,t.createCipheriv=i.createCipheriv;var a=r(135)(e);t.createDecipher=a.createDecipher,t.createDecipheriv=a.createDecipheriv;var o=r(126);t.listCiphers=n}},function(e,t,r){(function(t){function n(e,r,s){return this instanceof n?(o.call(this),this._cache=new i,this._cipher=new a.AES(r),this._prev=new t(s.length),s.copy(this._prev),void(this._mode=e)):new n(e,r,s)}function i(){return this instanceof i?void(this.cache=new t("")):new i}var a=r(102),o=r(103),s=r(106),u=r(126),c=r(127),l=r(128);s(n,o),n.prototype._transform=function(e,t,r){this._cache.add(e);for(var n,i;n=this._cache.get();)i=this._mode.encrypt(this,n),this.push(i);r()},n.prototype._flush=function(e){var t=this._cache.flush();this.push(this._mode.encrypt(this,t)),this._cipher.scrub(),e()},i.prototype.add=function(e){this.cache=t.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){for(var e=16-this.cache.length,r=new t(e),n=-1;++n<e;)r.writeUInt8(e,n);var i=t.concat([this.cache,r]);return i};var f={ECB:r(129),CBC:r(130),CFB:r(132),OFB:r(133),CTR:r(134)};e.exports=function(e){function r(e,r,i){var a=u[e];if(!a)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new t(i)),"string"==typeof r&&(r=new t(r)),r.length!==a.key/8)throw new TypeError("invalid key length "+r.length);if(i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===a.type?new l(f[a.mode],r,i):new n(f[a.mode],r,i)}function i(t,n){var i=u[t];if(!i)throw new TypeError("invalid suite type");var a=c(e,n,i.key,i.iv);return r(t,a.key,a.iv)}return{createCipher:i,createCipheriv:r}}}).call(t,r(74).Buffer)},function(e,t,r){(function(e){function r(e){var t,r;return t=e>s||e<0?(r=Math.abs(e)%s,e<0?s-r:r):e}function n(e){var t,r,n;for(t=r=0,n=e.length;0<=n?r<n:r>n;t=0<=n?++r:--r)e[t]=0;return!1}function i(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var t,r;for(r=[],e=t=0;t<4;e=++t)r.push([]);return r}(),this.INV_SUB_MIX=function(){var t,r;for(r=[],e=t=0;t<4;e=++t)r.push([]);return r}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function a(e){for(var t=e.length/4,r=new Array(t),n=-1;++n<t;)r[n]=e.readUInt32BE(4*n);return r}function o(e){this._key=a(e),this._doReset()}var s=Math.pow(2,32);i.prototype.init=function(){var e,t,r,n,i,a,o,s,u,c;for(e=function(){var e,r;for(r=[],t=e=0;e<256;t=++e)t<128?r.push(t<<1):r.push(t<<1^283);return r}(),i=0,u=0,t=c=0;c<256;t=++c)r=u^u<<1^u<<2^u<<3^u<<4,r=r>>>8^255&r^99,this.SBOX[i]=r,this.INV_SBOX[r]=i,a=e[i],o=e[a],s=e[o],n=257*e[r]^16843008*r,this.SUB_MIX[0][i]=n<<24|n>>>8,this.SUB_MIX[1][i]=n<<16|n>>>16,this.SUB_MIX[2][i]=n<<8|n>>>24,this.SUB_MIX[3][i]=n,n=16843009*s^65537*o^257*a^16843008*i,this.INV_SUB_MIX[0][r]=n<<24|n>>>8,this.INV_SUB_MIX[1][r]=n<<16|n>>>16,this.INV_SUB_MIX[2][r]=n<<8|n>>>24,this.INV_SUB_MIX[3][r]=n,0===i?i=u=1:(i=a^e[e[e[s^a]]],u^=e[e[u]]);return!0};var u=new i;o.blockSize=16,o.prototype.blockSize=o.blockSize,o.keySize=32,o.prototype.keySize=o.keySize,o.ivSize=o.blockSize,o.prototype.ivSize=o.ivSize,o.prototype._doReset=function(){var e,t,r,n,i,a,o,s;for(r=this._key,t=r.length,this._nRounds=t+6,i=4*(this._nRounds+1),this._keySchedule=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)this._keySchedule[n]=n<t?r[n]:(a=this._keySchedule[n-1],n%t===0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=u.RCON[n/t|0]<<24):t>6&&n%t===4?a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]:void 0,this._keySchedule[n-t]^a);for(this._invKeySchedule=[],e=s=0;0<=i?s<i:s>i;e=0<=i?++s:--s)n=i-e,a=this._keySchedule[n-(e%4?0:4)],this._invKeySchedule[e]=e<4||n<=4?a:u.INV_SUB_MIX[0][u.SBOX[a>>>24]]^u.INV_SUB_MIX[1][u.SBOX[a>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[a>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&a]];return!0},o.prototype.encryptBlock=function(t){t=a(new e(t));var r=this._doCryptBlock(t,this._keySchedule,u.SUB_MIX,u.SBOX),n=new e(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},o.prototype.decryptBlock=function(t){t=a(new e(t));var r=[t[3],t[1]];t[1]=r[0],t[3]=r[1];var n=this._doCryptBlock(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),i=new e(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},o.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},o.prototype._doCryptBlock=function(e,t,n,i){var a,o,s,u,c,l,f,h,p,d,y,g;for(s=e[0]^t[0],u=e[1]^t[1],c=e[2]^t[2],l=e[3]^t[3],a=4,o=y=1,g=this._nRounds;1<=g?y<g:y>g;o=1<=g?++y:--y)f=n[0][s>>>24]^n[1][u>>>16&255]^n[2][c>>>8&255]^n[3][255&l]^t[a++],h=n[0][u>>>24]^n[1][c>>>16&255]^n[2][l>>>8&255]^n[3][255&s]^t[a++],p=n[0][c>>>24]^n[1][l>>>16&255]^n[2][s>>>8&255]^n[3][255&u]^t[a++],d=n[0][l>>>24]^n[1][s>>>16&255]^n[2][u>>>8&255]^n[3][255&c]^t[a++],s=f,u=h,c=p,l=d;return f=(i[s>>>24]<<24|i[u>>>16&255]<<16|i[c>>>8&255]<<8|i[255&l])^t[a++],h=(i[u>>>24]<<24|i[c>>>16&255]<<16|i[l>>>8&255]<<8|i[255&s])^t[a++],p=(i[c>>>24]<<24|i[l>>>16&255]<<16|i[s>>>8&255]<<8|i[255&u])^t[a++],d=(i[l>>>24]<<24|i[s>>>16&255]<<16|i[u>>>8&255]<<8|i[255&c])^t[a++],[r(f),r(h),r(p),r(d)]},t.AES=o}).call(t,r(74).Buffer)},function(e,t,r){(function(t){function n(){i.call(this)}var i=r(104).Transform,a=r(106);e.exports=n,a(n,i),n.prototype.update=function(e,r,n){this.write(e,r);for(var i,a=new t("");i=this.read();)a=t.concat([a,i]);return n&&(a=a.toString(n)),a},n.prototype.final=function(e){this.end();for(var r,n=new t("");r=this.read();)n=t.concat([n,r]);return e&&(n=n.toString(e)),n}}).call(t,r(74).Buffer)},function(e,t,r){function n(){i.call(this)}e.exports=n;var i=r(105).EventEmitter,a=r(106);a(n,i),n.Readable=r(107),n.Writable=r(122),n.Duplex=r(123),n.Transform=r(124),n.PassThrough=r(125),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function a(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",a),c.removeListener("close",o),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",a),c.on("close",o));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),c=r.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(n){var i=function(){try{return r(104)}catch(e){}}();t=e.exports=r(108),t.Stream=i||t,t.Readable=t,t.Writable=r(115),t.Duplex=r(114),t.Transform=r(120),t.PassThrough=r(121),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,r(5))},function(e,t,r){(function(t){"use strict";function n(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function i(e,t){V=V||r(114),e=e||{},this.objectMode=!!e.objectMode,t instanceof V&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(P||(P=r(119).StringDecoder),this.decoder=new P(e.encoding),this.encoding=e.encoding)}function a(e){return V=V||r(114),this instanceof a?(this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void R.call(this)):new a(e)}function o(e,t,r,n,i){var a=l(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),d(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=j?e=j:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e,t){var r=null;return L.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?k(p,e):p(e))}function p(e){O("emit readable"),e.emit("readable"),C(e)}function d(e,t){t.readingMore||(t.readingMore=!0,k(y,e,t))}function y(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&N(e,"data")&&(t.flowing=!0,C(e))}}function v(e){O("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,k(E,e,t))}function E(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&null!==e.read(););}function b(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=A(e,t.buffer,t.decoder),r}function A(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?S(e,t):B(e,t),n}function S(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(i+=o===a.length?a:a.slice(0,e),e-=o,0===e){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}function B(e,t){var r=x.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),e-=o,0===e){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}function w(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,k(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function _(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}e.exports=a;var k=r(109),D=r(77);a.ReadableState=i;var R,N=(r(105).EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{R=r(104)}catch(e){}finally{R||(R=r(105).EventEmitter)}}();var L=r(74).Buffer,x=r(110),U=r(111);U.inherits=r(106);var F=r(112),O=void 0;O=F&&F.debuglog?F.debuglog("stream"):function(){};var P,M=r(113);U.inherits(a,R);var V,V;a.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=x.from(e,t),t="")),o(this,r,e,t,!1)},a.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},a.prototype.isPaused=function(){return this._readableState.flowing===!1},a.prototype.setEncoding=function(e){return P||(P=r(119).StringDecoder),this._readableState.decoder=new P(e),this._readableState.encoding=e,this};var j=8388608;a.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var n=t.needReadable;O("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,O("length less than watermark",n)),t.ended||t.reading?(n=!1,O("reading or ended",n)):n&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(r,t)));var i;return i=e>0?b(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&w(this)),null!==i&&this.emit("data",i),i},a.prototype._read=function(e){this.emit("error",new Error("not implemented"))},a.prototype.pipe=function(e,r){function i(e){O("onunpipe"),e===h&&o()}function a(){O("onend"),e.end()}function o(){O("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",v),e.removeListener("error",u),e.removeListener("unpipe",i),h.removeListener("end",a),h.removeListener("end",o),h.removeListener("data",s),m=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){O("ondata"),E=!1;var r=e.write(t);!1!==r||E||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&_(p.pipes,e)!==-1)&&!m&&(O("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,E=!0),h.pause())}function u(t){O("onerror",t),f(),e.removeListener("error",u),0===N(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){O("onfinish"),e.removeListener("close",c),f()}function f(){O("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,O("pipe count=%d opts=%j",p.pipesCount,r);var d=(!r||r.end!==!1)&&e!==t.stdout&&e!==t.stderr,y=d?a:o;p.endEmitted?k(y):h.once("end",y),e.on("unpipe",i);var v=g(h);e.on("drain",v);var m=!1,E=!1;return h.on("data",s),n(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),p.flowing||(O("pipe resume"),h.resume()),e},a.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=_(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},a.prototype.on=function(e,t){var r=R.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this,n):k(v,this))}return r},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,m(this,e)),this},a.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(O("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(O("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=n.push(i);a||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return I(a,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){O("wrapped _read",t),r&&(r=!1,e.resume())},n},a._fromList=b}).call(t,r(5))},function(e,t,r){(function(t){"use strict";function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(5))},function(e,t,r){(function(e){"use strict";var n=r(74),i=n.Buffer,a=n.SlowBuffer,o=n.kMaxLength||2147483647;t.alloc=function(e,t,r){if("function"==typeof i.alloc)return i.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>o)throw new RangeError("size is too large");var n=r,a=t;void 0===a&&(n=void 0,a=0);var s=new i(e);if("string"==typeof a)for(var u=new i(a,n),c=u.length,l=-1;++l<e;)s[l]=u[l%c];else s.fill(a);return s},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>o)throw new RangeError("size is too large");return new i(e)},t.from=function(t,r,n){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,r,n);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,r);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var a=r;if(1===arguments.length)return new i(t);"undefined"==typeof a&&(a=0);var o=n;if("undefined"==typeof o&&(o=t.byteLength-a),a>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(o>t.byteLength-a)throw new RangeError("'length' is out of bounds");return new i(t.slice(a,a+o))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=o)throw new RangeError("size is too large");return new a(e)}}).call(t,function(){return this}())},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function a(e){return null==e}function o(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===g(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function d(e){return"function"==typeof e}function y(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=a,t.isNumber=o,t.isString=s,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=p,t.isFunction=d,t.isPrimitive=y,t.isBuffer=e.isBuffer}).call(t,r(74).Buffer)},function(e,t){},function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=(r(74).Buffer,r(110));e.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},function(e,t,r){"use strict";function n(e){return this instanceof n?(c.call(this,e),l.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(a,this)}function a(e){e.end()}var o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var s=r(109),u=r(111);u.inherits=r(106);var c=r(108),l=r(115);u.inherits(n,c);for(var f=o(l.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=l.prototype[p])}},function(e,t,r){(function(t,n){"use strict";function i(){}function a(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(e,t){R=R||r(114),e=e||{},this.objectMode=!!e.objectMode,t instanceof R&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=e.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function s(e){return R=R||r(114),this instanceof s||this instanceof R?(this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void I.call(this)):new s(e)}function u(e,t){var r=new Error("write after end");e.emit("error",r),B(t,r)}function c(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):k.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),B(n,a),i=!1),i}function l(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=D.from(t,r)),t}function f(e,t,r,n,i){r=l(t,r,n),k.isBuffer(r)&&(n="buffer");var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new a(r,n,i),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,o,r,n,i);return s}function h(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function p(e,t,r,n,i){--t.pendingcb,r?B(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)p(e,r,n,t,i);else{var a=E(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?w(g,e,r,a,i):g(e,r,a,i)}}function g(e,t,r,n){
r||v(e,t),t.pendingcb--,n(),b(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;h(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new S(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback,l=t.objectMode?1:s.length;if(h(e,t,!1,l,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var r=E(t);return r&&(0===t.pendingcb?(C(e,t),t.finished=!0,e.emit("finish")):C(e,t)),r}function A(e,t,r){t.ending=!0,b(e,t),r&&(t.finished?B(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function S(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var B=r(109),w=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:B;s.WritableState=o;var T=r(111);T.inherits=r(106);var I,_={deprecate:r(118)};!function(){try{I=r(104)}catch(e){}finally{I||(I=r(105).EventEmitter)}}();var k=r(74).Buffer,D=r(110);T.inherits(s,I);var R;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var R;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,r){var n=this._writableState,a=!1;return"function"==typeof t&&(r=t,t=null),k.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=i),n.ended?u(this,r):c(this,n,e,r)&&(n.pendingcb++,a=f(this,n,e,t,r)),a},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,r){r(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||A(this,n,r)}}).call(t,r(5),r(116).setImmediate)},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(117),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return y[d]=n,p(d),d++}function i(e){delete y[e]}function a(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function o(e){if(g)setTimeout(o,0,e);else{var t=y[e];if(t){g=!0;try{a(t)}finally{i(e),g=!1}}}}function s(){p=function(e){t.nextTick(function(){o(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}function c(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&o(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),p=function(r){e.postMessage(t+r,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},p=function(t){e.port2.postMessage(t)}}function f(){var e=v.documentElement;p=function(t){var r=v.createElement("script");r.onreadystatechange=function(){o(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}function h(){p=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var p,d=1,y={},g=!1,v=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?s():u()?c():e.MessageChannel?l():v&&"onreadystatechange"in v.createElement("script")?f():h(),m.setImmediate=n,m.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),r(5))},function(e,t){(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,function(){return this}())},function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=r(74).Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=a;var s=r(114),u=r(111);u.inherits=r(106),u.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("Not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,r){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}e.exports=n;var i=r(120),a=r(111);a.inherits=r(106),a.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(115)},function(e,t,r){e.exports=r(114)},function(e,t,r){e.exports=r(120)},function(e,t,r){e.exports=r(121)},function(e,t){t["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},t["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},t["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},t["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},t["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},t["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},t.aes128=t["aes-128-cbc"],t.aes192=t["aes-192-cbc"],t.aes256=t["aes-256-cbc"],t["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},t["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},t["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},t["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},t["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},t["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},t["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},t["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},t["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"}},function(e,t,r){(function(t){e.exports=function(e,r,n,i){n/=8,i=i||0;for(var a,o,s,u=0,c=0,l=new t(n),f=new t(i),h=0;;){if(a=e.createHash("md5"),h++>0&&a.update(o),a.update(r),o=a.digest(),s=0,n>0)for(;;){if(0===n)break;if(s===o.length)break;l[u++]=o[s],n--,s++}if(i>0&&s!==o.length)for(;;){if(0===i)break;if(s===o.length)break;f[c++]=o[s],i--,s++}if(0===n&&0===i)break}for(s=0;s<o.length;s++)o[s]=0;return{key:l,iv:f}}}).call(t,r(74).Buffer)},function(e,t,r){(function(t){function n(e,r,o,s){return this instanceof n?(a.call(this),this._cipher=new i.AES(r),this._prev=new t(o.length),this._cache=new t(""),this._secCache=new t(""),this._decrypt=s,o.copy(this._prev),void(this._mode=e)):new n(e,r,o)}var i=r(102),a=r(103),o=r(106);o(n,a),e.exports=n,n.prototype._transform=function(e,t,r){r(null,this._mode.encrypt(this,e,this._decrypt))},n.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(t,r(74).Buffer)},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,r){var n=r(131);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},function(e,t,r){(function(t){function r(e,r){for(var n=Math.min(e.length,r.length),i=new t(n),a=-1;++a<n;)i.writeUInt8(e[a]^r[a],a);return i}e.exports=r}).call(t,r(74).Buffer)},function(e,t,r){(function(e){function n(t,r,n){var a=r.length,o=i(r,t._cache);return t._cache=t._cache.slice(a),t._prev=e.concat([t._prev,n?r:o]),o}var i=r(131);t.encrypt=function(t,r,i){for(var a,o=new e("");r.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=r.length)){o=e.concat([o,n(t,r,i)]);break}a=t._cache.length,o=e.concat([o,n(t,r.slice(0,a),i)]),r=r.slice(a)}return o}}).call(t,r(74).Buffer)},function(e,t,r){(function(e){function n(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var i=r(131);t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,n(t)]);var a=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),i(r,a)}}).call(t,r(74).Buffer)},function(e,t,r){(function(e){function n(e){var t=e._cipher.encryptBlock(e._prev);return i(e._prev),t}function i(e){for(var t,r=e.length;r--;){if(t=e.readUInt8(r),255!==t){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}var a=r(131);t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,n(t)]);var i=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),a(r,i)}}).call(t,r(74).Buffer)},function(e,t,r){(function(t){function n(e,r,a){return this instanceof n?(s.call(this),this._cache=new i,this._last=void 0,this._cipher=new o.AES(r),this._prev=new t(a.length),a.copy(this._prev),void(this._mode=e)):new n(e,r,a)}function i(){return this instanceof i?void(this.cache=new t("")):new i}function a(e){var t=e[15];if(16!==t)return e.slice(0,16-t)}var o=r(102),s=r(103),u=r(106),c=r(126),l=r(128),f=r(127);u(n,s),n.prototype._transform=function(e,t,r){this._cache.add(e);for(var n,i;n=this._cache.get();)i=this._mode.decrypt(this,n),this.push(i);r()},n.prototype._flush=function(e){var t=this._cache.flush();return t?(this.push(a(this._mode.decrypt(this,t))),void e()):e},i.prototype.add=function(e){this.cache=t.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){if(this.cache.length)return this.cache};var h={ECB:r(129),CBC:r(130),CFB:r(132),OFB:r(133),CTR:r(134)};e.exports=function(e){function r(e,r,i){var a=c[e];if(!a)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new t(i)),"string"==typeof r&&(r=new t(r)),r.length!==a.key/8)throw new TypeError("invalid key length "+r.length);if(i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===a.type?new l(h[a.mode],r,i,!0):new n(h[a.mode],r,i)}function i(t,n){var i=c[t];if(!i)throw new TypeError("invalid suite type");var a=f(e,n,i.key,i.iv);return r(t,a.key,a.iv)}return{createDecipher:i,createDecipheriv:r}}}).call(t,r(74).Buffer)},function(e,t,r){"use strict";function n(e){return"BigInteger"!==e.constructor.name&&(e=a(e)),e}function i(e){var t=e.toString("hex");return new u(t,16)}function a(e,t){return new u(e.toString(),t)}var o=r(137),s=r(139),u=s.BigInteger;u.prototype.toBuffer=function(){var e=this.toString(16);return e.length%2===1&&(e="0"+e),new o(e,"hex")},u.prototype.oldAdd=u.prototype.add,u.prototype.add=function(e){return this.oldAdd(n(e))},u.prototype.mul=function(e){return this.multiply(n(e))},u.prototype.sub=function(e){return this.subtract(n(e))},u.prototype.powm=function(e,t){return this.modPow(n(e),n(t))},u.prototype.eq=function(e){return this.equals(n(e))},u.prototype.ge=function(e){return this.compareTo(e)>=0},u.prototype.le=function(e){return this.compareTo(e)<=0},e.exports=a,e.exports.fromBuffer=i},function(e,t,r){(function(t,n){"use strict";t||(n.Buffer=r(138).Buffer),e.exports=t}).call(t,r(74).Buffer,function(){return this}())},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function i(t){if(t>X)throw new RangeError("Invalid typed array length");var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return a(e,t,r)}function a(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(e,t,r):"string"==typeof e?c(e,t):h(e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,r){return o(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}function u(e){return o(e),i(e<0?0:0|p(e))}function c(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r),a=i(n),o=a.write(t,r);return o!==n&&(a=a.slice(0,o)),a}function l(e){for(var t=e.length<0?0:0|p(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return i=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.__proto__=e.prototype,i}function h(t){if(e.isBuffer(t)){var r=0|p(t.length),n=i(r);return 0===n.length?n:(t.copy(n,0,0,r),n)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||G(t.length)?i(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+X.toString(16)+" bytes");return 0|e}function d(t){return+t!=t&&(t=0),e.alloc(+t)}function y(t,r){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(i)return j(t).length;r=(""+r).toLowerCase(),i=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(t,r,n,i,a){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof r&&(r=e.from(r,i)),e.isBuffer(r))return 0===r.length?-1:E(t,r,n,i,a);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):E(t,[r],n,i,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(a(e,c)===a(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*o}else l!==-1&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(a(e,c+h)!==a(t,h)){f=!1;break}if(f)return c}return-1}function C(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function b(e,t,r,n){return z(j(t,e.length-r),e,r,n)}function A(e,t,r,n){return z(K(t),e,r,n)}function S(e,t,r,n){return A(e,t,r,n)}function B(e,t,r,n){return z(H(t),e,r,n)}function w(e,t,r,n){return z(q(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&a)<<6|63&u,f>127&&(o=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(o=f))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return _(n)}function _(e){var t=e.length;if(t<=Y)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Y));return r}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=V(e[a]);return i}function N(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function L(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(t,r,n,i,a,o){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>a||r<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(e,t,r,n,23,4),r+4}function O(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(e,t,r,n,52,8),r+8}function P(e){if(e=M(e).replace(Z,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function M(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function K(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function q(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function H(e){return Q.toByteArray(P(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function G(e){return e!==e}var Q=r(75),W=r(76);t.Buffer=e,t.SlowBuffer=d,t.INSPECT_MAX_BYTES=50;var X=2147483647;t.kMaxLength=X,e.TYPED_ARRAY_SUPPORT=n(),e.TYPED_ARRAY_SUPPORT||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,r){return a(e,t,r)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,r){return s(e,t,r)},e.allocUnsafe=function(e){return u(e)},e.allocUnsafeSlow=function(e){return u(e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,a=0,o=Math.min(n,i);a<o;++a)if(t[a]!==r[a]){n=t[a],i=r[a];break}return n<i?-1:i<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=e.allocUnsafe(r),a=0;for(n=0;n<t.length;++n){var o=t[n];if(!e.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},e.byteLength=y,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,i,a){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),r<0||n>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===t)return 0;for(var o=a-i,s=n-r,u=Math.min(o,s),c=this.slice(i,a),l=t.slice(r,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},e.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},e.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return C(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return A(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return B(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i=this.subarray(t,r);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},e.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},e.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},e.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),W.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),W.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),W.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),W.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},e.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},e.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},e.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},e.prototype.fill=function(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=r;o<n;++o)this[o]=t;else{var s=e.isBuffer(t)?t:new e(t,i),u=s.length;for(o=0;o<n-r;++o)this[o+r]=s[o%u]}return this};var Z=/[^+\/0-9A-Za-z-_]/g}).call(t,r(74).Buffer)},function(e,t,r){(function(){function r(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new r(null)}function i(e,t,r,n,i,a){for(;--a>=0;){var o=t*this[e++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i}function a(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this[e],c=this[e++]>>15,l=s*u+c*o;u=o*u+((32767&l)<<15)+r[n]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),r[n++]=1073741823&u}return i}function o(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this[e],c=this[e++]>>14,l=s*u+c*o;u=o*u+((16383&l)<<14)+r[n]+i,i=(u>>28)+(l>>14)+s*c,r[n++]=268435455&u}return i}function s(e){return gt.charAt(e)}function u(e,t){var r=vt[e.charCodeAt(t)];return null==r?-1:r}function c(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function l(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function f(e){var t=n();return t.fromInt(e),t}function h(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,a=!1,o=0;--i>=0;){var s=8==n?255&e[i]:u(e,i);s<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,o+=n,o>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&r.ZERO.subTo(this,this)}function p(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function d(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,u=this.DB-o*this.DB%t;if(o-- >0)for(u<this.DB&&(r=this[o]>>u)>0&&(i=!0,a=s(r));o>=0;)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(a+=s(r));return i?a:"0"}function y(){var e=n();return r.ZERO.subTo(this,e),e}function g(){return this.s<0?this.negate():this}function v(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function m(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function E(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function C(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function b(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function A(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>i|s,s=(this[r]&a)<<n;for(r=o-1;r>=0;--r)t[r]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function S(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)return void(t.t=0);var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&a)<<i,t[o-r]=this[o]>>n;n>0&&(t[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function B(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function w(e,t){var n=this.abs(),i=e.abs(),a=n.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+n.t]=n.am(0,i[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)}function T(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function I(e,t,i){var a=e.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var s=n(),u=this.s,c=e.s,l=this.DB-m(a[a.t-1]);l>0?(a.lShiftTo(l,s),o.lShiftTo(l,i)):(a.copyTo(s),o.copyTo(i));var f=s.t,h=s[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,v=i.t,E=v-f,C=null==t?n():t;for(s.dlShiftTo(E,C),i.compareTo(C)>=0&&(i[i.t++]=1,i.subTo(C,i)),r.ONE.dlShiftTo(f,C),C.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--E>=0;){var b=i[--v]==h?this.DM:Math.floor(i[v]*d+(i[v-1]+g)*y);if((i[v]+=s.am(0,b,i,E,0,f))<b)for(s.dlShiftTo(E,C),i.subTo(C,i);i[v]<--b;)i.subTo(C,i)}null!=t&&(i.drShiftTo(f,t),u!=c&&r.ZERO.subTo(t,t)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&r.ZERO.subTo(i,i)}}}function _(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t}function k(e){this.m=e}function D(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function R(e){return e}function N(e){e.divRemTo(this.m,null,e)}function L(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function x(e,t){e.squareTo(t),this.reduce(t)}function U(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function F(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t}function P(e){var t=n();return e.copyTo(t),this.reduce(t),t}function M(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function V(e,t){e.squareTo(t),this.reduce(t)}function j(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function K(){return 0==(this.t>0?1&this[0]:this.s)}function q(e,t){if(e>4294967295||e<1)return r.ONE;var i=n(),a=n(),o=t.convert(this),s=m(e)-1;for(o.copyTo(i);--s>=0;)if(t.sqrTo(i,a),(e&1<<s)>0)t.mulTo(a,o,i);else{var u=i;i=a,a=u}return t.revert(i)}function H(e,t){var r;return r=e<256||t.isEven()?new k(t):new F(t),this.exp(e,r)}function z(){var e=n();return this.copyTo(e),e}function G(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Q(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function X(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=f(r),a=n(),o=n(),s="";for(this.divRemTo(i,a,o);a.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,a.divRemTo(i,a,o);return o.intValue().toString(e)+s}function J(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),a=!1,o=0,s=0,c=0;c<e.length;++c){var l=u(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(s=t*s+l,++o>=n&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),a&&r.ZERO.subTo(this,this)}function $(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),se,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var i=new Array,a=7&e;i.length=(e>>3)+1,t.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}}function ee(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function te(e){return 0==this.compareTo(e)}function re(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function ie(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function ae(e,t){return e&t}function oe(e){var t=n();return this.bitwiseTo(e,ae,t),t}function se(e,t){return e|t}function ue(e){var t=n();return this.bitwiseTo(e,se,t),t}function ce(e,t){return e^t}function le(e){var t=n();return this.bitwiseTo(e,ce,t),t}function fe(e,t){return e&~t}function he(e){var t=n();return this.bitwiseTo(e,fe,t),t}function pe(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function de(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ye(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ge(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ve(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ge(this[e]);return this.s<0?this.t*this.DB:-1}function me(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Ee(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=me(this[r]^t);return e}function Ce(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function be(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function Ae(e){return this.changeBit(e,se)}function Se(e){return this.changeBit(e,fe)}function Be(e){return this.changeBit(e,ce)}function we(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function Te(e){var t=n();return this.addTo(e,t),t}function Ie(e){var t=n();return this.subTo(e,t),t}function _e(e){var t=n();return this.multiplyTo(e,t),t}function ke(){var e=n();return this.squareTo(e),e}function De(e){var t=n();return this.divRemTo(e,t,null),t}function Re(e){var t=n();return this.divRemTo(e,null,t),t}function Ne(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)}function Le(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function xe(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ue(){}function Fe(e){return e}function Oe(e,t,r){e.multiplyTo(t,r)}function Pe(e,t){e.squareTo(t)}function Me(e){return this.exp(e,new Ue)}function Ve(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function je(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Ke(e){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function qe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function He(e){return e}function ze(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ge(e,t){e.squareTo(t),this.reduce(t)}function Qe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function We(e,t){var r,i,a=e.bitLength(),o=f(1);if(a<=0)return o;r=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new k(t):t.isEven()?new Ke(t):new F(t);var s=new Array,u=3,c=r-1,l=(1<<r)-1;if(s[1]=i.convert(this),r>1){var h=n();for(i.sqrTo(s[1],h);u<=l;)s[u]=n(),i.mulTo(h,s[u-2],s[u]),u+=2}var p,d,y=e.t-1,g=!0,v=n();for(a=m(e[y])-1;y>=0;){for(a>=c?p=e[y]>>a-c&l:(p=(e[y]&(1<<a+1)-1)<<c-a,y>0&&(p|=e[y-1]>>this.DB+a-c)),u=r;0==(1&p);)p>>=1,--u;if((a-=u)<0&&(a+=this.DB,--y),g)s[p].copyTo(o),g=!1;else{for(;u>1;)i.sqrTo(o,v),i.sqrTo(v,o),u-=2;u>0?i.sqrTo(o,v):(d=o,o=v,v=d),i.mulTo(v,s[p],o)}for(;y>=0&&0==(e[y]&1<<a);)i.sqrTo(o,v),d=o,o=v,v=d,--a<0&&(a=this.DB-1,--y)}return i.revert(o)}function Xe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();
if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function Ye(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function Ze(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),i=this.clone(),a=f(1),o=f(0),s=f(0),u=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),t&&a.subTo(s,a),o.subTo(u,o)):(i.subTo(n,i),t&&s.subTo(a,s),u.subTo(o,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}function Je(e){var t,r=this.abs();if(1==r.t&&r[0]<=mt[mt.length-1]){for(t=0;t<mt.length;++t)if(r[0]==mt[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<mt.length;){for(var n=mt[t],i=t+1;i<mt.length&&n<Et;)n*=mt[i++];for(n=r.modInt(n);t<i;)if(n%mt[t++]==0)return!1}return r.millerRabin(e)}function $e(e){var t=this.subtract(r.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var a=t.shiftRight(i);e=e+1>>1,e>mt.length&&(e=mt.length);for(var o=n(),s=0;s<e;++s){o.fromInt(mt[Math.floor(Math.random()*mt.length)]);var u=o.modPow(a,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<i&&0!=u.compareTo(t);)if(u=u.modPowInt(2,this),0==u.compareTo(r.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0}function et(e){bt[At++]^=255&e,bt[At++]^=e>>8&255,bt[At++]^=e>>16&255,bt[At++]^=e>>24&255,At>=Tt&&(At-=Tt)}function tt(){et((new Date).getTime())}function rt(){if(null==Ct){for(tt(),Ct=ut(),Ct.init(bt),At=0;At<bt.length;++At)bt[At]=0;At=0}return Ct.next()}function nt(e){var t;for(t=0;t<e.length;++t)e[t]=rt()}function it(){}function at(){this.i=0,this.j=0,this.S=new Array}function ot(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function st(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function ut(){return new at}var ct,lt=0xdeadbeefcafe,ft=15715070==(16777215&lt),ht="undefined"!=typeof navigator;ht&&ft&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=a,ct=30):ht&&ft&&"Netscape"!=navigator.appName?(r.prototype.am=i,ct=26):(r.prototype.am=o,ct=28),r.prototype.DB=ct,r.prototype.DM=(1<<ct)-1,r.prototype.DV=1<<ct;var pt=52;r.prototype.FV=Math.pow(2,pt),r.prototype.F1=pt-ct,r.prototype.F2=2*ct-pt;var dt,yt,gt="0123456789abcdefghijklmnopqrstuvwxyz",vt=new Array;for(dt="0".charCodeAt(0),yt=0;yt<=9;++yt)vt[dt++]=yt;for(dt="a".charCodeAt(0),yt=10;yt<36;++yt)vt[dt++]=yt;for(dt="A".charCodeAt(0),yt=10;yt<36;++yt)vt[dt++]=yt;k.prototype.convert=D,k.prototype.revert=R,k.prototype.reduce=N,k.prototype.mulTo=L,k.prototype.sqrTo=x,F.prototype.convert=O,F.prototype.revert=P,F.prototype.reduce=M,F.prototype.mulTo=j,F.prototype.sqrTo=V,r.prototype.copyTo=c,r.prototype.fromInt=l,r.prototype.fromString=h,r.prototype.clamp=p,r.prototype.dlShiftTo=C,r.prototype.drShiftTo=b,r.prototype.lShiftTo=A,r.prototype.rShiftTo=S,r.prototype.subTo=B,r.prototype.multiplyTo=w,r.prototype.squareTo=T,r.prototype.divRemTo=I,r.prototype.invDigit=U,r.prototype.isEven=K,r.prototype.exp=q,r.prototype.toString=d,r.prototype.negate=y,r.prototype.abs=g,r.prototype.compareTo=v,r.prototype.bitLength=E,r.prototype.mod=_,r.prototype.modPowInt=H,r.ZERO=f(0),r.ONE=f(1),Ue.prototype.convert=Fe,Ue.prototype.revert=Fe,Ue.prototype.mulTo=Oe,Ue.prototype.sqrTo=Pe,Ke.prototype.convert=qe,Ke.prototype.revert=He,Ke.prototype.reduce=ze,Ke.prototype.mulTo=Qe,Ke.prototype.sqrTo=Ge;var mt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Et=(1<<26)/mt[mt.length-1];r.prototype.chunkSize=X,r.prototype.toRadix=Z,r.prototype.fromRadix=J,r.prototype.fromNumber=$,r.prototype.bitwiseTo=ie,r.prototype.changeBit=be,r.prototype.addTo=we,r.prototype.dMultiply=Le,r.prototype.dAddOffset=xe,r.prototype.multiplyLowerTo=Ve,r.prototype.multiplyUpperTo=je,r.prototype.modInt=Ye,r.prototype.millerRabin=$e,r.prototype.clone=z,r.prototype.intValue=G,r.prototype.byteValue=Q,r.prototype.shortValue=W,r.prototype.signum=Y,r.prototype.toByteArray=ee,r.prototype.equals=te,r.prototype.min=re,r.prototype.max=ne,r.prototype.and=oe,r.prototype.or=ue,r.prototype.xor=le,r.prototype.andNot=he,r.prototype.not=pe,r.prototype.shiftLeft=de,r.prototype.shiftRight=ye,r.prototype.getLowestSetBit=ve,r.prototype.bitCount=Ee,r.prototype.testBit=Ce,r.prototype.setBit=Ae,r.prototype.clearBit=Se,r.prototype.flipBit=Be,r.prototype.add=Te,r.prototype.subtract=Ie,r.prototype.multiply=_e,r.prototype.divide=De,r.prototype.remainder=Re,r.prototype.divideAndRemainder=Ne,r.prototype.modPow=We,r.prototype.modInverse=Ze,r.prototype.pow=Me,r.prototype.gcd=Xe,r.prototype.isProbablePrime=Je,r.prototype.square=ke,r.prototype.Barrett=Ke;var Ct,bt,At;if(null==bt){bt=new Array,At=0;var St;if("undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var Bt=new Uint8Array(32);for(window.crypto.getRandomValues(Bt),St=0;St<32;++St)bt[At++]=Bt[St]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var wt=window.crypto.random(32);for(St=0;St<wt.length;++St)bt[At++]=255&wt.charCodeAt(St)}for(;At<Tt;)St=Math.floor(65536*Math.random()),bt[At++]=St>>>8,bt[At++]=255&St;At=0,tt()}it.prototype.nextBytes=nt,at.prototype.init=ot,at.prototype.next=st;var Tt=256;t=e.exports={BigInteger:r,SecureRandom:it}}).call(this)},function(e,t,r){(function(t){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function a(e){return Object.prototype.toString.call(e)}function o(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(C.isFunction(e)){if(S)return e.name;var t=e.toString(),r=t.match(w);return r&&r[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(S||!C.isFunction(e))return C.inspect(e);var t=s(e),r=t?": "+t:"";return"[Function"+r+"]"}function l(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128)}function f(e,t,r,n,i){throw new B.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function h(e,t){e||f(e,!0,t,"==",B.ok)}function p(e,t,r,s){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(C.isDate(e)&&C.isDate(t))return e.getTime()===t.getTime();if(C.isRegExp(e)&&C.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(e);return u!==-1&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),y(e,t,r,s))}return r?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function y(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(C.isPrimitive(e)||C.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),a=d(t);if(i&&!a||!i&&a)return!1;if(i)return e=A.call(e),t=A.call(t),p(e,t,r);var o,s,u=T(e),c=T(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(o=u[s],!p(e[o],t[o],r,n))return!1;return!0}function g(e,t,r){p(e,t,!0)&&f(e,t,r,"notDeepStrictEqual",g)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function m(e){var t;try{e()}catch(e){t=e}return t}function E(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=m(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&f(i,r,"Missing expected exception"+n);var a="string"==typeof n,o=!e&&C.isError(i),s=!e&&i&&!r;if((o&&a&&v(i,r)||s)&&f(i,r,"Got unwanted exception"+n),e&&i&&r&&!v(i,r)||!e&&i)throw i}var C=r(89),b=Object.prototype.hasOwnProperty,A=Array.prototype.slice,S=function(){return"foo"===function(){}.name}(),B=e.exports=h,w=/\s*function\s+([^\(\s]*)\s*/;B.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=s(t),a=n.indexOf("\n"+i);if(a>=0){var o=n.indexOf("\n",a+1);n=n.substring(o+1)}this.stack=n}}},C.inherits(B.AssertionError,Error),B.fail=f,B.ok=h,B.equal=function(e,t,r){e!=t&&f(e,t,r,"==",B.equal)},B.notEqual=function(e,t,r){e==t&&f(e,t,r,"!=",B.notEqual)},B.deepEqual=function(e,t,r){p(e,t,!1)||f(e,t,r,"deepEqual",B.deepEqual)},B.deepStrictEqual=function(e,t,r){p(e,t,!0)||f(e,t,r,"deepStrictEqual",B.deepStrictEqual)},B.notDeepEqual=function(e,t,r){p(e,t,!1)&&f(e,t,r,"notDeepEqual",B.notDeepEqual)},B.notDeepStrictEqual=g,B.strictEqual=function(e,t,r){e!==t&&f(e,t,r,"===",B.strictEqual)},B.notStrictEqual=function(e,t,r){e===t&&f(e,t,r,"!==",B.notStrictEqual)},B.throws=function(e,t,r){E(!0,e,t,r)},B.doesNotThrow=function(e,t,r){E(!1,e,t,r)},B.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var r in e)b.call(e,r)&&t.push(r);return t}}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return i(e.split(/\s/).join(""),16)}const i=r(136);e.exports={1024:{N_length_bits:1024,N:n(" EEAF0AB9 ADB38DD6 9C33F80A FA8FC5E8 60726187 75FF3C0B 9EA2314C9C256576 D674DF74 96EA81D3 383B4813 D692C6E0 E0D5D8E2 50B98BE48E495C1D 6089DAD1 5DC7D7B4 6154D6B6 CE8EF4AD 69B15D49 82559B297BCF1885 C529F566 660E57EC 68EDBC3C 05726CC0 2FD4CBF4 976EAA9AFD5138FE 8376435B 9FC61D2F C0EB06E3"),g:n("02"),hash:"sha1"},1536:{N_length_bits:1536,N:n(" 9DEF3CAF B939277A B1F12A86 17A47BBB DBA51DF4 99AC4C80 BEEEA9614B19CC4D 5F4F5F55 6E27CBDE 51C6A94B E4607A29 1558903B A0D0F84380B655BB 9A22E8DC DF028A7C EC67F0D0 8134B1C8 B9798914 9B609E0BE3BAB63D 47548381 DBC5B1FC 764E3F4B 53DD9DA1 158BFD3E 2B9C8CF56EDF0195 39349627 DB2FD53D 24B7C486 65772E43 7D6C7F8C E442734AF7CCB7AE 837C264A E3A9BEB8 7F8A2FE9 B8B5292E 5A021FFF 5E91479E8CE7A28C 2442C6F3 15180F93 499A234D CF76E3FE D135F9BB"),g:n("02"),hash:"sha1"},2048:{N_length_bits:2048,N:n(" AC6BDB41 324A9A9B F166DE5E 1389582F AF72B665 1987EE07 FC3192943DB56050 A37329CB B4A099ED 8193E075 7767A13D D52312AB 4B03310DCD7F48A9 DA04FD50 E8083969 EDB767B0 CF609517 9A163AB3 661A05FBD5FAAAE8 2918A996 2F0B93B8 55F97993 EC975EEA A80D740A DBF4FF747359D041 D5C33EA7 1D281E44 6B14773B CA97B43A 23FB8016 76BD207A436C6481 F1D2B907 8717461A 5B9D32E6 88F87748 544523B5 24B0D57D5EA77A27 75D2ECFA 032CFBDB F52FB378 61602790 04E57AE6 AF874E7303CE5329 9CCC041C 7BC308D8 2A5698F3 A8D0C382 71AE35F8 E9DBFBB694B5C803 D89F7AE4 35DE236D 525F5475 9B65E372 FCD68EF2 0FA7111F9E4AFF73"),g:n("02"),hash:"sha256"},3072:{N_length_bits:3072,N:n(" FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E088A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE649286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 955817183995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7DB3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D2261AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200CBBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFCE0FD108E 4B82D120 A93AD2CA FFFFFFFF FFFFFFFF"),g:n("05"),hash:"sha256"},4096:{N_length_bits:4096,N:n(" FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E088A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE649286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 955817183995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7DB3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D2261AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200CBBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFCE0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B2699C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 34063199FFFFFFFF FFFFFFFF"),g:n("05"),hash:"sha256"},6244:{N_length_bits:6244,N:n(" FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E088A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE649286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 955817183995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7DB3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D2261AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200CBBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFCE0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B2699C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 3402849236C3FAB4 D27C7026 C1D4DCB2 602646DE C9751E76 3DBA37BD F8FF9406AD9E530E E5DB382F 413001AE B06A53ED 9027D831 179727B0 865A8918DA3EDBEB CF9B14ED 44CE6CBA CED4BB1B DB7F1447 E6CC254B 332051512BD7AF42 6FB8F401 378CD2BF 5983CA01 C64B92EC F032EA15 D1721D03F482D7CE 6E74FEF6 D55E702F 46980C82 B5A84031 900B1C9E 59E7C97FBEC7E8F3 23A97A7E 36CC88BE 0F1D45B7 FF585AC5 4BD407B2 2B4154AACC8F6D7E BF48E1D8 14CC5ED2 0F8037E0 A79715EE F29BE328 06A1D58BB7C5DA76 F550AA3D 8A1FBFF0 EB19CCB1 A313D55C DA56C9EC 2EF29632387FE8D7 6E3C0468 043E8F66 3F4860EE 12BF2D5B 0B7474D6 E694F91E6DCC4024 FFFFFFFF FFFFFFFF"),g:n("05"),hash:"sha256"},8192:{N_length_bits:8192,N:n(" FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E088A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE649286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 955817183995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7DB3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D2261AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200CBBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFCE0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B2699C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 3402849236C3FAB4 D27C7026 C1D4DCB2 602646DE C9751E76 3DBA37BD F8FF9406AD9E530E E5DB382F 413001AE B06A53ED 9027D831 179727B0 865A8918DA3EDBEB CF9B14ED 44CE6CBA CED4BB1B DB7F1447 E6CC254B 332051512BD7AF42 6FB8F401 378CD2BF 5983CA01 C64B92EC F032EA15 D1721D03F482D7CE 6E74FEF6 D55E702F 46980C82 B5A84031 900B1C9E 59E7C97FBEC7E8F3 23A97A7E 36CC88BE 0F1D45B7 FF585AC5 4BD407B2 2B4154AACC8F6D7E BF48E1D8 14CC5ED2 0F8037E0 A79715EE F29BE328 06A1D58BB7C5DA76 F550AA3D 8A1FBFF0 EB19CCB1 A313D55C DA56C9EC 2EF29632387FE8D7 6E3C0468 043E8F66 3F4860EE 12BF2D5B 0B7474D6 E694F91E6DBE1159 74A3926F 12FEE5E4 38777CB6 A932DF8C D8BEC4D0 73B931BA3BC832B6 8D9DD300 741FA7BF 8AFC47ED 2576F693 6BA42466 3AAB639C5AE4F568 3423B474 2BF1C978 238F16CB E39D652D E3FDB8BE FC848AD922222E04 A4037C07 13EB57A8 1A23F0C7 3473FC64 6CEA306B 4BCBC8862F8385DD FA9D4B7F A2C087E8 79683303 ED5BDD3A 062B3CF5 B3A278A66D2A13F8 3F44F82D DF310EE0 74AB6A36 4597E899 A0255DC1 64F31CC50846851D F9AB4819 5DED7EA1 B1D510BD 7EE74D73 FAF36BC3 1ECFA268359046F4 EB879F92 4009438B 481C6CD7 889A002E D5EE382B C9190DA6FC026E47 9558E447 5677E9AA 9E3050E2 765694DF C81F56E8 80B96E7160C980DD 98EDD3DF FFFFFFFF FFFFFFFF"),g:n("13"),hash:"sha256"}}},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n;return S.default.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.default.awrap(d(r,t));case 2:return n=i.sent,i.abrupt("return",E(e,n));case 4:case"end":return i.stop()}},null,this)}function a(e,t){if("RSA-OAEP-256"!==e.alg)throw new Error("Public key algorithm was not RSA-OAEP-256");if("RSA"!==e.kty)throw new Error("Public key type was not RSA");if(!e.key_ops.find(function(e){return"encrypt"===e}))throw new Error('Public key does not have "encrypt" op');var r=encodeURIComponent(t),n=v(e.n),i=v(e.e),a=R.default.rsa.setPublicKey(n,i),o=a.encrypt(r,"RSA-OAEP",{md:R.default.md.sha256.create()});return R.default.util.bytesToHex(o)}function o(e,t){var r=v(e.n),n=v(e.e),i=v(e.d),a=v(e.p),o=v(e.q),s=v(e.dp),u=v(e.dq),c=v(e.qi),l=R.default.rsa.setPrivateKey(r,n,i,a,o,s,u,c),f=R.default.util.hexToBytes(t),h=l.decrypt(f,"RSA-OAEP",{md:R.default.md.sha256.create()});return decodeURIComponent(h)}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="string"==typeof e?e:m(e.k),i=R.default.util.hexToBytes(n),a=R.default.random.getBytesSync(12),o=R.default.cipher.createCipher("AES-GCM",i),s=encodeURIComponent(t);return o.start({additionalData:r,iv:a,tagLength:128}),o.update(R.default.util.createBuffer(s)),o.finish(),{iv:R.default.util.bytesToHex(a),t:R.default.util.bytesToHex(o.mode.tag),d:R.default.util.bytesToHex(o.output),ad:R.default.util.bytesToHex(r)}}function u(e,t){var r="string"==typeof e?e:m(e.k),n=R.default.util.hexToBytes(r),i=R.default.cipher.createDecipher("AES-GCM",n);if(i.start({iv:R.default.util.hexToBytes(t.iv),tagLength:4*t.t.length,tag:R.default.util.hexToBytes(t.t),additionalData:R.default.util.hexToBytes(t.ad)}),i.update(R.default.util.createBuffer(R.default.util.hexToBytes(t.d))),i.finish())return decodeURIComponent(i.output.toString());throw new Error("Failed to decrypt data")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return R.default.util.bytesToHex(R.default.random.getBytesSync(e))}function l(){return"act_"+c(N)}function f(){return new b.default(function(e,t){k.default.genKey(function(r,n){r?t(r):e(n.toString("hex"))})})}function h(){var e,t,r,n;return S.default.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=window.crypto,t=e?e.subtle||e.webkitSubtle:null,!t){i.next=10;break}return console.log("-- Using Native AES Key Generation --"),i.next=6,S.default.awrap(t.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]));case 6:return r=i.sent,i.abrupt("return",t.exportKey("jwk",r));case 10:return console.log("-- Using Falback Forge AES Key Generation --"),n=R.default.util.bytesToHex(R.default.random.getBytesSync(32)),i.abrupt("return",{kty:"oct",alg:"A256GCM",ext:!0,key_ops:["encrypt","decrypt"],k:g(n)});case 13:case"end":return i.stop()}},null,this)}function p(){var e,t,r,n,i;return S.default.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=window.crypto&&window.crypto.subtle,!e){a.next=15;break}return console.log("-- Using Native RSA Generation --"),a.next=5,S.default.awrap(e.generateKey({name:"RSA-OAEP",publicExponent:new Uint8Array([1,0,1]),modulusLength:2048,hash:"SHA-256"},!0,["encrypt","decrypt"]));case 5:return t=a.sent,a.next=8,S.default.awrap(e.exportKey("jwk",t.publicKey));case 8:return a.t0=a.sent,a.next=11,S.default.awrap(e.exportKey("jwk",t.privateKey));case 11:return a.t1=a.sent,a.abrupt("return",{publicKey:a.t0,privateKey:a.t1});case 15:return console.log("-- Using Forge RSA Generation --"),r=R.default.pki.rsa.generateKeyPair({bits:2048,e:65537}),n={alg:"RSA-OAEP-256",kty:"RSA",key_ops:["decrypt"],ext:!0,d:y(r.privateKey.d),dp:y(r.privateKey.dP),dq:y(r.privateKey.dQ),e:y(r.privateKey.e),n:y(r.privateKey.n),p:y(r.privateKey.p),q:y(r.privateKey.q),qi:y(r.privateKey.qInv)},i={alg:"RSA-OAEP-256",kty:"RSA",key_ops:["encrypt"],e:y(r.publicKey.e),n:y(r.publicKey.n)},a.abrupt("return",{privateKey:n,publicKey:i});case 20:case"end":return a.stop()}},null,this)}function d(e,t){return new b.default(function(r){var n=new w.default("sha256",e,t);n.derive("",N,function(e){return r(e.toString("hex"))})})}function y(e){return g(e.toString(16))}function g(e){var t=R.default.util.hexToBytes(e);return btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v(e){return new R.default.jsbn.BigInteger(m(e),16)}function m(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");return R.default.util.bytesToHex(atob(t))}function E(t,r){var n,i,a,o;return S.default.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(!window.crypto||!window.crypto.subtle){s.next=12;break}return console.log("-- Using native PBKDF2 --"),s.next=4,S.default.awrap(window.crypto.subtle.importKey("raw",e.from(t,"utf8"),{name:"PBKDF2"},!0,["deriveBits"]));case 4:return n=s.sent,i={name:"PBKDF2",salt:new e(r,"hex"),iterations:L,hash:"SHA-256"},s.next=8,S.default.awrap(window.crypto.subtle.deriveBits(i,n,8*N));case 8:return a=s.sent,s.abrupt("return",new e(a).toString("hex"));case 12:return console.log("-- Using SJCL PBKDF2 --"),o=I.default.misc.pbkdf2(t,I.default.codec.hex.toBits(r),L,8*N,I.default.hash.sha1),s.abrupt("return",I.default.codec.hex.fromBits(o));case 15:case"end":return s.stop()}},null,this)}Object.defineProperty(t,"__esModule",{value:!0});var C=r(43),b=n(C),A=r(3),S=n(A);t.deriveKey=i,t.encryptRSAWithJWK=a,t.decryptRSAWithJWK=o,t.encryptAES=s,t.decryptAES=u,t.getRandomHex=c,t.generateAccountId=l,t.srpGenKey=f,t.generateAES256Key=h,t.generateKeyPairJWK=p;var B=r(143),w=n(B),T=r(145),I=n(T),_=r(80),k=n(_),D=r(146),R=n(D),N=32,L=1e5;window.b64urltohex=m,window.forge=R.default}).call(t,r(74).Buffer)},function(e,t,r){e.exports=r(144)},function(e,t,r){(function(t,n){function i(e){var r=new t(e);return r.fill(0),r.toString()}function a(e,t,r){this.hashAlg=e;var n=o.createHash(this.hashAlg);this.hashLength=n.digest().length,this.salt=t||i(this.hashLength),this.ikm=r;var a=o.createHmac(this.hashAlg,this.salt);a.update(this.ikm),this.prk=a.digest()}var o=r(82);a.prototype={derive:function(e,r,i){var a,s=new t(0),u=[],c=Math.ceil(r/this.hashLength);e=new t(e);for(var l=0;l<c;l++){var f=o.createHmac(this.hashAlg,this.prk);f.update(s),f.update(e),f.update(new t([l+1])),s=f.digest(),u.push(s)}a=t.concat(u,r),n.nextTick(function(){i(a)})}},e.exports=a}).call(t,r(74).Buffer,r(5))},function(e,t,r){function n(e,t,r){if(4!==t.length)throw new h.exception.invalid("invalid aes block size");var n=e.b[r],i=t[0]^n[0],a=t[r?3:1]^n[1],o=t[2]^n[2];t=t[r?1:3]^n[3];var s,u,c,l,f=n.length/4-2,p=4,d=[0,0,0,0];s=e.s[r],e=s[0];var y=s[1],g=s[2],v=s[3],m=s[4];for(l=0;l<f;l++)s=e[i>>>24]^y[a>>16&255]^g[o>>8&255]^v[255&t]^n[p],u=e[a>>>24]^y[o>>16&255]^g[t>>8&255]^v[255&i]^n[p+1],c=e[o>>>24]^y[t>>16&255]^g[i>>8&255]^v[255&a]^n[p+2],t=e[t>>>24]^y[i>>16&255]^g[a>>8&255]^v[255&o]^n[p+3],p+=4,i=s,a=u,o=c;for(l=0;4>l;l++)d[r?3&-l:l]=m[i>>>24]<<24^m[a>>16&255]<<16^m[o>>8&255]<<8^m[255&t]^n[p++],s=i,i=a,a=o,o=t,t=s;return d}function i(e,t){var r,n,i,a=e.F,o=e.b,s=a[0],u=a[1],c=a[2],l=a[3],f=a[4],h=a[5],p=a[6],d=a[7];for(r=0;64>r;r++)16>r?n=t[r]:(n=t[r+1&15],i=t[r+14&15],n=t[15&r]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+t[15&r]+t[r+9&15]|0),n=n+d+(f>>>6^f>>>11^f>>>25^f<<26^f<<21^f<<7)+(p^f&(h^p))+o[r],d=p,p=h,h=f,f=l+n|0,l=c,c=u,u=s,s=n+(u&c^l&(u^c))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;a[0]=a[0]+s|0,a[1]=a[1]+u|0,a[2]=a[2]+c|0,a[3]=a[3]+l|0,a[4]=a[4]+f|0,a[5]=a[5]+h|0,a[6]=a[6]+p|0,a[7]=a[7]+d|0}function a(e,t){var r,n=h.random.K[e],i=[];for(r in n)n.hasOwnProperty(r)&&i.push(n[r]);for(r=0;r<i.length;r++)i[r](t)}function o(e,t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?e.addEntropy(window.performance.now(),t,"loadtime"):e.addEntropy((new Date).valueOf(),t,"loadtime")}function s(e){e.b=u(e).concat(u(e)),e.L=new h.cipher.aes(e.b)}function u(e){for(var t=0;4>t&&(e.h[t]=e.h[t]+1|0,!e.h[t]);t++);return e.L.encrypt(e.h)}function c(e,t){return function(){t.apply(e,arguments)}}var l,f,h={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};h.cipher.aes=function(e){this.s[0][0][0]||this.O();var t,r,n,i,a=this.s[0][4],o=this.s[1];t=e.length;var s=1;if(4!==t&&6!==t&&8!==t)throw new h.exception.invalid("invalid aes key size");for(this.b=[n=e.slice(0),i=[]],e=t;e<4*t+28;e++)r=n[e-1],(0===e%t||8===t&&4===e%t)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],0===e%t&&(r=r<<8^r>>>24^s<<24,s=s<<1^283*(s>>7))),n[e]=n[e-t]^r;for(t=0;e;t++,e--)r=n[3&t?e:e-4],i[t]=4>=e||4>t?r:o[0][a[r>>>24]]^o[1][a[r>>16&255]]^o[2][a[r>>8&255]]^o[3][a[255&r]]},h.cipher.aes.prototype={encrypt:function(e){return n(this,e,0)},decrypt:function(e){return n(this,e,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var e,t,r,n,i,a,o,s=this.s[0],u=this.s[1],c=s[4],l=u[4],f=[],h=[];for(e=0;256>e;e++)h[(f[e]=e<<1^283*(e>>7))^e]=e;for(t=r=0;!c[t];t^=n||1,r=h[r]||1)for(a=r^r<<1^r<<2^r<<3^r<<4,a=a>>8^255&a^99,c[t]=a,l[a]=t,i=f[e=f[n=f[t]]],o=16843009*i^65537*e^257*n^16843008*t,i=257*f[a]^16843008*a,e=0;4>e;e++)s[e][t]=i=i<<24^i>>>8,u[e][a]=o=o<<24^o>>>8;for(e=0;5>e;e++)s[e]=s[e].slice(0),u[e]=u[e].slice(0)}},h.bitArray={bitSlice:function(e,t,r){return e=h.bitArray.$(e.slice(t/32),32-(31&t)).slice(1),void 0===r?e:h.bitArray.clamp(e,r-t)},extract:function(e,t,r){var n=Math.floor(-t-r&31);return((t+r-1^t)&-32?e[t/32|0]<<32-n^e[t/32+1|0]>>>n:e[t/32|0]>>>n)&(1<<r)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var r=e[e.length-1],n=h.bitArray.getPartial(r);return 32===n?e.concat(t):h.bitArray.$(t,n,0|r,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+h.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var r=e.length;return t&=31,0<r&&t&&(e[r-1]=h.bitArray.partial(t,e[r-1]&2147483648>>t-1,1)),e},partial:function(e,t,r){return 32===e?t:(r?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(h.bitArray.bitLength(e)!==h.bitArray.bitLength(t))return!1;var r,n=0;for(r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},$:function(e,t,r,n){var i;for(i=0,void 0===n&&(n=[]);32<=t;t-=32)n.push(r),r=0;if(0===t)return n.concat(e);for(i=0;i<e.length;i++)n.push(r|e[i]>>>t),r=e[i]<<32-t;return i=e.length?e[e.length-1]:0,e=h.bitArray.getPartial(i),n.push(h.bitArray.partial(t+e&31,32<t+e?r:n.pop(),1)),n},i:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,r;for(t=0;t<e.length;++t)r=e[t],e[t]=r>>>24|r>>>8&65280|(65280&r)<<8|r<<24;return e}},h.codec.utf8String={fromBits:function(e){var t,r,n="",i=h.bitArray.bitLength(e);for(t=0;t<i/8;t++)0===(3&t)&&(r=e[t/4]),n+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(n))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,r=[],n=0;for(t=0;t<e.length;t++)n=n<<8|e.charCodeAt(t),3===(3&t)&&(r.push(n),n=0);return 3&t&&r.push(h.bitArray.partial(8*(3&t),n)),r}},h.codec.hex={fromBits:function(e){var t,r="";for(t=0;t<e.length;t++)r+=((0|e[t])+0xf00000000000).toString(16).substr(4);return r.substr(0,h.bitArray.bitLength(e)/4)},toBits:function(e){var t,r,n=[];for(e=e.replace(/\s|0x/g,""),r=e.length,e+="00000000",t=0;t<e.length;t+=8)n.push(0^parseInt(e.substr(t,8),16));return h.bitArray.clamp(n,4*r)}},h.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(e,t,r){var n=h.codec.base32.BASE,i=h.codec.base32.REMAINING,a="",o=0,s=h.codec.base32.B,u=0,c=h.bitArray.bitLength(e);for(r&&(s=h.codec.base32.X),r=0;a.length*n<c;)a+=s.charAt((u^e[r]>>>o)>>>i),o<n?(u=e[r]<<n-o,o+=i,r++):(u<<=n,o-=n);for(;7&a.length&&!t;)a+="=";return a},toBits:function(e,t){e=e.replace(/\s|=/g,"").toUpperCase();var r,n,i=h.codec.base32.BITS,a=h.codec.base32.BASE,o=h.codec.base32.REMAINING,s=[],u=0,c=h.codec.base32.B,l=0,f="base32";for(t&&(c=h.codec.base32.X,f="base32hex"),r=0;r<e.length;r++){if(n=c.indexOf(e.charAt(r)),0>n){if(!t)try{return h.codec.base32hex.toBits(e)}catch(e){}throw new h.exception.invalid("this isn't "+f+"!")}u>o?(u-=o,s.push(l^n>>>u),l=n<<i-u):(u+=a,l^=n<<i-u)}return 56&u&&s.push(h.bitArray.partial(56&u,l,1)),s}},h.codec.base32hex={fromBits:function(e,t){return h.codec.base32.fromBits(e,t,1)},toBits:function(e){return h.codec.base32.toBits(e,1)}},h.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,r){var n="",i=0,a=h.codec.base64.B,o=0,s=h.bitArray.bitLength(e);for(r&&(a=a.substr(0,62)+"-_"),r=0;6*n.length<s;)n+=a.charAt((o^e[r]>>>i)>>>26),6>i?(o=e[r]<<6-i,i+=26,r++):(o<<=6,i-=6);for(;3&n.length&&!t;)n+="=";return n},toBits:function(e,t){e=e.replace(/\s|=/g,"");var r,n,i=[],a=0,o=h.codec.base64.B,s=0;for(t&&(o=o.substr(0,62)+"-_"),r=0;r<e.length;r++){if(n=o.indexOf(e.charAt(r)),0>n)throw new h.exception.invalid("this isn't base64!");26<a?(a-=26,i.push(s^n>>>a),s=n<<32-a):(a+=6,s^=n<<32-a)}return 56&a&&i.push(h.bitArray.partial(56&a,s,1)),i}},h.codec.base64url={fromBits:function(e){return h.codec.base64.fromBits(e,1,1)},toBits:function(e){return h.codec.base64.toBits(e,1)}},h.hash.sha256=function(e){this.b[0]||this.O(),e?(this.F=e.F.slice(0),this.A=e.A.slice(0),this.l=e.l):this.reset()},h.hash.sha256.hash=function(e){return(new h.hash.sha256).update(e).finalize()},h.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(e){"string"==typeof e&&(e=h.codec.utf8String.toBits(e));var t,r=this.A=h.bitArray.concat(this.A,e);if(t=this.l,e=this.l=t+h.bitArray.bitLength(e),9007199254740991<e)throw new h.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){var n=new Uint32Array(r),a=0;for(t=512+t-(512+t&511);t<=e;t+=512)i(this,n.subarray(16*a,16*(a+1))),a+=1;r.splice(0,16*a)}else for(t=512+t-(512+t&511);t<=e;t+=512)i(this,r.splice(0,16));return this},finalize:function(){var e,t=this.A,r=this.F,t=h.bitArray.concat(t,[h.bitArray.partial(1,1)]);for(e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.l/4294967296)),t.push(0|this.l);t.length;)i(this,t.splice(0,16));return this.reset(),r},Y:[],b:[],O:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t,r,n=0,i=2;64>n;i++){for(r=!0,t=2;t*t<=i;t++)if(0===i%t){r=!1;break}r&&(8>n&&(this.Y[n]=e(Math.pow(i,.5))),this.b[n]=e(Math.pow(i,1/3)),n++)}}},h.mode.ccm={name:"ccm",G:[],listenProgress:function(e){h.mode.ccm.G.push(e)},unListenProgress:function(e){e=h.mode.ccm.G.indexOf(e),-1<e&&h.mode.ccm.G.splice(e,1)},fa:function(e){var t,r=h.mode.ccm.G.slice();for(t=0;t<r.length;t+=1)r[t](e)},encrypt:function(e,t,r,n,i){var a,o=t.slice(0),s=h.bitArray,u=s.bitLength(r)/8,c=s.bitLength(o)/8;if(i=i||64,n=n||[],7>u)throw new h.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&c>>>8*a;a++);return a<15-u&&(a=15-u),r=s.clamp(r,8*(15-a)),t=h.mode.ccm.V(e,t,r,n,i,a),o=h.mode.ccm.C(e,o,r,t,i,a),s.concat(o.data,o.tag)},decrypt:function(e,t,r,n,i){i=i||64,n=n||[];var a=h.bitArray,o=a.bitLength(r)/8,s=a.bitLength(t),u=a.clamp(t,s-i),c=a.bitSlice(t,s-i),s=(s-i)/8;if(7>o)throw new h.exception.invalid("ccm: iv must be at least 7 bytes");for(t=2;4>t&&s>>>8*t;t++);if(t<15-o&&(t=15-o),r=a.clamp(r,8*(15-t)),u=h.mode.ccm.C(e,u,r,c,i,t),e=h.mode.ccm.V(e,u.data,r,n,i,t),!a.equal(u.tag,e))throw new h.exception.corrupt("ccm: tag doesn't match");return u.data},na:function(e,t,r,n,i,a){var o=[],s=h.bitArray,u=s.i;if(n=[s.partial(8,(t.length?64:0)|n-2<<2|a-1)],n=s.concat(n,r),n[3]|=i,n=e.encrypt(n),t.length)for(r=s.bitLength(t)/8,65279>=r?o=[s.partial(16,r)]:4294967295>=r&&(o=s.concat([s.partial(16,65534)],[r])),o=s.concat(o,t),t=0;t<o.length;t+=4)n=e.encrypt(u(n,o.slice(t,t+4).concat([0,0,0])));return n},V:function(e,t,r,n,i,a){var o=h.bitArray,s=o.i;if(i/=8,i%2||4>i||16<i)throw new h.exception.invalid("ccm: invalid tag length");if(4294967295<n.length||4294967295<t.length)throw new h.exception.bug("ccm: can't deal with 4GiB or more data");for(r=h.mode.ccm.na(e,n,r,i,o.bitLength(t)/8,a),n=0;n<t.length;n+=4)r=e.encrypt(s(r,t.slice(n,n+4).concat([0,0,0])));return o.clamp(r,8*i)},C:function(e,t,r,n,i,a){var o,s=h.bitArray;o=s.i;var u=t.length,c=s.bitLength(t),l=u/50,f=l;if(r=s.concat([s.partial(8,a-1)],r).concat([0,0,0]).slice(0,4),n=s.bitSlice(o(n,e.encrypt(r)),0,i),!u)return{tag:n,data:[]};for(o=0;o<u;o+=4)o>l&&(h.mode.ccm.fa(o/u),l+=f),r[3]++,i=e.encrypt(r),t[o]^=i[0],t[o+1]^=i[1],t[o+2]^=i[2],t[o+3]^=i[3];return{tag:n,data:s.clamp(t,c)}}},h.mode.ocb2={name:"ocb2",encrypt:function(e,t,r,n,i,a){if(128!==h.bitArray.bitLength(r))throw new h.exception.invalid("ocb iv must be 128 bits");var o,s=h.mode.ocb2.S,u=h.bitArray,c=u.i,l=[0,0,0,0];r=s(e.encrypt(r));var f,p=[];for(n=n||[],i=i||64,o=0;o+4<t.length;o+=4)f=t.slice(o,o+4),l=c(l,f),p=p.concat(c(r,e.encrypt(c(r,f)))),r=s(r);return f=t.slice(o),t=u.bitLength(f),o=e.encrypt(c(r,[0,0,0,t])),f=u.clamp(c(f.concat([0,0,0]),o),t),l=c(l,c(f.concat([0,0,0]),o)),l=e.encrypt(c(l,c(r,s(r)))),n.length&&(l=c(l,a?n:h.mode.ocb2.pmac(e,n))),p.concat(u.concat(f,u.clamp(l,i)))},decrypt:function(e,t,r,n,i,a){if(128!==h.bitArray.bitLength(r))throw new h.exception.invalid("ocb iv must be 128 bits");i=i||64;var o,s,u=h.mode.ocb2.S,c=h.bitArray,l=c.i,f=[0,0,0,0],p=u(e.encrypt(r)),d=h.bitArray.bitLength(t)-i,y=[];for(n=n||[],r=0;r+4<d/32;r+=4)o=l(p,e.decrypt(l(p,t.slice(r,r+4)))),f=l(f,o),y=y.concat(o),p=u(p);if(s=d-32*r,o=e.encrypt(l(p,[0,0,0,s])),o=l(o,c.clamp(t.slice(r),s).concat([0,0,0])),f=l(f,o),f=e.encrypt(l(f,l(p,u(p)))),n.length&&(f=l(f,a?n:h.mode.ocb2.pmac(e,n))),!c.equal(c.clamp(f,i),c.bitSlice(t,d)))throw new h.exception.corrupt("ocb: tag doesn't match");return y.concat(c.clamp(o,s))},pmac:function(e,t){var r,n=h.mode.ocb2.S,i=h.bitArray,a=i.i,o=[0,0,0,0],s=e.encrypt([0,0,0,0]),s=a(s,n(n(s)));for(r=0;r+4<t.length;r+=4)s=n(s),o=a(o,e.encrypt(a(s,t.slice(r,r+4))));return r=t.slice(r),128>i.bitLength(r)&&(s=a(s,n(s)),r=i.concat(r,[-2147483648,0,0,0])),o=a(o,r),e.encrypt(a(n(a(s,n(s))),o))},S:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},h.mode.gcm={name:"gcm",encrypt:function(e,t,r,n,i){var a=t.slice(0);return t=h.bitArray,n=n||[],e=h.mode.gcm.C(!0,e,a,n,r,i||128),t.concat(e.data,e.tag)},decrypt:function(e,t,r,n,i){var a=t.slice(0),o=h.bitArray,s=o.bitLength(a);if(i=i||128,n=n||[],i<=s?(t=o.bitSlice(a,s-i),a=o.bitSlice(a,0,s-i)):(t=a,a=[]),e=h.mode.gcm.C(!1,e,a,n,r,i),!o.equal(e.tag,t))throw new h.exception.corrupt("gcm: tag doesn't match");return e.data},ka:function(e,t){var r,n,i,a,o,s=h.bitArray.i;for(i=[0,0,0,0],a=t.slice(0),r=0;128>r;r++){for((n=0!==(e[Math.floor(r/32)]&1<<31-r%32))&&(i=s(i,a)),o=0!==(1&a[3]),n=3;0<n;n--)a[n]=a[n]>>>1|(1&a[n-1])<<31;a[0]>>>=1,o&&(a[0]^=-520093696)}return i},j:function(e,t,r){var n,i=r.length;for(t=t.slice(0),n=0;n<i;n+=4)t[0]^=4294967295&r[n],t[1]^=4294967295&r[n+1],t[2]^=4294967295&r[n+2],t[3]^=4294967295&r[n+3],t=h.mode.gcm.ka(t,e);return t},C:function(e,t,r,n,i,a){var o,s,u,c,l,f,p,d,y=h.bitArray;for(f=r.length,p=y.bitLength(r),d=y.bitLength(n),s=y.bitLength(i),o=t.encrypt([0,0,0,0]),96===s?(i=i.slice(0),i=y.concat(i,[1])):(i=h.mode.gcm.j(o,[0,0,0,0],i),i=h.mode.gcm.j(o,i,[0,0,Math.floor(s/4294967296),4294967295&s])),s=h.mode.gcm.j(o,[0,0,0,0],n),l=i.slice(0),n=s.slice(0),e||(n=h.mode.gcm.j(o,s,r)),c=0;c<f;c+=4)l[3]++,u=t.encrypt(l),
r[c]^=u[0],r[c+1]^=u[1],r[c+2]^=u[2],r[c+3]^=u[3];return r=y.clamp(r,p),e&&(n=h.mode.gcm.j(o,s,r)),e=[Math.floor(d/4294967296),4294967295&d,Math.floor(p/4294967296),4294967295&p],n=h.mode.gcm.j(o,n,e),u=t.encrypt(i),n[0]^=u[0],n[1]^=u[1],n[2]^=u[2],n[3]^=u[3],{tag:y.bitSlice(n,0,a),data:r}}},h.misc.hmac=function(e,t){this.W=t=t||h.hash.sha256;var r,n=[[],[]],i=t.prototype.blockSize/32;for(this.w=[new t,new t],e.length>i&&(e=t.hash(e)),r=0;r<i;r++)n[0][r]=909522486^e[r],n[1][r]=1549556828^e[r];this.w[0].update(n[0]),this.w[1].update(n[1]),this.R=new t(this.w[0])},h.misc.hmac.prototype.encrypt=h.misc.hmac.prototype.mac=function(e){if(this.aa)throw new h.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},h.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1},h.misc.hmac.prototype.update=function(e){this.aa=!0,this.R.update(e)},h.misc.hmac.prototype.digest=function(){var e=this.R.finalize(),e=new this.W(this.w[1]).update(e).finalize();return this.reset(),e},h.misc.pbkdf2=function(e,t,r,n,i){if(r=r||1e4,0>n||0>r)throw new h.exception.invalid("invalid params to pbkdf2");"string"==typeof e&&(e=h.codec.utf8String.toBits(e)),"string"==typeof t&&(t=h.codec.utf8String.toBits(t)),i=i||h.misc.hmac,e=new i(e);var a,o,s,u,c=[],l=h.bitArray;for(u=1;32*c.length<(n||1);u++){for(i=a=e.encrypt(l.concat(t,[u])),o=1;o<r;o++)for(a=e.encrypt(a),s=0;s<a.length;s++)i[s]^=a[s];c=c.concat(i)}return n&&(c=l.clamp(c,n)),c},h.prng=function(e){this.c=[new h.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=e,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},h.prng.prototype={randomWords:function(e,t){var r,n=[];r=this.isReady(t);var i;if(r===this.u)throw new h.exception.notReady("generator isn't seeded");if(r&this.J){r=!(r&this.I),i=[];var a,o=0;for(this.Z=i[0]=(new Date).valueOf()+this.da,a=0;16>a;a++)i.push(4294967296*Math.random()|0);for(a=0;a<this.c.length&&(i=i.concat(this.c[a].finalize()),o+=this.m[a],this.m[a]=0,r||!(this.P&1<<a));a++);for(this.P>=1<<this.c.length&&(this.c.push(new h.hash.sha256),this.m.push(0)),this.f-=o,o>this.o&&(this.o=o),this.P++,this.b=h.hash.sha256.hash(this.b.concat(i)),this.L=new h.cipher.aes(this.b),r=0;4>r&&(this.h[r]=this.h[r]+1|0,!this.h[r]);r++);}for(r=0;r<e;r+=4)0===(r+1)%this.ca&&s(this),i=u(this),n.push(i[0],i[1],i[2],i[3]);return s(this),n.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw new h.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=e},addEntropy:function(e,t,r){r=r||"user";var n,i,o=(new Date).valueOf(),s=this.H[r],u=this.isReady(),c=0;switch(n=this.U[r],void 0===n&&(n=this.U[r]=this.ha++),void 0===s&&(s=this.H[r]=0),this.H[r]=(this.H[r]+1)%this.c.length,typeof e){case"number":void 0===t&&(t=1),this.c[s].update([n,this.N++,1,t,o,1,0|e]);break;case"object":if(r=Object.prototype.toString.call(e),"[object Uint32Array]"===r){for(i=[],r=0;r<e.length;r++)i.push(e[r]);e=i}else for("[object Array]"!==r&&(c=1),r=0;r<e.length&&!c;r++)"number"!=typeof e[r]&&(c=1);if(!c){if(void 0===t)for(r=t=0;r<e.length;r++)for(i=e[r];0<i;)t++,i>>>=1;this.c[s].update([n,this.N++,2,t,o,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this.c[s].update([n,this.N++,3,t,o,e.length]),this.c[s].update(e);break;default:c=1}if(c)throw new h.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[s]+=t,this.f+=t,u===this.u&&(this.isReady()!==this.u&&a("seeded",Math.max(this.o,this.f)),a("progress",this.getProgress()))},isReady:function(e){return e=this.T[void 0!==e?e:this.M],this.o&&this.o>=e?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=e?this.J|this.u:this.u},getProgress:function(e){return e=this.T[e?e:this.M],this.o>=e?1:this.f>e?1:this.f/e},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:c(this,this.ma),mouseCollector:c(this,this.oa),keyboardCollector:c(this,this.la),accelerometerCollector:c(this,this.ea),touchCollector:c(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent)throw new h.exception.bug("can't attach event");document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)}this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(e,t){this.K[e][this.ga++]=t},removeEventListener:function(e,t){var r,n,i=this.K[e],a=[];for(n in i)i.hasOwnProperty(n)&&i[n]===t&&a.push(n);for(r=0;r<a.length;r++)n=a[r],delete i[n]},la:function(){o(this,1)},oa:function(e){var t,r;try{t=e.x||e.clientX||e.offsetX||0,r=e.y||e.clientY||e.offsetY||0}catch(e){r=t=0}0!=t&&0!=r&&this.addEntropy([t,r],2,"mouse"),o(this,0)},qa:function(e){e=e.touches[0]||e.changedTouches[0],this.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),o(this,0)},ma:function(){o(this,2)},ea:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&this.addEntropy(t,1,"accelerometer")}e&&this.addEntropy(e,2,"accelerometer"),o(this,0)}},h.random=new h.prng(6);e:try{var p,d,y,g;if(g="undefined"!=typeof e&&e.exports){var v;try{v=r(82)}catch(e){v=null}g=d=v}if(g&&d.randomBytes)p=d.randomBytes(128),p=new Uint32Array(new Uint8Array(p).buffer),h.random.addEntropy(p,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(y=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(y);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(y)}h.random.addEntropy(y,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}h.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(e,t,r,n){r=r||{},n=n||{};var i,a=h.json,o=a.g({iv:h.random.randomWords(4,0)},a.defaults);if(a.g(o,r),r=o.adata,"string"==typeof o.salt&&(o.salt=h.codec.base64.toBits(o.salt)),"string"==typeof o.iv&&(o.iv=h.codec.base64.toBits(o.iv)),!h.mode[o.mode]||!h.cipher[o.cipher]||"string"==typeof e&&100>=o.iter||64!==o.ts&&96!==o.ts&&128!==o.ts||128!==o.ks&&192!==o.ks&&256!==o.ks||2>o.iv.length||4<o.iv.length)throw new h.exception.invalid("json encrypt: invalid parameters");return"string"==typeof e?(i=h.misc.cachedPbkdf2(e,o),e=i.key.slice(0,o.ks/32),o.salt=i.salt):h.ecc&&e instanceof h.ecc.elGamal.publicKey&&(i=e.kem(),o.kemtag=i.tag,e=i.key.slice(0,o.ks/32)),"string"==typeof t&&(t=h.codec.utf8String.toBits(t)),"string"==typeof r&&(o.adata=r=h.codec.utf8String.toBits(r)),i=new h.cipher[o.cipher](e),a.g(n,o),n.key=e,o.ct="ccm"===o.mode&&h.arrayBuffer&&h.arrayBuffer.ccm&&t instanceof ArrayBuffer?h.arrayBuffer.ccm.encrypt(i,t,o.iv,r,o.ts):h.mode[o.mode].encrypt(i,t,o.iv,r,o.ts),o},encrypt:function(e,t,r,n){var i=h.json,a=i.ja.apply(i,arguments);return i.encode(a)},ia:function(e,t,r,n){r=r||{},n=n||{};var i=h.json;t=i.g(i.g(i.g({},i.defaults),t),r,!0);var a,o;if(a=t.adata,"string"==typeof t.salt&&(t.salt=h.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=h.codec.base64.toBits(t.iv)),!h.mode[t.mode]||!h.cipher[t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)throw new h.exception.invalid("json decrypt: invalid parameters");return"string"==typeof e?(o=h.misc.cachedPbkdf2(e,t),e=o.key.slice(0,t.ks/32),t.salt=o.salt):h.ecc&&e instanceof h.ecc.elGamal.secretKey&&(e=e.unkem(h.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof a&&(a=h.codec.utf8String.toBits(a)),o=new h.cipher[t.cipher](e),a="ccm"===t.mode&&h.arrayBuffer&&h.arrayBuffer.ccm&&t.ct instanceof ArrayBuffer?h.arrayBuffer.ccm.decrypt(o,t.ct,t.iv,t.tag,a,t.ts):h.mode[t.mode].decrypt(o,t.ct,t.iv,a,t.ts),i.g(n,t),n.key=e,1===r.raw?a:h.codec.utf8String.fromBits(a)},decrypt:function(e,t,r,n){var i=h.json;return i.ia(e,i.decode(t),r,n)},encode:function(e){var t,r="{",n="";for(t in e)if(e.hasOwnProperty(t)){if(!t.match(/^[a-z0-9]+$/i))throw new h.exception.invalid("json encode: invalid property name");switch(r+=n+'"'+t+'":',n=",",typeof e[t]){case"number":case"boolean":r+=e[t];break;case"string":r+='"'+escape(e[t])+'"';break;case"object":r+='"'+h.codec.base64.fromBits(e[t],0)+'"';break;default:throw new h.exception.bug("json encode: unsupported type")}}return r+"}"},decode:function(e){if(e=e.replace(/\s/g,""),!e.match(/^\{.*\}$/))throw new h.exception.invalid("json decode: this isn't json!");e=e.replace(/^\{|\}$/g,"").split(/,/);var t,r,n={};for(t=0;t<e.length;t++){if(!(r=e[t].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new h.exception.invalid("json decode: this isn't json!");null!=r[3]?n[r[2]]=parseInt(r[3],10):null!=r[4]?n[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?h.codec.base64.toBits(r[4]):unescape(r[4]):null!=r[5]&&(n[r[2]]="true"===r[5])}return n},g:function(e,t,r){if(void 0===e&&(e={}),void 0===t)return e;for(var n in t)if(t.hasOwnProperty(n)){if(r&&void 0!==e[n]&&e[n]!==t[n])throw new h.exception.invalid("required parameter overridden");e[n]=t[n]}return e},sa:function(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&e[r]!==t[r]&&(n[r]=e[r]);return n},ra:function(e,t){var r,n={};for(r=0;r<t.length;r++)void 0!==e[t[r]]&&(n[t[r]]=e[t[r]]);return n}},h.encrypt=h.json.encrypt,h.decrypt=h.json.decrypt,h.misc.pa={},h.misc.cachedPbkdf2=function(e,t){var r,n=h.misc.pa;return t=t||{},r=t.iter||1e3,n=n[e]=n[e]||{},r=n[r]=n[r]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):h.random.randomWords(2,0)},n=void 0===t.salt?r.firstSalt:t.salt,r[n]=r[n]||h.misc.pbkdf2(e,n,t.iter),{key:r[n].slice(0),salt:n.slice(0)}},"undefined"!=typeof e&&e.exports&&(e.exports=h),l=[],f=function(){return h}.apply(t,l),!(void 0!==f&&(e.exports=f))},function(e,t,r){var n,i,a;(function(e,r,o,s){!function(e,r){i=[],n=r,a="function"==typeof n?n.apply(t,i):n,!(void 0!==a&&(o.exports=a))}(this,function(){var t,n,i;return function(e){function r(e,t){return C.call(e,t)}function a(e,t){var r,n,i,a,o,s,u,c,l,f,h,p=t&&t.split("/"),d=m.map,y=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),o=e.length-1,m.nodeIdCompat&&A.test(e[o])&&(e[o]=e[o].replace(A,"")),e=p.concat(e),l=0;l<e.length;l+=1)if(h=e[l],"."===h)e.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||y)&&d){for(r=e.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if(i=d[p.slice(0,f).join("/")],i&&(i=i[n])){a=i,s=l;break}if(a)break;!u&&y&&y[n]&&(u=y[n],c=l)}!a&&u&&(a=u,s=c),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function o(t,r){return function(){return p.apply(e,b.call(arguments,0).concat([t,r]))}}function s(e){return function(t){return a(t,e)}}function u(e){return function(t){g[e]=t}}function c(t){if(r(v,t)){var n=v[t];delete v[t],E[t]=!0,h.apply(e,n)}if(!r(g,t)&&!r(E,t))throw new Error("No "+t);return g[t]}function l(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function f(e){return function(){return m&&m.config&&m.config[e]||{}}}var h,p,d,y,g={},v={},m={},E={},C=Object.prototype.hasOwnProperty,b=[].slice,A=/\.js$/;d=function(e,t){var r,n=l(e),i=n[0];return e=n[1],i&&(i=a(i,t),r=c(i)),i?e=r&&r.normalize?r.normalize(e,s(t)):a(e,t):(e=a(e,t),n=l(e),i=n[0],e=n[1],i&&(r=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:r}},y={require:function(e){return o(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:f(e)}}},h=function(t,n,i,a){var s,l,f,h,p,m,C=[],b=typeof i;if(a=a||t,"undefined"===b||"function"===b){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=d(n[p],a),l=h.f,"require"===l)C[p]=y.require(t);else if("exports"===l)C[p]=y.exports(t),m=!0;else if("module"===l)s=C[p]=y.module(t);else if(r(g,l)||r(v,l)||r(E,l))C[p]=c(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,o(a,!0),u(l),{}),C[p]=g[l]}f=i?i.apply(g[t],C):void 0,t&&(s&&s.exports!==e&&s.exports!==g[t]?g[t]=s.exports:f===e&&m||(g[t]=f))}else t&&(g[t]=i)},t=n=p=function(t,r,n,i,a){if("string"==typeof t)return y[t]?y[t](r):c(d(t,r).f);if(!t.splice){if(m=t,m.deps&&p(m.deps,m.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=i,i=a),i?h(e,t,r,n):setTimeout(function(){h(e,t,r,n)},4),p},p.config=function(e){return p(e)},t._defined=g,i=function(e,t,n){t.splice||(n=t,t=[]),!r(g,e)&&!r(v,e)&&(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),i("node_modules/almond/almond",function(){}),function(){function t(t){function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(a.isArrayBuffer(e)||a.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}function i(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=a.isArrayBuffer(e),n=a.isArrayBufferView(e);return r||n?(r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset),void 0)}var a=t.util=t.util||{};!function(){function t(e){if(e.source===window&&e.data===n){e.stopPropagation();var t=i.slice();i.length=0,t.forEach(function(e){e()})}}if("undefined"!=typeof e&&e.nextTick)return a.nextTick=e.nextTick,void("function"==typeof r?a.setImmediate=r:a.setImmediate=a.nextTick);if("function"==typeof r)return a.setImmediate=function(){return r.apply(void 0,arguments)},void(a.nextTick=function(e){return r(e)});if(a.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var n="forge.setImmediate",i=[];a.setImmediate=function(e){i.push(e),1===i.length&&window.postMessage(n,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var o=Date.now(),s=!0,u=document.createElement("div"),i=[];new MutationObserver(function(){var e=i.slice();i.length=0,e.forEach(function(e){e()})}).observe(u,{attributes:!0});var c=a.setImmediate;a.setImmediate=function(e){Date.now()-o>15?(o=Date.now(),c(e)):(i.push(e),1===i.length&&u.setAttribute("a",s=!s))}}a.nextTick=a.setImmediate}(),a.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},a.isArrayBufferView=function(e){return e&&a.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},a.ByteBuffer=n,a.ByteStringBuffer=n;var o=4096;a.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>o&&(this.data.substr(0,1),this._constructedStringLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},a.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},a.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},a.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(a.encodeUtf8(e))},a.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},a.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},a.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},a.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},a.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},a.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},a.ByteStringBuffer.prototype.putInt=function(e,t){var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)},a.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},a.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},a.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},a.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},a.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},a.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},a.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},a.ByteStringBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},a.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},a.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},a.ByteStringBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},a.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},a.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},a.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},a.ByteStringBuffer.prototype.copy=function(){var e=a.createBuffer(this.data);return e.read=this.read,e},a.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},a.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},a.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},a.ByteStringBuffer.prototype.toString=function(){return a.decodeUtf8(this.bytes())},a.DataBuffer=i,a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},a.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},a.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},a.DataBuffer.prototype.putBytes=function(e,t){if(a.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(a.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof a.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&a.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof a.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var o;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.hex.decode(e,o,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.base64.decode(e,o,this.write),this;if("utf8"===t&&(e=a.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.raw.decode(o),this;if("utf16"===t)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=a.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},a.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},a.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},a.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},a.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},a.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},a.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},a.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},a.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},a.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},a.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},a.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},a.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},a.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},a.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},a.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},a.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},a.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},a.DataBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},a.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},a.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},a.DataBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},a.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},a.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},a.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},a.DataBuffer.prototype.copy=function(){return new a.DataBuffer(this)},a.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},a.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},a.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},a.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},a.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8","binary"===e||"raw"===e)return a.binary.raw.encode(t);if("hex"===e)return a.binary.hex.encode(t);if("base64"===e)return a.binary.base64.encode(t);if("utf8"===e)return a.text.utf8.decode(t);if("utf16"===e)return a.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},a.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=a.encodeUtf8(e)),new a.ByteBuffer(e)},a.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return r},a.xorBytes=function(e,t,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+=a},a.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},a.bytesToHex=function(e){return a.createBuffer(e).toHex()},a.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];a.encode64=function(e,t){for(var r,n,i,a="",o="",u=0;u<e.length;)r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),a+=s.charAt(r>>2),a+=s.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=s.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":s.charAt(63&i)),t&&a.length>t&&(o+=a.substr(0,t)+"\r\n",a=a.substr(t));return o+=a},a.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,a="",o=0;o<e.length;)t=u[e.charCodeAt(o++)-43],r=u[e.charCodeAt(o++)-43],n=u[e.charCodeAt(o++)-43],i=u[e.charCodeAt(o++)-43],a+=String.fromCharCode(t<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(a+=String.fromCharCode((3&n)<<6|i)));return a},a.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},a.decodeUtf8=function(e){return decodeURIComponent(escape(e))},a.binary={raw:{},hex:{},base64:{}},a.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},a.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},a.binary.hex.encode=a.bytesToHex,a.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(1&e.length&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n},a.binary.base64.encode=function(e,t){for(var r,n,i,a="",o="",u=0;u<e.byteLength;)r=e[u++],n=e[u++],i=e[u++],a+=s.charAt(r>>2),a+=s.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=s.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":s.charAt(63&i)),t&&a.length>t&&(o+=a.substr(0,t)+"\r\n",a=a.substr(t));return o+=a},a.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,o,s,c=0,l=r;c<e.length;)i=u[e.charCodeAt(c++)-43],a=u[e.charCodeAt(c++)-43],o=u[e.charCodeAt(c++)-43],s=u[e.charCodeAt(c++)-43],n[l++]=i<<2|a>>4,64!==o&&(n[l++]=(15&a)<<4|o>>2,64!==s&&(n[l++]=(3&o)<<6|s));return t?l-r:n.subarray(0,l)},a.text={utf8:{},utf16:{}},a.text.utf8.encode=function(e,t,r){e=a.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},a.text.utf8.decode=function(e){return a.decodeUtf8(String.fromCharCode.apply(null,e))},a.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,o=r,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s),a+=2;return t?a-r:n},a.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},a.deflate=function(e,t,r){if(t=a.decode64(e.deflate(a.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);32&i&&(n=6),t=t.substring(n,t.length-4)}return t},a.inflate=function(e,t,r){var n=e.inflate(a.encode64(t)).rval;return null===n?null:a.decode64(n)};var c=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=a.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!=typeof n&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},l=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(a.decode64(r))),
r},f=function(e,t,r,n){var i=l(e,t);null===i&&(i={}),i[r]=n,c(e,t,i)},h=function(e,t,r){var n=l(e,t);return null!==n&&(n=r in n?n[r]:null),n},p=function(e,t,r){var n=l(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),c(e,t,n)}},d=function(e,t){c(e,t,null)},y=function(e,t,r){var n=null;"undefined"==typeof r&&(r=["web","flash"]);var i,a=!1,o=null;for(var s in r){i=r[s];try{if("flash"===i||"both"===i){if(null===t[0])throw new Error("Flash local storage not available.");n=e.apply(this,t),a="flash"===i}"web"!==i&&"both"!==i||(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(e){o=e}if(a)break}if(!a)throw o;return n};a.setItem=function(e,t,r,n,i){y(f,arguments,i)},a.getItem=function(e,t,r,n){return y(h,arguments,n)},a.removeItem=function(e,t,r,n){y(p,arguments,n)},a.clearItems=function(e,t,r){y(d,arguments,r)},a.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var g=null;a.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,a,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),a=r[n].substring(o+1)):(i=r[n],a=null),i in t||(t[i]=[]),!(i in Object.prototype)&&null!==a&&t[i].push(unescape(a))}return t};return"undefined"==typeof e?(null===g&&(g="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=g):t=r(e),t},a.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");i.length>0&&""===i[0]&&i.shift();var o=""===r?{}:a.getQueryVariables(r);return{pathString:t,queryString:r,path:i,query:o}},a.makeRequest=function(e){var t=a.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return"undefined"==typeof e?t.path:t.path[e]},getQuery:function(e,r){var n;return"undefined"==typeof e?n=t.query:(n=t.query[e],n&&"undefined"!=typeof r&&(n=n[r])),n},getQueryLast:function(e,t){var n,i=r.getQuery(e);return n=i?i[i.length-1]:t}};return r},a.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},a.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var a=t[n++];if(n==i)e[a]=r;else{var o=a in e;(!o||o&&"object"!=typeof e[a]||o&&null===e[a])&&(e[a]={}),e=e[a]}}},a.getPath=function(e,t,r){for(var n=0,i=t.length,a=!0;a&&n<i&&"object"==typeof e&&null!==e;){var o=t[n++];a=o in e,a&&(e=e[o])}return a?e:r},a.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e&&"object"==typeof e[i]&&null!==e[i]))break;e=e[i]}}},a.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},a.format=function(e){for(var t,r,n=/%./g,i=0,a=[],o=0;t=n.exec(e);){r=e.substring(o,n.lastIndex-2),r.length>0&&a.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[i++ +1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(o)),a.join("")},a.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-c).toFixed(a).slice(2):"")},a.formatSize=function(e){return e=e>=1073741824?a.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?a.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?a.formatNumber(e/1024,0)+" KiB":a.formatNumber(e,0)+" bytes"},a.bytesFromIP=function(e){return e.indexOf(".")!==-1?a.bytesFromIPv4(e):e.indexOf(":")!==-1?a.bytesFromIPv6(e):null},a.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=a.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},a.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return 0===e.length&&++t,!0});for(var r=2*(8-e.length+t),n=a.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var o=a.hexToBytes(e[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},a.bytesToIP=function(e){return 4===e.length?a.bytesToIPv4(e):16===e.length?a.bytesToIPv6(e):null},a.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},a.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var o=a.bytesToHex(e[i]+e[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=t.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},a.estimateCores=function(e,t){function r(e,s,u){if(0===s){var c=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return a.cores=Math.max(1,c),URL.revokeObjectURL(o),t(null,a.cores)}n(u,function(t,n){e.push(i(u,n)),r(e,s-1,u)})}function n(e,t){for(var r=[],n=[],i=0;i<e;++i){var a=new Worker(o);a.addEventListener("message",function(i){if(n.push(i.data),n.length===e){for(var a=0;a<e;++a)r[a].terminate();t(null,n)}}),r.push(a)}for(var i=0;i<e;++i)r[i].postMessage(i)}function i(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],a=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in a&&!e.update)return t(null,a.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return a.cores=navigator.hardwareConcurrency,t(null,a.cores);if("undefined"==typeof Worker)return a.cores=1,t(null,a.cores);if("undefined"==typeof Blob)return a.cores=2,t(null,a.cores);var o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}var a="util";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var s=!0;i=function(e,t){t(n,o)}}var u,c=function(e,r){r.exports=function(r){var n=u.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined[a])return r[a];r.defined[a]=!0;for(var i=0;i<n.length;++i)n[i](r);return r[a]}},l=i;(i=function(e,t){return u="string"==typeof e?t.slice(2):e.slice(2),s?(delete i,l.apply(null,Array.prototype.slice.call(arguments,0))):(i=l,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/util",["require","module"],function(){c.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(t,r){var n=t;if("string"==typeof n&&(n=e.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:n,key:r,decrypt:!1})},e.cipher.createDecipher=function(t,r){var n=t;if("string"==typeof n&&(n=e.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:n,key:r,decrypt:!0})},e.cipher.registerAlgorithm=function(t,r){t=t.toUpperCase(),e.cipher.algorithms[t]=r},e.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in e.cipher.algorithms?e.cipher.algorithms[t]:null};var t=e.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};t.prototype.start=function(t){t=t||{};var r={};for(var n in t)r[n]=t[n];r.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=t.output||e.util.createBuffer(),this.mode.start(r)},t.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(e){e&&("ECB"===this.mode.name||"CBC"===this.mode.name)&&(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}}var t="cipher";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/cipher",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){if("string"==typeof t&&(t=e.util.createBuffer(t)),e.util.isArray(t)&&t.length>4){var r=t;t=e.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}return e.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function r(e){e[e.length-1]=e[e.length-1]+1&4294967295}function n(e){return[e/4294967296|0,4294967295&e]}e.cipher=e.cipher||{};var i=e.cipher.modes=e.cipher.modes||{};i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);{if(!(0===this._partialBytes&&n>=this.blockSize)){var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];return this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):(t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),void(this._partialBytes=0))}for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a])}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);{if(!(0===this._partialBytes&&n>=this.blockSize)){var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];return this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):(t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),void(this._partialBytes=0))}for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a])}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;this.cipher.encrypt(this._inBlock,this._outBlock);{if(!(0===this._partialBytes&&n>=this.blockSize)){var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];return this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):(t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),void(this._partialBytes=0))}for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a]}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var i=e.util.createBuffer(t.iv);this._cipherLength=0;var a;if(a="additionalData"in t?e.util.createBuffer(t.additionalData):e.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=e.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=i.length();if(12===o)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(n(8*o)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,a=e.util.createBuffer(a),this._aDataLength=n(8*a.length());var s=a.length()%this.blockSize;for(s&&a.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},i.gcm.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===o||n){if(n){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,n){var i=e.length();if(i<this.blockSize&&!(n&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,r){var i=!0;r.decrypt&&r.overflow&&t.truncate(this.blockSize-r.overflow),this.tag=e.util.createBuffer();var a=this._aDataLength.concat(n(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),r.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>4*(7-r%8)&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),o=0;o<i;++o){var s=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*t;s[u]=1<<t-1<<c,a[o]=this.generateSubHashTable(this.multiply(s,e),t)}return a},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var o=1;o<a;++o){var s=i[a],u=i[o];i[a+o]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i}}var t="cipherModes";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/cipherModes",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r){var n=function(){return new e.aes.Algorithm(t,r)};e.cipher.registerAlgorithm(t,n)}function r(){f=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;o=new Array(256),s=new Array(256),c=new Array(4),l=new Array(4);for(var t=0;t<4;++t)c[t]=new Array(256),l[t]=new Array(256);for(var r,n,i,a,h,p,d,y=0,g=0,t=0;t<256;++t){a=g^g<<1^g<<2^g<<3^g<<4,a=a>>8^255&a^99,o[y]=a,s[a]=y,h=e[a],r=e[y],n=e[r],i=e[n],p=h<<24^a<<16^a<<8^(a^h),d=(r^n^i)<<24^(y^i)<<16^(y^n^i)<<8^(y^r^i);for(var v=0;v<4;++v)c[v][y]=p,l[v][a]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===y?y=g=1:(y=r^e[e[e[r^i]]],g^=e[e[g]])}}function n(e,t){for(var r,n=e.slice(0),i=1,a=n.length,s=a+6+1,c=h*s,f=a;f<c;++f)r=n[f-1],f%a===0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^u[i]<<24,i++):a>6&&f%a===4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[f]=n[f-a]^r;if(t){var p,d=l[0],y=l[1],g=l[2],v=l[3],m=n.slice(0);c=n.length;for(var f=0,E=c-h;f<c;f+=h,E-=h)if(0===f||f===c-h)m[f]=n[E],m[f+1]=n[E+3],m[f+2]=n[E+2],m[f+3]=n[E+1];else for(var C=0;C<h;++C)p=n[E+C],m[f+(3&-C)]=d[o[p>>>24]]^y[o[p>>>16&255]]^g[o[p>>>8&255]]^v[o[255&p]];n=m}return n}function i(e,t,r,n){var i,a,u,f,h,p=e.length/4-1;n?(i=l[0],a=l[1],u=l[2],f=l[3],h=s):(i=c[0],a=c[1],u=c[2],f=c[3],h=o);var d,y,g,v,m,E,C;d=t[0]^e[0],y=t[n?3:1]^e[1],g=t[2]^e[2],v=t[n?1:3]^e[3];for(var b=3,A=1;A<p;++A)m=i[d>>>24]^a[y>>>16&255]^u[g>>>8&255]^f[255&v]^e[++b],E=i[y>>>24]^a[g>>>16&255]^u[v>>>8&255]^f[255&d]^e[++b],C=i[g>>>24]^a[v>>>16&255]^u[d>>>8&255]^f[255&y]^e[++b],v=i[v>>>24]^a[d>>>16&255]^u[y>>>8&255]^f[255&g]^e[++b],d=m,y=E,g=C;r[0]=h[d>>>24]<<24^h[y>>>16&255]<<16^h[g>>>8&255]<<8^h[255&v]^e[++b],r[n?3:1]=h[y>>>24]<<24^h[g>>>16&255]<<16^h[v>>>8&255]<<8^h[255&d]^e[++b],r[2]=h[g>>>24]<<24^h[v>>>16&255]<<16^h[d>>>8&255]<<8^h[255&y]^e[++b],r[n?1:3]=h[v>>>24]<<24^h[d>>>16&255]<<16^h[y>>>8&255]<<8^h[255&g]^e[++b]}function a(t){t=t||{};var r,n=(t.mode||"CBC").toUpperCase(),i="AES-"+n;r=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key);var a=r.start;return r.start=function(t,n){var i=null;n instanceof e.util.ByteBuffer&&(i=n,n={}),n=n||{},n.output=i,n.iv=t,a.call(r,n)},r}e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,r,n){var i=a({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},e.aes.createEncryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!1,mode:t})},e.aes.startDecrypting=function(e,t,r,n){var i=a({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},e.aes.createDecryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!0,mode:t})},e.aes.Algorithm=function(e,t){f||r();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return i(n._w,e,t,!1)},decrypt:function(e,t){return i(n._w,e,t,!0)}}}),n._init=!1},e.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var r,i=t.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(e.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){r=i,i=e.util.createBuffer();for(var a=0;a<r.length;++a)i.putByte(r[a])}}else i=e.util.createBuffer(i);if(!e.util.isArray(i)){r=i,i=[];var o=r.length();if(16===o||24===o||32===o){o>>>=2;for(var a=0;a<o;++a)i.push(r.getInt32())}}if(!e.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var s=this.mode.name,u=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=n(i,t.decrypt&&!u),this._init=!0}},e.aes._expandKey=function(e,t){return f||r(),n(e,t)},e.aes._updateBlock=i,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);var o,s,u,c,l,f=!1,h=4}var t="aes";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aes",["require","module","./cipher","./cipherModes","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.pki=e.pki||{};var t=e.pki.oids=e.oids=e.oids||{};t["1.2.840.113549.1.1.1"]="rsaEncryption",t.rsaEncryption="1.2.840.113549.1.1.1",t["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",t.md5WithRSAEncryption="1.2.840.113549.1.1.4",t["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",t.sha1WithRSAEncryption="1.2.840.113549.1.1.5",t["1.2.840.113549.1.1.7"]="RSAES-OAEP",t["RSAES-OAEP"]="1.2.840.113549.1.1.7",t["1.2.840.113549.1.1.8"]="mgf1",t.mgf1="1.2.840.113549.1.1.8",t["1.2.840.113549.1.1.9"]="pSpecified",t.pSpecified="1.2.840.113549.1.1.9",t["1.2.840.113549.1.1.10"]="RSASSA-PSS",t["RSASSA-PSS"]="1.2.840.113549.1.1.10",t["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",t.sha256WithRSAEncryption="1.2.840.113549.1.1.11",t["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",t.sha384WithRSAEncryption="1.2.840.113549.1.1.12",t["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",t.sha512WithRSAEncryption="1.2.840.113549.1.1.13",t["1.3.14.3.2.7"]="desCBC",t.desCBC="1.3.14.3.2.7",t["1.3.14.3.2.26"]="sha1",t.sha1="1.3.14.3.2.26",t["2.16.840.1.101.3.4.2.1"]="sha256",t.sha256="2.16.840.1.101.3.4.2.1",t["2.16.840.1.101.3.4.2.2"]="sha384",t.sha384="2.16.840.1.101.3.4.2.2",t["2.16.840.1.101.3.4.2.3"]="sha512",t.sha512="2.16.840.1.101.3.4.2.3",t["1.2.840.113549.2.5"]="md5",t.md5="1.2.840.113549.2.5",t["1.2.840.113549.1.7.1"]="data",t.data="1.2.840.113549.1.7.1",t["1.2.840.113549.1.7.2"]="signedData",t.signedData="1.2.840.113549.1.7.2",t["1.2.840.113549.1.7.3"]="envelopedData",t.envelopedData="1.2.840.113549.1.7.3",t["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",t.signedAndEnvelopedData="1.2.840.113549.1.7.4",t["1.2.840.113549.1.7.5"]="digestedData",t.digestedData="1.2.840.113549.1.7.5",t["1.2.840.113549.1.7.6"]="encryptedData",t.encryptedData="1.2.840.113549.1.7.6",t["1.2.840.113549.1.9.1"]="emailAddress",t.emailAddress="1.2.840.113549.1.9.1",t["1.2.840.113549.1.9.2"]="unstructuredName",t.unstructuredName="1.2.840.113549.1.9.2",t["1.2.840.113549.1.9.3"]="contentType",t.contentType="1.2.840.113549.1.9.3",t["1.2.840.113549.1.9.4"]="messageDigest",t.messageDigest="1.2.840.113549.1.9.4",t["1.2.840.113549.1.9.5"]="signingTime",t.signingTime="1.2.840.113549.1.9.5",t["1.2.840.113549.1.9.6"]="counterSignature",t.counterSignature="1.2.840.113549.1.9.6",t["1.2.840.113549.1.9.7"]="challengePassword",t.challengePassword="1.2.840.113549.1.9.7",t["1.2.840.113549.1.9.8"]="unstructuredAddress",t.unstructuredAddress="1.2.840.113549.1.9.8",t["1.2.840.113549.1.9.14"]="extensionRequest",t.extensionRequest="1.2.840.113549.1.9.14",t["1.2.840.113549.1.9.20"]="friendlyName",t.friendlyName="1.2.840.113549.1.9.20",t["1.2.840.113549.1.9.21"]="localKeyId",t.localKeyId="1.2.840.113549.1.9.21",t["1.2.840.113549.1.9.22.1"]="x509Certificate",t.x509Certificate="1.2.840.113549.1.9.22.1",t["1.2.840.113549.1.12.10.1.1"]="keyBag",t.keyBag="1.2.840.113549.1.12.10.1.1",t["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",t.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",t["1.2.840.113549.1.12.10.1.3"]="certBag",t.certBag="1.2.840.113549.1.12.10.1.3",t["1.2.840.113549.1.12.10.1.4"]="crlBag",t.crlBag="1.2.840.113549.1.12.10.1.4",t["1.2.840.113549.1.12.10.1.5"]="secretBag",t.secretBag="1.2.840.113549.1.12.10.1.5",t["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",t.safeContentsBag="1.2.840.113549.1.12.10.1.6",t["1.2.840.113549.1.5.13"]="pkcs5PBES2",t.pkcs5PBES2="1.2.840.113549.1.5.13",t["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",t.pkcs5PBKDF2="1.2.840.113549.1.5.12",t["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",t.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",t["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",t.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",t["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",t["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",t["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",t["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",t["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",t["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",t["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",t["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",t["1.2.840.113549.2.7"]="hmacWithSHA1",t.hmacWithSHA1="1.2.840.113549.2.7",t["1.2.840.113549.2.8"]="hmacWithSHA224",t.hmacWithSHA224="1.2.840.113549.2.8",t["1.2.840.113549.2.9"]="hmacWithSHA256",t.hmacWithSHA256="1.2.840.113549.2.9",t["1.2.840.113549.2.10"]="hmacWithSHA384",t.hmacWithSHA384="1.2.840.113549.2.10",t["1.2.840.113549.2.11"]="hmacWithSHA512",
t.hmacWithSHA512="1.2.840.113549.2.11",t["1.2.840.113549.3.7"]="des-EDE3-CBC",t["des-EDE3-CBC"]="1.2.840.113549.3.7",t["2.16.840.1.101.3.4.1.2"]="aes128-CBC",t["aes128-CBC"]="2.16.840.1.101.3.4.1.2",t["2.16.840.1.101.3.4.1.22"]="aes192-CBC",t["aes192-CBC"]="2.16.840.1.101.3.4.1.22",t["2.16.840.1.101.3.4.1.42"]="aes256-CBC",t["aes256-CBC"]="2.16.840.1.101.3.4.1.42",t["2.5.4.3"]="commonName",t.commonName="2.5.4.3",t["2.5.4.5"]="serialName",t.serialName="2.5.4.5",t["2.5.4.6"]="countryName",t.countryName="2.5.4.6",t["2.5.4.7"]="localityName",t.localityName="2.5.4.7",t["2.5.4.8"]="stateOrProvinceName",t.stateOrProvinceName="2.5.4.8",t["2.5.4.10"]="organizationName",t.organizationName="2.5.4.10",t["2.5.4.11"]="organizationalUnitName",t.organizationalUnitName="2.5.4.11",t["2.16.840.1.113730.1.1"]="nsCertType",t.nsCertType="2.16.840.1.113730.1.1",t["2.5.29.1"]="authorityKeyIdentifier",t["2.5.29.2"]="keyAttributes",t["2.5.29.3"]="certificatePolicies",t["2.5.29.4"]="keyUsageRestriction",t["2.5.29.5"]="policyMapping",t["2.5.29.6"]="subtreesConstraint",t["2.5.29.7"]="subjectAltName",t["2.5.29.8"]="issuerAltName",t["2.5.29.9"]="subjectDirectoryAttributes",t["2.5.29.10"]="basicConstraints",t["2.5.29.11"]="nameConstraints",t["2.5.29.12"]="policyConstraints",t["2.5.29.13"]="basicConstraints",t["2.5.29.14"]="subjectKeyIdentifier",t.subjectKeyIdentifier="2.5.29.14",t["2.5.29.15"]="keyUsage",t.keyUsage="2.5.29.15",t["2.5.29.16"]="privateKeyUsagePeriod",t["2.5.29.17"]="subjectAltName",t.subjectAltName="2.5.29.17",t["2.5.29.18"]="issuerAltName",t.issuerAltName="2.5.29.18",t["2.5.29.19"]="basicConstraints",t.basicConstraints="2.5.29.19",t["2.5.29.20"]="cRLNumber",t["2.5.29.21"]="cRLReason",t["2.5.29.22"]="expirationDate",t["2.5.29.23"]="instructionCode",t["2.5.29.24"]="invalidityDate",t["2.5.29.25"]="cRLDistributionPoints",t["2.5.29.26"]="issuingDistributionPoint",t["2.5.29.27"]="deltaCRLIndicator",t["2.5.29.28"]="issuingDistributionPoint",t["2.5.29.29"]="certificateIssuer",t["2.5.29.30"]="nameConstraints",t["2.5.29.31"]="cRLDistributionPoints",t.cRLDistributionPoints="2.5.29.31",t["2.5.29.32"]="certificatePolicies",t.certificatePolicies="2.5.29.32",t["2.5.29.33"]="policyMappings",t["2.5.29.34"]="policyConstraints",t["2.5.29.35"]="authorityKeyIdentifier",t.authorityKeyIdentifier="2.5.29.35",t["2.5.29.36"]="policyConstraints",t["2.5.29.37"]="extKeyUsage",t.extKeyUsage="2.5.29.37",t["2.5.29.46"]="freshestCRL",t["2.5.29.54"]="inhibitAnyPolicy",t["1.3.6.1.4.1.11129.2.4.2"]="timestampList",t.timestampList="1.3.6.1.4.1.11129.2.4.2",t["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",t.authorityInfoAccess="1.3.6.1.5.5.7.1.1",t["1.3.6.1.5.5.7.3.1"]="serverAuth",t.serverAuth="1.3.6.1.5.5.7.3.1",t["1.3.6.1.5.5.7.3.2"]="clientAuth",t.clientAuth="1.3.6.1.5.5.7.3.2",t["1.3.6.1.5.5.7.3.3"]="codeSigning",t.codeSigning="1.3.6.1.5.5.7.3.3",t["1.3.6.1.5.5.7.3.4"]="emailProtection",t.emailProtection="1.3.6.1.5.5.7.3.4",t["1.3.6.1.5.5.7.3.8"]="timeStamping",t.timeStamping="1.3.6.1.5.5.7.3.8"}var t="oids";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/oids",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,r,n,i){if(e.util.isArray(i)){for(var a=[],o=0;o<i.length;++o)void 0!==i[o]&&a.push(i[o]);i=a}return{tagClass:t,type:r,constructed:n,composed:n||e.util.isArray(i),value:i}};var r=t.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var r,n=128&t;return r=n?e.getInt((127&t)<<3):t}};t.fromDer=function(n,i){if(void 0===i&&(i=!0),"string"==typeof n&&(n=e.util.createBuffer(n)),n.length()<2){var a=new Error("Too few bytes to parse DER.");throw a.bytes=n.length(),a}var o=n.getByte(),s=192&o,u=31&o,c=r(n);if(n.length()<c){if(i){var a=new Error("Too few bytes to read ASN.1 value.");throw a.detail=n.length()+" < "+c,a}c=n.length()}var l,f=32===(32&o),h=f;if(!h&&s===t.Class.UNIVERSAL&&u===t.Type.BITSTRING&&c>1){var p=n.read,d=n.getByte();if(0===d){o=n.getByte();var y=192&o;if(y===t.Class.UNIVERSAL||y===t.Class.CONTEXT_SPECIFIC)try{var g=r(n);h=g===c-(n.read-p),h&&(++p,--c)}catch(e){}}n.read=p}if(h)if(l=[],void 0===c)for(;;){if(n.bytes(2)===String.fromCharCode(0,0)){n.getBytes(2);break}l.push(t.fromDer(n,i))}else for(var v=n.length();c>0;)l.push(t.fromDer(n,i)),c-=v-n.length(),v=n.length();else{if(void 0===c){if(i)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=n.length()}if(u===t.Type.BMPSTRING){l="";for(var m=0;m<c;m+=2)l+=String.fromCharCode(n.getInt16())}else l=n.getBytes(c)}return t.create(s,u,f,l)},t.toDer=function(r){var n=e.util.createBuffer(),i=r.tagClass|r.type,a=e.util.createBuffer();if(r.composed){r.constructed?i|=32:a.putByte(0);for(var o=0;o<r.value.length;++o)void 0!==r.value[o]&&a.putBuffer(t.toDer(r.value[o]))}else if(r.type===t.Type.BMPSTRING)for(var o=0;o<r.value.length;++o)a.putInt16(r.value.charCodeAt(o));else r.type===t.Type.INTEGER&&r.value.length>1&&(0===r.value.charCodeAt(0)&&0===(128&r.value.charCodeAt(1))||255===r.value.charCodeAt(0)&&128===(128&r.value.charCodeAt(1)))?a.putBytes(r.value.substr(1)):a.putBytes(r.value);if(n.putByte(i),a.length()<=127)n.putByte(127&a.length());else{var s=a.length(),u="";do u+=String.fromCharCode(255&s),s>>>=8;while(s>0);n.putByte(128|u.length);for(var o=u.length-1;o>=0;--o)n.putByte(u.charCodeAt(o))}return n.putBuffer(a),n},t.oidToDer=function(t){var r=t.split("."),n=e.util.createBuffer();n.putByte(40*parseInt(r[0],10)+parseInt(r[1],10));for(var i,a,o,s,u=2;u<r.length;++u){i=!0,a=[],o=parseInt(r[u],10);do s=127&o,o>>>=7,i||(s|=128),a.push(s),i=!1;while(o>0);for(var c=a.length-1;c>=0;--c)n.putByte(a[c])}return n},t.derToOid=function(t){var r;"string"==typeof t&&(t=e.util.createBuffer(t));var n=t.getByte();r=Math.floor(n/40)+"."+n%40;for(var i=0;t.length()>0;)n=t.getByte(),i<<=7,128&n?i+=127&n:(r+="."+(i+n),i=0);return r},t.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,0),c&&(u=e.charAt(c),"+"===u||"-"===u)){var l=parseInt(e.substr(c+1,2),10),f=parseInt(e.substr(c+4,2),10),h=60*l+f;h*=6e4,"+"===u?t.setTime(+t-h):t.setTime(+t+h)}return t},t.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,h=e.charAt(f);if("+"===h||"-"===h){var p=parseInt(e.substr(f+1,2),10),d=parseInt(e.substr(f+4,2),10);c=60*p+d,c*=6e4,"+"===h&&(c*=-1),l=!0}return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,o,s,u)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.integerToDer=function(t){var r=e.util.createBuffer();if(t>=-128&&t<128)return r.putSignedInt(t,8);if(t>=-32768&&t<32768)return r.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return r.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return r.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n},t.derToInteger=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));var r=8*t.length();if(r>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(r)},t.validate=function(r,n,i,a){var o=!1;if(r.tagClass!==n.tagClass&&"undefined"!=typeof n.tagClass||r.type!==n.type&&"undefined"!=typeof n.type)a&&(r.tagClass!==n.tagClass&&a.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+r.tagClass+'"'),r.type!==n.type&&a.push("["+n.name+'] Expected type "'+n.type+'", got "'+r.type+'"'));else if(r.constructed===n.constructed||"undefined"==typeof n.constructed){if(o=!0,n.value&&e.util.isArray(n.value))for(var s=0,u=0;o&&u<n.value.length;++u)o=n.value[u].optional||!1,r.value[s]&&(o=t.validate(r.value[s],n.value[u],i,a),o?++s:n.value[u].optional&&(o=!0)),!o&&a&&a.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+r.value.length+'"');o&&i&&(n.capture&&(i[n.capture]=r.value),n.captureAsn1&&(i[n.captureAsn1]=r))}else a&&a.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+r.constructed+'"');return o};var n=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(r,i,a){var o="";i=i||0,a=a||2,i>0&&(o+="\n");for(var s="",u=0;u<i*a;++u)s+=" ";switch(o+=s+"Tag: ",r.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:"}if(r.tagClass===t.Class.UNIVERSAL)switch(o+=r.type,r.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)"}else o+=r.type;if(o+="\n",o+=s+"Constructed: "+r.constructed+"\n",r.composed){for(var c=0,l="",u=0;u<r.value.length;++u)void 0!==r.value[u]&&(c+=1,l+=t.prettyPrint(r.value[u],i+1,a),u+1<r.value.length&&(l+=","));o+=s+"Sub values: "+c+l}else{if(o+=s+"Value: ",r.type===t.Type.OID){var f=t.derToOid(r.value);o+=f,e.pki&&e.pki.oids&&f in e.pki.oids&&(o+=" ("+e.pki.oids[f]+") ")}if(r.type===t.Type.INTEGER)try{o+=t.derToInteger(r.value)}catch(t){o+="0x"+e.util.bytesToHex(r.value)}else r.type===t.Type.OCTETSTRING?(n.test(r.value)||(o+="("+r.value+") "),o+="0x"+e.util.bytesToHex(r.value)):o+=r.type===t.Type.UTF8?e.util.decodeUtf8(r.value):r.type===t.Type.PRINTABLESTRING||r.type===t.Type.IA5String?r.value:n.test(r.value)?"0x"+e.util.bytesToHex(r.value):0===r.value.length?"[null]":r.value}return o}}var t="asn1";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/asn1",["require","module","./util","./oids"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s=new Array(64);for(var t=0;t<64;++t)s[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));u=!0}function r(e,t,r){for(var n,i,u,c,l,f,h,p,d=r.length();d>=64;){for(i=e.h0,u=e.h1,c=e.h2,l=e.h3,p=0;p<16;++p)t[p]=r.getInt32Le(),f=l^u&(c^l),n=i+f+s[p]+t[p],h=o[p],i=l,l=c,c=u,u+=n<<h|n>>>32-h;for(;p<32;++p)f=c^l&(u^c),n=i+f+s[p]+t[a[p]],h=o[p],i=l,l=c,c=u,u+=n<<h|n>>>32-h;for(;p<48;++p)f=u^c^l,n=i+f+s[p]+t[a[p]],h=o[p],i=l,l=c,c=u,u+=n<<h|n>>>32-h;for(;p<64;++p)f=c^(u|~l),n=i+f+s[p]+t[a[p]],h=o[p],i=l,l=c,c=u,u+=n<<h|n>>>32-h;e.h0=e.h0+i|0,e.h1=e.h1+u|0,e.h2=e.h2+c|0,e.h3=e.h3+l|0,d-=64}}var n=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=n,n.create=function(){u||t();var n=null,a=e.util.createBuffer(),o=new Array(16),s={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var t=s.messageLengthSize/4,r=0;r<t;++r)s.fullMessageLength.push(0);return a=e.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s},s.start(),s.update=function(t,i){"utf8"===i&&(t=e.util.encodeUtf8(t));var u=t.length;s.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=s.fullMessageLength.length-1;c>=0;--c)s.fullMessageLength[c]+=u[1],u[1]=u[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]=s.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return a.putBytes(t),r(n,o,a),(a.read>2048||0===a.length())&&a.compact(),s},s.digest=function(){var t=e.util.createBuffer();t.putBytes(a.bytes());var u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,c=u&s.blockLength-1;t.putBytes(i.substr(0,s.blockLength-c));for(var l,f=0,h=s.fullMessageLength.length-1;h>=0;--h)l=8*s.fullMessageLength[h]+f,f=l/4294967296>>>0,t.putInt32Le(l>>>0);var p={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3};r(p,o,t);var d=e.util.createBuffer();return d.putInt32Le(p.h0),d.putInt32Le(p.h1),d.putInt32Le(p.h2),d.putInt32Le(p.h3),d},s};var i=null,a=null,o=null,s=null,u=!1}var t="md5";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md5",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),a=!0}function r(e,t,r){for(var n,i,a,o,s,u,c,l,f=r.length();f>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,c=s^a&(o^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=s^a&(o^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a&o|s&(a^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+3395469782+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}}var n=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=n,n.create=function(){a||t();var n=null,o=e.util.createBuffer(),s=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var t=u.messageLengthSize/4,r=0;r<t;++r)u.fullMessageLength.push(0);return o=e.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u},u.start(),u.update=function(t,i){"utf8"===i&&(t=e.util.encodeUtf8(t));var a=t.length;u.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=a[1],a[1]=a[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(t),r(n,s,o),(o.read>2048||0===o.length())&&o.compact(),u},u.digest=function(){var t=e.util.createBuffer();t.putBytes(o.bytes());var a=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=a&u.blockLength-1;t.putBytes(i.substr(0,u.blockLength-c));for(var l,f,h=8*u.fullMessageLength[0],p=0;p<u.fullMessageLength.length-1;++p)l=8*u.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,t.putInt32(h>>>0),h=l>>>0;t.putInt32(h);var d={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4};r(d,s,t);var y=e.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y},u};var i=null,a=!1}var t="sha1";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0}function r(e,t,r){for(var n,i,a,s,u,c,l,f,h,p,d,y,g,v,m,E=r.length();E>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=n+t[l-7]+i+t[l-16]|0;for(f=e.h0,h=e.h1,p=e.h2,d=e.h3,y=e.h4,g=e.h5,v=e.h6,m=e.h7,l=0;l<64;++l)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=v^y&(g^v),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&h|p&(f^h),n=m+s+u+o[l]+t[l],i=a+c,m=v,v=g,g=y,y=d+n>>>0,d=p,p=h,h=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+h|0,e.h2=e.h2+p|0,e.h3=e.h3+d|0,e.h4=e.h4+y|0,e.h5=e.h5+g|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,E-=64}}var n=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=n,n.create=function(){a||t();var n=null,o=e.util.createBuffer(),s=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var t=u.messageLengthSize/4,r=0;r<t;++r)u.fullMessageLength.push(0);return o=e.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u},u.start(),u.update=function(t,i){"utf8"===i&&(t=e.util.encodeUtf8(t));var a=t.length;u.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=a[1],a[1]=a[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(t),r(n,s,o),(o.read>2048||0===o.length())&&o.compact(),u},u.digest=function(){var t=e.util.createBuffer();t.putBytes(o.bytes());var a=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=a&u.blockLength-1;t.putBytes(i.substr(0,u.blockLength-c));for(var l,f,h=8*u.fullMessageLength[0],p=0;p<u.fullMessageLength.length-1;++p)l=8*u.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,t.putInt32(h>>>0),h=l>>>0;t.putInt32(h);var d={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};r(d,s,t);var y=e.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y.putInt32(d.h5),y.putInt32(d.h6),y.putInt32(d.h7),y},u};var i=null,a=!1,o=null}var t="sha256";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha256",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){a=String.fromCharCode(128),a+=e.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],o=!0}function r(e,t,r){for(var n,i,a,o,u,c,l,f,h,p,d,y,g,v,m,E,C,b,A,S,B,w,T,I,_,k,D,R,N,L,x,U,F,O,P,M=r.length();M>=128;){for(N=0;N<16;++N)t[N][0]=r.getInt32()>>>0,t[N][1]=r.getInt32()>>>0;for(;N<80;++N)U=t[N-2],L=U[0],x=U[1],n=((L>>>19|x<<13)^(x>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|x>>>19)^(x<<3|L>>>29)^(L<<26|x>>>6))>>>0,O=t[N-15],L=O[0],x=O[1],a=((L>>>1|x<<31)^(L>>>8|x<<24)^L>>>7)>>>0,o=((L<<31|x>>>1)^(L<<24|x>>>8)^(L<<25|x>>>7))>>>0,F=t[N-7],P=t[N-16],x=i+F[1]+o+P[1],t[N][0]=n+F[0]+a+P[0]+(x/4294967296>>>0)>>>0,t[N][1]=x>>>0;for(g=e[0][0],v=e[0][1],m=e[1][0],E=e[1][1],C=e[2][0],b=e[2][1],A=e[3][0],S=e[3][1],B=e[4][0],w=e[4][1],T=e[5][0],I=e[5][1],_=e[6][0],k=e[6][1],D=e[7][0],R=e[7][1],N=0;N<80;++N)l=((B>>>14|w<<18)^(B>>>18|w<<14)^(w>>>9|B<<23))>>>0,f=((B<<18|w>>>14)^(B<<14|w>>>18)^(w<<23|B>>>9))>>>0,h=(_^B&(T^_))>>>0,p=(k^w&(I^k))>>>0,u=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,c=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&m|C&(g^m))>>>0,y=(v&E|b&(v^E))>>>0,x=R+f+p+s[N][1]+t[N][1],n=D+l+h+s[N][0]+t[N][0]+(x/4294967296>>>0)>>>0,i=x>>>0,x=c+y,a=u+d+(x/4294967296>>>0)>>>0,o=x>>>0,D=_,R=k,_=T,k=I,T=B,I=w,x=S+i,B=A+n+(x/4294967296>>>0)>>>0,w=x>>>0,A=C,S=b,C=m,b=E,m=g,E=v,x=i+o,g=n+a+(x/4294967296>>>0)>>>0,v=x>>>0;x=e[0][1]+v,e[0][0]=e[0][0]+g+(x/4294967296>>>0)>>>0,e[0][1]=x>>>0,x=e[1][1]+E,e[1][0]=e[1][0]+m+(x/4294967296>>>0)>>>0,e[1][1]=x>>>0,x=e[2][1]+b,e[2][0]=e[2][0]+C+(x/4294967296>>>0)>>>0,e[2][1]=x>>>0,x=e[3][1]+S,e[3][0]=e[3][0]+A+(x/4294967296>>>0)>>>0,e[3][1]=x>>>0,x=e[4][1]+w,e[4][0]=e[4][0]+B+(x/4294967296>>>0)>>>0,e[4][1]=x>>>0,x=e[5][1]+I,e[5][0]=e[5][0]+T+(x/4294967296>>>0)>>>0,e[5][1]=x>>>0,x=e[6][1]+k,e[6][0]=e[6][0]+_+(x/4294967296>>>0)>>>0,e[6][1]=x>>>0,x=e[7][1]+R,e[7][0]=e[7][0]+D+(x/4294967296>>>0)>>>0,e[7][1]=x>>>0,M-=128}}var n=e.sha512=e.sha512||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha512=e.md.algorithms.sha512=n;var i=e.sha384=e.sha512.sha384=e.sha512.sha384||{};i.create=function(){return n.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=i,e.sha512.sha256=e.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,n.create=function(n){if(o||t(),"undefined"==typeof n&&(n="SHA-512"),n in u){for(var i=u[n],s=null,c=e.util.createBuffer(),l=new Array(80),f=0;f<80;++f)l[f]=new Array(2);var h={algorithm:n.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var t=h.messageLengthSize/4,r=0;r<t;++r)h.fullMessageLength.push(0);c=e.util.createBuffer(),s=new Array(i.length);for(var r=0;r<i.length;++r)s[r]=i[r].slice(0);return h},h.start(),h.update=function(t,n){"utf8"===n&&(t=e.util.encodeUtf8(t));var i=t.length;h.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var a=h.fullMessageLength.length-1;a>=0;--a)h.fullMessageLength[a]+=i[1],i[1]=i[0]+(h.fullMessageLength[a]/4294967296>>>0),h.fullMessageLength[a]=h.fullMessageLength[a]>>>0,i[0]=i[1]/4294967296>>>0;return c.putBytes(t),r(s,l,c),(c.read>2048||0===c.length())&&c.compact(),h},h.digest=function(){var t=e.util.createBuffer();t.putBytes(c.bytes());var i=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,o=i&h.blockLength-1;t.putBytes(a.substr(0,h.blockLength-o));for(var u,f,p=8*h.fullMessageLength[0],d=0;d<h.fullMessageLength.length-1;++d)u=8*h.fullMessageLength[d+1],f=u/4294967296>>>0,p+=f,t.putInt32(p>>>0),p=u>>>0;t.putInt32(p);for(var y=new Array(s.length),d=0;d<s.length;++d)y[d]=s[d].slice(0);r(y,l,t);var g,v=e.util.createBuffer();g="SHA-512"===n?y.length:"SHA-384"===n?y.length-2:y.length-4;for(var d=0;d<g;++d)v.putInt32(y[d][0]),(d!==g-1||"SHA-512/224"!==n)&&v.putInt32(y[d][1]);return v},h}throw new Error("Invalid SHA-512 algorithm: "+n)};var a=null,o=!1,s=null,u=null}var t="sha512";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha512",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}var t="md";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md",["require","module","./md5","./sha1","./sha256","./sha512"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.hmac=e.hmac||{};t.create=function(){var t=null,r=null,n=null,i=null,a={};return a.start=function(a,o){if(null!==a)if("string"==typeof a){if(a=a.toLowerCase(),!(a in e.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');r=e.md.algorithms[a].create()}else r=a;if(null===o)o=t;else{if("string"==typeof o)o=e.util.createBuffer(o);else if(e.util.isArray(o)){
var s=o;o=e.util.createBuffer();for(var u=0;u<s.length;++u)o.putByte(s[u])}var c=o.length();c>r.blockLength&&(r.start(),r.update(o.bytes()),o=r.digest()),n=e.util.createBuffer(),i=e.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var s=o.at(u);n.putByte(54^s),i.putByte(92^s)}if(c<r.blockLength)for(var s=r.blockLength-c,u=0;u<s;++u)n.putByte(54),i.putByte(92);t=o,n=n.bytes(),i=i.bytes()}r.start(),r.update(n)},a.update=function(e){r.update(e)},a.getMac=function(){var e=r.digest().bytes();return r.start(),r.update(i),r.update(e),r.digest()},a.digest=a.getMac,a}}var t="hmac";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/hmac",["require","module","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";for(var a=0,o=-1,i=0;i<t.length;++i,++a)if(a>65&&o!==-1){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),a=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function r(e){return e.replace(/^\s+/,"")}var n=e.pem=e.pem||{};n.encode=function(r,n){n=n||{};var i,a="-----BEGIN "+r.type+"-----\r\n";if(r.procType&&(i={name:"Proc-Type",values:[String(r.procType.version),r.procType.type]},a+=t(i)),r.contentDomain&&(i={name:"Content-Domain",values:[r.contentDomain]},a+=t(i)),r.dekInfo&&(i={name:"DEK-Info",values:[r.dekInfo.algorithm]},r.dekInfo.parameters&&i.values.push(r.dekInfo.parameters),a+=t(i)),r.headers)for(var o=0;o<r.headers.length;++o)a+=t(r.headers[o]);return r.procType&&(a+="\r\n"),a+=e.util.encode64(r.body,n.maxline||64)+"\r\n",a+="-----END "+r.type+"-----\r\n"},n.decode=function(t){for(var n,i=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;n=a.exec(t),n;){var u={type:n[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(n[3])};if(i.push(u),n[2]){for(var c=n[2].split(s),l=0;n&&l<c.length;){for(var f=c[l].replace(/\s+$/,""),h=l+1;h<c.length;++h){var p=c[h];if(!/\s/.test(p[0]))break;f+=p,l=h}if(n=f.match(o)){for(var d={name:n[1],values:[]},y=n[2].split(","),g=0;g<y.length;++g)d.values.push(r(y[g]));if(u.procType)if(u.contentDomain||"Content-Domain"!==d.name)if(u.dekInfo||"DEK-Info"!==d.name)u.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++l}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===i.length)throw new Error("Invalid PEM formatted message.");return i}}var t="pem";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pem",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r){var n=function(){return new e.des.Algorithm(t,r)};e.cipher.registerAlgorithm(t,n)}function r(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,C=0;C<g;C++){var b=e.getInt32(),A=e.getInt32();t=252645135&(b>>>4^A),A^=t,b^=t<<4,t=65535&(A>>>-16^b),b^=t,A^=t<<-16,t=858993459&(b>>>2^A),A^=t,b^=t<<2,t=65535&(A>>>-16^b),b^=t,A^=t<<-16,t=1431655765&(b>>>1^A),A^=t,b^=t<<1,t=16711935&(A>>>8^b),b^=t,A^=t<<8,t=1431655765&(b>>>1^A),A^=t,b^=t<<1,t=b<<8|A>>>20&240,b=A<<24|A<<8&16711680|A>>>8&65280|A>>>24&240,A=t;for(var S=0;S<m.length;++S){m[S]?(b=b<<2|b>>>26,A=A<<2|A>>>26):(b=b<<1|b>>>27,A=A<<1|A>>>27),b&=-15,A&=-15;var B=r[b>>>28]|n[b>>>24&15]|i[b>>>20&15]|a[b>>>16&15]|o[b>>>12&15]|s[b>>>8&15]|u[b>>>4&15],w=c[A>>>28]|l[A>>>24&15]|f[A>>>20&15]|h[A>>>16&15]|p[A>>>12&15]|d[A>>>8&15]|y[A>>>4&15];t=65535&(w>>>16^B),v[E++]=B^t,v[E++]=w^t<<16}}return v}function n(e,t,r,n){var i,p=32===e.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d,y=t[0],g=t[1];d=252645135&(y>>>4^g),g^=d,y^=d<<4,d=65535&(y>>>16^g),g^=d,y^=d<<16,d=858993459&(g>>>2^y),y^=d,g^=d<<2,d=16711935&(g>>>8^y),y^=d,g^=d<<8,d=1431655765&(y>>>1^g),g^=d,y^=d<<1,y=y<<1|y>>>31,g=g<<1|g>>>31;for(var v=0;v<p;v+=3){for(var m=i[v+1],E=i[v+2],C=i[v];C!=m;C+=E){var b=g^e[C],A=(g>>>4|g<<28)^e[C+1];d=y,y=g,g=d^(o[b>>>24&63]|u[b>>>16&63]|l[b>>>8&63]|h[63&b]|a[A>>>24&63]|s[A>>>16&63]|c[A>>>8&63]|f[63&A])}d=y,y=g,g=d}y=y>>>1|y<<31,g=g>>>1|g<<31,d=1431655765&(y>>>1^g),g^=d,y^=d<<1,d=16711935&(g>>>8^y),y^=d,g^=d<<8,d=858993459&(g>>>2^y),y^=d,g^=d<<2,d=65535&(y>>>16^g),g^=d,y^=d<<16,d=252645135&(y>>>4^g),g^=d,y^=d<<4,r[0]=y,r[1]=g}function i(t){t=t||{};var r,n=(t.mode||"CBC").toUpperCase(),i="DES-"+n;r=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key);var a=r.start;return r.start=function(t,n){var i=null;n instanceof e.util.ByteBuffer&&(i=n,n={}),n=n||{},n.output=i,n.iv=t,a.call(r,n)},r}e.des=e.des||{},e.des.startEncrypting=function(e,t,r,n){var a=i({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},e.des.createEncryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!1,mode:t})},e.des.startDecrypting=function(e,t,r,n){var a=i({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},e.des.createDecryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!0,mode:t})},e.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return n(r._keys,e,t,!1)},decrypt:function(e,t){return n(r._keys,e,t,!0)}}}),r._init=!1},e.des.Algorithm.prototype.initialize=function(t){if(!this._init){var n=e.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==n.length())throw new Error("Invalid Triple-DES key size: "+8*n.length());this._keys=r(n),this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);var a=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}var t="des";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/des",["require","module","./cipher","./cipherModes","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var r,i=t.pkcs5=t.pkcs5||{},a="undefined"!=typeof e&&e.versions&&e.versions.node;a&&!t.disableNativeCode&&(r=n("crypto")),t.pbkdf2=i.pbkdf2=function(e,n,i,o,u,c){function l(){return b>d?c(null,C):(g.start(null,null),g.update(n),g.update(t.util.int32ToBytes(b)),v=E=g.digest().getBytes(),A=2,f(),void 0)}function f(){return A<=i?(g.start(null,null),g.update(E),m=g.digest().getBytes(),v=t.util.xorBytes(v,m,h),E=m,++A,t.util.setImmediate(f)):(C+=b<d?v:v.substr(0,y),++b,l(),void 0)}if("function"==typeof u&&(c=u,u=null),a&&!t.disableNativeCode&&r.pbkdf2&&(null===u||"object"!=typeof u)&&(r.pbkdf2Sync.length>4||!u||"sha1"===u))return"string"!=typeof u&&(u="sha1"),n=new s(n,"binary"),c?4===r.pbkdf2Sync.length?r.pbkdf2(e,n,i,o,function(e,t){return e?c(e):void c(null,t.toString("binary"))}):r.pbkdf2(e,n,i,o,u,function(e,t){return e?c(e):void c(null,t.toString("binary"))}):4===r.pbkdf2Sync.length?r.pbkdf2Sync(e,n,i,o).toString("binary"):r.pbkdf2Sync(e,n,i,o,u).toString("binary");if("undefined"!=typeof u&&null!==u||(u=t.md.sha1.create()),"string"==typeof u){if(!(u in t.md.algorithms))throw new Error("Unknown hash algorithm: "+u);u=t.md[u].create()}var h=u.digestLength;if(o>4294967295*h){var p=new Error("Derived key is too long.");if(c)return c(p);throw p}var d=Math.ceil(o/h),y=o-(d-1)*h,g=t.hmac.create();g.start(u,e);var v,m,E,C="";if(!c){for(var b=1;b<=d;++b){g.start(null,null),g.update(n),g.update(t.util.int32ToBytes(b)),v=E=g.digest().getBytes();for(var A=2;A<=i;++A)g.start(null,null),g.update(E),m=g.digest().getBytes(),v=t.util.xorBytes(v,m,h),E=m;C+=b<d?v:v.substr(0,y)}return C}var A,b=1;l()}}var r="pbkdf2";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var a=!0;i=function(e,t){t(n,o)}}var u,c=function(e,n){n.exports=function(n){var i=u.map(function(t){return e(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[r])return n[r];n.defined[r]=!0;for(var a=0;a<i.length;++a)i[a](n);return n[r]}},l=i;(i=function(e,t){return u="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,l.apply(null,Array.prototype.slice.call(arguments,0))):(i=l,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){c.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var r="undefined"!=typeof e&&e.versions&&e.versions.node,i=null;!t.disableNativeCode&&r&&!e.versions["node-webkit"]&&(i=n("crypto"));var a=t.prng=t.prng||{};a.create=function(e){function r(e){if(s.pools[0].messageLength>=32)return a(),e();var t=32-s.pools[0].messageLength<<5;s.seedFile(t,function(t,r){return t?e(t):(s.collect(r),a(),e(),void 0)})}function n(){if(s.pools[0].messageLength>=32)return a();var e=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(e)),a()}function a(){var e=s.plugin.md.create();e.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var t=1,r=1;r<32;++r)t=31===t?2147483648:t<<2,t%s.reseeds===0&&(e.update(s.pools[r].digest().getBytes()),s.pools[r].start());var n=e.digest().getBytes();e.start(),e.update(n);var i=e.digest().getBytes();s.key=s.plugin.formatKey(n),s.seed=s.plugin.formatSeed(i),s.reseeds=4294967295===s.reseeds?0:s.reseeds+1,s.generated=0}function o(e){var r=null;if("undefined"!=typeof window){var n=window.crypto||window.msCrypto;n&&n.getRandomValues&&(r=function(e){return n.getRandomValues(e)})}var i=t.util.createBuffer();if(r)for(;i.length()<e;){var a=Math.max(1,Math.min(e-i.length(),65536)/4),o=new Uint32Array(Math.floor(a));try{r(o);for(var s=0;s<o.length;++s)i.putInt32(o[s])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(i.length()<e)for(var u,c,l,f=Math.floor(65536*Math.random());i.length()<e;){c=16807*(65535&f),u=16807*(f>>16),c+=(32767&u)<<16,c+=u>>15,c=(2147483647&c)+(c>>31),f=4294967295&c;for(var s=0;s<3;++s)l=f>>>(s<<3),l^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&l))}return i.getBytes(e)}for(var s={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return s.pools=c,s.pool=0,s.generate=function(e,n){function i(f){if(f)return n(f);if(l.length()>=e)return n(null,l.getBytes(e));if(s.generated>1048575&&(s.key=null),null===s.key)return t.util.nextTick(function(){r(i)});var h=a(s.key,s.seed);s.generated+=h.length,l.putBytes(h),s.key=u(a(s.key,o(s.seed))),s.seed=c(a(s.key,s.seed)),t.util.setImmediate(i)}if(!n)return s.generateSync(e);var a=s.plugin.cipher,o=s.plugin.increment,u=s.plugin.formatKey,c=s.plugin.formatSeed,l=t.util.createBuffer();s.key=null,i()},s.generateSync=function(e){var r=s.plugin.cipher,i=s.plugin.increment,a=s.plugin.formatKey,o=s.plugin.formatSeed;s.key=null;for(var u=t.util.createBuffer();u.length()<e;){s.generated>1048575&&(s.key=null),null===s.key&&n();var c=r(s.key,s.seed);s.generated+=c.length,u.putBytes(c),s.key=a(r(s.key,i(s.seed))),s.seed=o(r(s.key,s.seed))}return u.getBytes(e)},i?(s.seedFile=function(e,t){i.randomBytes(e,function(e,r){return e?t(e):void t(null,r.toString())})},s.seedFileSync=function(e){return i.randomBytes(e).toString()}):(s.seedFile=function(e,t){try{t(null,o(e))}catch(e){t(e)}},s.seedFileSync=o),s.collect=function(e){for(var t=e.length,r=0;r<t;++r)s.pools[s.pool].update(e.substr(r,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(e,t){for(var r="",n=0;n<t;n+=8)r+=String.fromCharCode(e>>n&255);s.collect(r)},s.registerWorker=function(e){if(e===self)s.seedFile=function(e,t){function r(e){var n=e.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),t(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var r=t.data;r.forge&&r.forge.prng&&s.seedFile(r.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})};e.addEventListener("message",t)}},s}}var r="prng";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var a=!0;i=function(e,t){t(n,o)}}var s,u=function(e,n){n.exports=function(n){var i=s.map(function(t){return e(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[r])return n[r];n.defined[r]=!0;for(var a=0;a<i.length;++a)i[a](n);return n[r]}},c=i;(i=function(e,t){return s="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/prng",["require","module","./md","./util"],function(){u.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.random&&t.random.getBytes||!function(r){function n(){var e=t.prng.create(i);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}var i={},a=new Array(4),o=t.util.createBuffer();i.formatKey=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),t.aes._expandKey(e,!1)},i.formatSeed=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),e},i.cipher=function(e,r){return t.aes._updateBlock(e,r,a,!1),o.putInt32(a[0]),o.putInt32(a[1]),o.putInt32(a[2]),o.putInt32(a[3]),o.getBytes()},i.increment=function(e){return++e[3],e},i.md=t.md.sha256;var s=n(),u="undefined"!=typeof e&&e.versions&&e.versions.node,c=null;if("undefined"!=typeof window){var l=window.crypto||window.msCrypto;l&&l.getRandomValues&&(c=function(e){return l.getRandomValues(e)})}if(t.disableNativeCode||!u&&!c){if("undefined"==typeof window||void 0===window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var h in navigator)try{"string"==typeof navigator[h]&&(f+=navigator[h])}catch(e){}s.collect(f),f=null}r&&(r().mousemove(function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)}),r().keypress(function(e){s.collectInt(e.charCode,8)}))}if(t.random)for(var h in s)t.random[h]=s[h];else t.random=s;t.random.createInstance=n}("undefined"!=typeof jQuery?jQuery:null)}var r="random";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var a=!0;i=function(e,t){t(n,o)}}var s,u=function(e,n){n.exports=function(n){var i=s.map(function(t){return e(t)}).concat(t);if(n=n||{},n.defined=n.defined||{},n.defined[r])return n[r];n.defined[r]=!0;for(var a=0;a<i.length;++a)i[a](n);return n[r]}},c=i;(i=function(e,t){return s="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/random",["require","module","./aes","./md","./prng","./util"],function(){u.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],r=[1,2,3,5],n=function(e,t){return e<<t&65535|(65535&e)>>16-t},i=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.rc2=e.rc2||{},e.rc2.expandKey=function(r,n){"string"==typeof r&&(r=e.util.createBuffer(r)),n=n||128;var i,a=r,o=r.length(),s=n,u=Math.ceil(s/8),c=255>>(7&s);for(i=o;i<128;i++)a.putByte(t[a.at(i-1)+a.at(i-o)&255]);for(a.setAt(128-u,t[a.at(128-u)&c]),i=127-u;i>=0;i--)a.setAt(i,t[a.at(i+1)^a.at(i+u)]);return a};var a=function(t,a,o){var s,u,c,l,f=!1,h=null,p=null,d=null,y=[];for(t=e.rc2.expandKey(t,a),c=0;c<64;c++)y.push(t.getInt16Le());o?(s=function(e){for(c=0;c<4;c++)e[c]+=y[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=n(e[c],r[c]),l++},u=function(e){for(c=0;c<4;c++)e[c]+=y[63&e[(c+3)%4]]}):(s=function(e){for(c=3;c>=0;c--)e[c]=i(e[c],r[c]),e[c]-=y[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),l--},u=function(e){for(c=3;c>=0;c--)e[c]-=y[63&e[(c+3)%4]]});var g=function(e){var t=[];for(c=0;c<4;c++){var r=h.getInt16Le();null!==d&&(o?r^=d.getInt16Le():d.putInt16Le(r)),t.push(65535&r)}l=o?0:63;for(var n=0;n<e.length;n++)for(var i=0;i<e[n][0];i++)e[n][1](t);for(c=0;c<4;c++)null!==d&&(o?d.putInt16Le(t[c]):t[c]^=d.getInt16Le()),p.putInt16Le(t[c])},v=null;return v={start:function(t,r){t&&"string"==typeof t&&(t=e.util.createBuffer(t)),f=!1,h=e.util.createBuffer(),p=r||new e.util.createBuffer,d=t,v.output=p},update:function(e){for(f||h.putBuffer(e);h.length()>=8;)g([[5,s],[1,u],[6,s],[1,u],[5,s]])},finish:function(e){var t=!0;if(o)if(e)t=e(8,h,!o);else{var r=8===h.length()?8:8-h.length();h.fillWithByte(r,r)}if(t&&(f=!0,v.update()),!o&&(t=0===h.length()))if(e)t=e(8,p,!o);else{var n=p.length(),i=p.at(n-1);i>n?t=!1:p.truncate(i)}return t}}};e.rc2.startEncrypting=function(t,r,n){var i=e.rc2.createEncryptionCipher(t,128);return i.start(r,n),i},e.rc2.createEncryptionCipher=function(e,t){return a(e,t,!0)},e.rc2.startDecrypting=function(t,r,n){var i=e.rc2.createDecryptionCipher(t,128);return i.start(r,n),i},e.rc2.createDecryptionCipher=function(e,t){return a(e,t,!1)}}var t="rc2";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rc2",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new t(null)}function n(e,t,r,n,i,a){for(;--a>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i}function i(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*o;u=o*u+((32767&l)<<15)+r.data[n]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),r.data[n++]=1073741823&u}return i}function a(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*o;u=o*u+((16383&l)<<14)+r.data[n]+i,i=(u>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return i}function o(e){return at.charAt(e)}function s(e,t){var r=ot[e.charCodeAt(t)];return null==r?-1:r}function u(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function c(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function l(e){var t=r();return t.fromInt(e),t}function f(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2}this.t=0,this.s=0;for(var i=e.length,a=!1,o=0;--i>=0;){var u=8==n?255&e[i]:s(e,i);u<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==o?this.data[this.t++]=u:o+n>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this.data[this.t++]=u>>this.DB-o):this.data[this.t-1]|=u<<o,o+=n,o>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&t.ZERO.subTo(this,this)}function h(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function p(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",s=this.t,u=this.DB-s*this.DB%t;if(s-- >0)for(u<this.DB&&(r=this.data[s]>>u)>0&&(i=!0,a=o(r));s>=0;)u<t?(r=(this.data[s]&(1<<u)-1)<<t-u,r|=this.data[--s]>>(u+=this.DB-t)):(r=this.data[s]>>(u-=t)&n,u<=0&&(u+=this.DB,--s)),r>0&&(i=!0),i&&(a+=o(r));return i?a:"0"}function d(){var e=r();return t.ZERO.subTo(this,e),e}function y(){return this.s<0?this.negate():this}function g(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function v(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function m(){return this.t<=0?0:this.DB*(this.t-1)+v(this.data[this.t-1]^this.s&this.DM)}function E(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function C(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function b(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|s,s=(this.data[r]&a)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function A(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)return void(t.t=0);var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&a)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function S(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function B(e,r){var n=this.abs(),i=e.abs(),a=n.t;for(r.t=a+i.t;--a>=0;)r.data[a]=0;for(a=0;a<i.t;++a)r.data[a+n.t]=n.am(0,i.data[a],r,a,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)}function w(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function T(e,n,i){var a=e.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),u=this.s,c=e.s,l=this.DB-v(a.data[a.t-1]);l>0?(a.lShiftTo(l,s),o.lShiftTo(l,i)):(a.copyTo(s),o.copyTo(i));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,m=i.t,E=m-f,C=null==n?r():n;for(s.dlShiftTo(E,C),i.compareTo(C)>=0&&(i.data[i.t++]=1,i.subTo(C,i)),t.ONE.dlShiftTo(f,C),C.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--E>=0;){var b=i.data[--m]==h?this.DM:Math.floor(i.data[m]*d+(i.data[m-1]+g)*y);if((i.data[m]+=s.am(0,b,i,E,0,f))<b)for(s.dlShiftTo(E,C),i.subTo(C,i);i.data[m]<--b;)i.subTo(C,i)}null!=n&&(i.drShiftTo(f,n),u!=c&&t.ZERO.subTo(n,n)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&t.ZERO.subTo(i,i)}}}function I(e){var n=r();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n}function _(e){this.m=e}function k(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function D(e){return e}function R(e){e.divRemTo(this.m,null,e)}function N(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function L(e,t){e.squareTo(t),this.reduce(t)}function x(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;
var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function U(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function F(e){var n=r();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),n}function O(e){var t=r();return e.copyTo(t),this.reduce(t),t}function P(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function M(e,t){e.squareTo(t),this.reduce(t)}function V(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function j(){return 0==(this.t>0?1&this.data[0]:this.s)}function K(e,n){if(e>4294967295||e<1)return t.ONE;var i=r(),a=r(),o=n.convert(this),s=v(e)-1;for(o.copyTo(i);--s>=0;)if(n.sqrTo(i,a),(e&1<<s)>0)n.mulTo(a,o,i);else{var u=i;i=a,a=u}return n.revert(i)}function q(e,t){var r;return r=e<256||t.isEven()?new _(t):new U(t),this.exp(e,r)}function H(){var e=r();return this.copyTo(e),e}function z(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function G(){return 0==this.t?this.s:this.data[0]<<24>>24}function Q(){return 0==this.t?this.s:this.data[0]<<16>>16}function W(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function Y(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=l(n),a=r(),o=r(),s="";for(this.divRemTo(i,a,o);a.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,a.divRemTo(i,a,o);return o.intValue().toString(e)+s}function Z(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),i=Math.pow(r,n),a=!1,o=0,u=0,c=0;c<e.length;++c){var l=s(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(u=r*u+l,++o>=n&&(this.dMultiply(i),this.dAddOffset(u,0),o=0,u=0))}o>0&&(this.dMultiply(Math.pow(r,o)),this.dAddOffset(u,0)),a&&t.ZERO.subTo(this,this)}function J(e,r,n){if("number"==typeof r)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),oe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,a=7&e;i.length=(e>>3)+1,r.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}}function $(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function ee(e){return 0==this.compareTo(e)}function te(e){return this.compareTo(e)<0?this:e}function re(e){return this.compareTo(e)>0?this:e}function ne(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function ie(e,t){return e&t}function ae(e){var t=r();return this.bitwiseTo(e,ie,t),t}function oe(e,t){return e|t}function se(e){var t=r();return this.bitwiseTo(e,oe,t),t}function ue(e,t){return e^t}function ce(e){var t=r();return this.bitwiseTo(e,ue,t),t}function le(e,t){return e&~t}function fe(e){var t=r();return this.bitwiseTo(e,le,t),t}function he(){for(var e=r(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function pe(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function de(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ye(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ge(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+ye(this.data[e]);return this.s<0?this.t*this.DB:-1}function ve(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function me(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=ve(this.data[r]^t);return e}function Ee(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function Ce(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n}function be(e){return this.changeBit(e,oe)}function Ae(e){return this.changeBit(e,le)}function Se(e){return this.changeBit(e,ue)}function Be(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function we(e){var t=r();return this.addTo(e,t),t}function Te(e){var t=r();return this.subTo(e,t),t}function Ie(e){var t=r();return this.multiplyTo(e,t),t}function _e(e){var t=r();return this.divRemTo(e,t,null),t}function ke(e){var t=r();return this.divRemTo(e,null,t),t}function De(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)}function Re(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Ne(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Le(){}function xe(e){return e}function Ue(e,t,r){e.multiplyTo(t,r)}function Fe(e,t){e.squareTo(t)}function Oe(e){return this.exp(e,new Le)}function Pe(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Me(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Ve(e){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function je(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t}function Ke(e){return e}function qe(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function He(e,t){e.squareTo(t),this.reduce(t)}function ze(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Ge(e,t){var n,i,a=e.bitLength(),o=l(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new _(t):t.isEven()?new Ve(t):new U(t);var s=new Array,u=3,c=n-1,f=(1<<n)-1;if(s[1]=i.convert(this),n>1){var h=r();for(i.sqrTo(s[1],h);u<=f;)s[u]=r(),i.mulTo(h,s[u-2],s[u]),u+=2}var p,d,y=e.t-1,g=!0,m=r();for(a=v(e.data[y])-1;y>=0;){for(a>=c?p=e.data[y]>>a-c&f:(p=(e.data[y]&(1<<a+1)-1)<<c-a,y>0&&(p|=e.data[y-1]>>this.DB+a-c)),u=n;0==(1&p);)p>>=1,--u;if((a-=u)<0&&(a+=this.DB,--y),g)s[p].copyTo(o),g=!1;else{for(;u>1;)i.sqrTo(o,m),i.sqrTo(m,o),u-=2;u>0?i.sqrTo(o,m):(d=o,o=m,m=d),i.mulTo(m,s[p],o)}for(;y>=0&&0==(e.data[y]&1<<a);)i.sqrTo(o,m),d=o,o=m,m=d,--a<0&&(a=this.DB-1,--y)}return i.revert(o)}function Qe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function We(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function Xe(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var n=e.clone(),i=this.clone(),a=l(1),o=l(0),s=l(0),u=l(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),r?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),r&&a.subTo(s,a),o.subTo(u,o)):(i.subTo(n,i),r&&s.subTo(a,s),u.subTo(o,u))}return 0!=i.compareTo(t.ONE)?t.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}function Ye(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=st[st.length-1]){for(t=0;t<st.length;++t)if(r.data[0]==st[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<st.length;){for(var n=st[t],i=t+1;i<st.length&&n<ut;)n*=st[i++];for(n=r.modInt(n);t<i;)if(n%st[t++]==0)return!1}return r.millerRabin(e)}function Ze(e){var r=this.subtract(t.ONE),n=r.getLowestSetBit();if(n<=0)return!1;for(var i,a=r.shiftRight(n),o=Je(),s=0;s<e;++s){do i=new t(this.bitLength(),o);while(i.compareTo(t.ONE)<=0||i.compareTo(r)>=0);var u=i.modPow(a,this);if(0!=u.compareTo(t.ONE)&&0!=u.compareTo(r)){for(var c=1;c++<n&&0!=u.compareTo(r);)if(u=u.modPowInt(2,this),0==u.compareTo(t.ONE))return!1;if(0!=u.compareTo(r))return!1}}return!0}function Je(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}var $e,et=0xdeadbeefcafe,tt=15715070==(16777215&et);"undefined"==typeof navigator?(t.prototype.am=a,$e=28):tt&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=i,$e=30):tt&&"Netscape"!=navigator.appName?(t.prototype.am=n,$e=26):(t.prototype.am=a,$e=28),t.prototype.DB=$e,t.prototype.DM=(1<<$e)-1,t.prototype.DV=1<<$e;var rt=52;t.prototype.FV=Math.pow(2,rt),t.prototype.F1=rt-$e,t.prototype.F2=2*$e-rt;var nt,it,at="0123456789abcdefghijklmnopqrstuvwxyz",ot=new Array;for(nt="0".charCodeAt(0),it=0;it<=9;++it)ot[nt++]=it;for(nt="a".charCodeAt(0),it=10;it<36;++it)ot[nt++]=it;for(nt="A".charCodeAt(0),it=10;it<36;++it)ot[nt++]=it;_.prototype.convert=k,_.prototype.revert=D,_.prototype.reduce=R,_.prototype.mulTo=N,_.prototype.sqrTo=L,U.prototype.convert=F,U.prototype.revert=O,U.prototype.reduce=P,U.prototype.mulTo=V,U.prototype.sqrTo=M,t.prototype.copyTo=u,t.prototype.fromInt=c,t.prototype.fromString=f,t.prototype.clamp=h,t.prototype.dlShiftTo=E,t.prototype.drShiftTo=C,t.prototype.lShiftTo=b,t.prototype.rShiftTo=A,t.prototype.subTo=S,t.prototype.multiplyTo=B,t.prototype.squareTo=w,t.prototype.divRemTo=T,t.prototype.invDigit=x,t.prototype.isEven=j,t.prototype.exp=K,t.prototype.toString=p,t.prototype.negate=d,t.prototype.abs=y,t.prototype.compareTo=g,t.prototype.bitLength=m,t.prototype.mod=I,t.prototype.modPowInt=q,t.ZERO=l(0),t.ONE=l(1),Le.prototype.convert=xe,Le.prototype.revert=xe,Le.prototype.mulTo=Ue,Le.prototype.sqrTo=Fe,Ve.prototype.convert=je,Ve.prototype.revert=Ke,Ve.prototype.reduce=qe,Ve.prototype.mulTo=ze,Ve.prototype.sqrTo=He;var st=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ut=(1<<26)/st[st.length-1];t.prototype.chunkSize=W,t.prototype.toRadix=Y,t.prototype.fromRadix=Z,t.prototype.fromNumber=J,t.prototype.bitwiseTo=ne,t.prototype.changeBit=Ce,t.prototype.addTo=Be,t.prototype.dMultiply=Re,t.prototype.dAddOffset=Ne,t.prototype.multiplyLowerTo=Pe,t.prototype.multiplyUpperTo=Me,t.prototype.modInt=We,t.prototype.millerRabin=Ze,t.prototype.clone=H,t.prototype.intValue=z,t.prototype.byteValue=G,t.prototype.shortValue=Q,t.prototype.signum=X,t.prototype.toByteArray=$,t.prototype.equals=ee,t.prototype.min=te,t.prototype.max=re,t.prototype.and=ae,t.prototype.or=se,t.prototype.xor=ce,t.prototype.andNot=fe,t.prototype.not=he,t.prototype.shiftLeft=pe,t.prototype.shiftRight=de,t.prototype.getLowestSetBit=ge,t.prototype.bitCount=me,t.prototype.testBit=Ee,t.prototype.setBit=be,t.prototype.clearBit=Ae,t.prototype.flipBit=Se,t.prototype.add=we,t.prototype.subtract=Te,t.prototype.multiply=Ie,t.prototype.divide=_e,t.prototype.remainder=ke,t.prototype.divideAndRemainder=De,t.prototype.modPow=Ge,t.prototype.modInverse=Xe,t.prototype.pow=Oe,t.prototype.gcd=Qe,t.prototype.isProbablePrime=Ye,e.jsbn=e.jsbn||{},e.jsbn.BigInteger=t}var t="jsbn";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/jsbn",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r,n){n||(n=e.md.sha1.create());for(var i="",a=Math.ceil(r/n.digestLength),o=0;o<a;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(t+s),i+=n.digest().getBytes()}return i.substring(0,r)}var r=e.pkcs1=e.pkcs1||{};r.encode_rsa_oaep=function(r,n,i){var a,o,s,u;"string"==typeof i?(a=i,o=arguments[3]||void 0,s=arguments[4]||void 0):i&&(a=i.label||void 0,o=i.seed||void 0,s=i.md||void 0,i.mgf1&&i.mgf1.md&&(u=i.mgf1.md)),s?s.start():s=e.md.sha1.create(),u||(u=s);var c=Math.ceil(r.n.bitLength()/8),l=c-2*s.digestLength-2;if(n.length>l){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=n.length,f.maxLength=l,f}a||(a=""),s.update(a,"raw");for(var h=s.digest(),p="",d=l-n.length,y=0;y<d;y++)p+="\0";var g=h.getBytes()+p+""+n;if(o){if(o.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=o.length,f.digestLength=s.digestLength,f}}else o=e.random.getBytes(s.digestLength);var v=t(o,c-s.digestLength-1,u),m=e.util.xorBytes(g,v,g.length),E=t(m,s.digestLength,u),C=e.util.xorBytes(o,E,o.length);return"\0"+C+m},r.decode_rsa_oaep=function(r,n,i){var a,o,s;"string"==typeof i?(a=i,o=arguments[3]||void 0):i&&(a=i.label||void 0,o=i.md||void 0,i.mgf1&&i.mgf1.md&&(s=i.mgf1.md));var u=Math.ceil(r.n.bitLength()/8);if(n.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=n.length,c.expectedLength=u,c}if(void 0===o?o=e.md.sha1.create():o.start(),s||(s=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var l=o.digest().getBytes(),f=n.charAt(0),h=n.substring(1,o.digestLength+1),p=n.substring(1+o.digestLength),d=t(p,o.digestLength,s),y=e.util.xorBytes(h,d,h.length),g=t(y,u-o.digestLength-1,s),v=e.util.xorBytes(p,g,p.length),m=v.substring(0,o.digestLength),c="\0"!==f,E=0;E<o.digestLength;++E)c|=l.charAt(E)!==m.charAt(E);for(var C=1,b=o.digestLength,A=o.digestLength;A<v.length;A++){var S=v.charCodeAt(A),B=1&S^1,w=C?65534:0;c|=S&w,C&=B,b+=C}if(c||1!==v.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return v.substring(b+1)}}var t="pkcs1";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs1",["require","module","./util","./random","./sha1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i,a){return"workers"in i?n(e,t,i,a):r(e,t,i,a)}function r(t,n,o,s){var c=i(t,n),l=0,f=a(c.bitLength());"millerRabinTests"in o&&(f=o.millerRabinTests);var h=10;"maxBlockTime"in o&&(h=o.maxBlockTime);var p=+new Date;do{if(c.bitLength()>t&&(c=i(t,n)),c.isProbablePrime(f))return s(null,c);c.dAddOffset(u[l++%8],0)}while(h<0||+new Date-p<h);e.util.setImmediate(function(){r(t,n,o,s)})}function n(t,n,a,o){function u(){function e(e){if(!d){--u;var a=e.data;if(a.found){for(var l=0;l<r.length;++l)r[l].terminate();return d=!0,o(null,new s(a.prime,16))}c.bitLength()>t&&(c=i(t,n));var p=c.toString(16);e.target.postMessage({hex:p,workLoad:f}),c.dAddOffset(h,0)}}l=Math.max(1,l);for(var r=[],a=0;a<l;++a)r[a]=new Worker(p);for(var u=l,a=0;a<l;++a)r[a].addEventListener("message",e);var d=!1}if("undefined"==typeof Worker)return r(t,n,a,o);var c=i(t,n),l=a.workers,f=a.workLoad||100,h=30*f/8,p=a.workerScript||"forge/prime.worker.js";return l===-1?e.util.estimateCores(function(e,t){e&&(t=2),l=t-1,u()}):void u()}function i(e,t){var r=new s(e,t),n=e-1;return r.testBit(n)||r.bitwiseTo(s.ONE.shiftLeft(n),l,r),r.dAddOffset(31-r.mod(c).byteValue(),0),r}function a(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}if(!e.prime){var o=e.prime=e.prime||{},s=e.jsbn.BigInteger,u=[6,4,2,4,2,4,6,2],c=new s(null);c.fromInt(30);var l=function(e,t){return e|t};o.generateProbablePrime=function(r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{};var a=n.algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var o=n.prng||e.random,s={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===a.name)return t(r,s,a.options,i);throw new Error("Invalid prime generation algorithm: "+a.name)}}}var t="prime";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/prime",["require","module","./util","./jsbn","./random"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r,n){var i=e.util.createBuffer(),a=Math.ceil(r.n.bitLength()/8);if(t.length>a-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=a-11,o}i.putByte(0),i.putByte(n);var s,u=a-3-t.length;if(0===n||1===n){s=0===n?0:255;for(var c=0;c<u;++c)i.putByte(s)}else for(;u>0;){for(var l=0,f=e.random.getBytes(u),c=0;c<u;++c)s=f.charCodeAt(c),0===s?++l:i.putByte(s);u=l}return i.putByte(0),i.putBytes(t),i}function r(t,r,n,i){var a=Math.ceil(r.n.bitLength()/8),o=e.util.createBuffer(t),s=o.getByte(),u=o.getByte();if(0!==s||n&&0!==u&&1!==u||!n&&2!=u||n&&0===u&&"undefined"==typeof i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=a-3-i;for(var l=0;l<c;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===u)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}var f=o.getByte();if(0!==f||c!==a-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function n(t,r,n){function i(){a(t.pBits,function(e,r){return e?n(e):(t.p=r,null!==t.q?o(e,t.q):void a(t.qBits,o))})}function a(t,r){e.prime.generateProbablePrime(t,s,r)}function o(e,r){if(e)return n(e);if(t.q=r,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(c.ONE).gcd(t.e).compareTo(c.ONE))return t.p=null,void i();if(0!==t.q.subtract(c.ONE).gcd(t.e).compareTo(c.ONE))return t.q=null,void a(t.qBits,o);if(t.p1=t.p.subtract(c.ONE),t.q1=t.q.subtract(c.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(c.ONE))return t.p=t.q=null,void i();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,o);var u=t.e.modInverse(t.phi);t.keys={privateKey:f.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:f.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}"function"==typeof r&&(n=r,r={}),r=r||{};var s={algorithm:{name:r.algorithm||"PRIMEINC",options:{workers:r.workers||2,workLoad:r.workLoad||100,workerScript:r.workerScript}}};"prng"in r&&(s.prng=r.prng),i()}function i(t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=e.util.hexToBytes(r);return n.length>1&&(0===n.charCodeAt(0)&&0===(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128===(128&n.charCodeAt(1)))?n.substr(1):n}function a(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function o(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function s(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function u(t){for(var r=e.util.hexToBytes(t.toString(16)),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}if("undefined"==typeof c)var c=e.jsbn.BigInteger;var l=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var f=e.pki,h=[6,4,2,4,2,4,6,2],p={name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},y={name:"RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},v=function(e){var t;if(e.algorithm in f.oids){t=f.oids[e.algorithm];var r=l.oidToDer(t).getBytes(),n=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),i=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);i.value.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,r)),i.value.push(l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,""));var a=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,e.digest().getBytes());return n.value.push(i),n.value.push(a),l.toDer(n).getBytes()}var o=new Error("Unknown message digest algorithm.");throw o.algorithm=e.algorithm,o},m=function(t,r,n){if(n)return t.modPow(r.e,r.n);if(!r.p||!r.q)return t.modPow(r.d,r.n);r.dP||(r.dP=r.d.mod(r.p.subtract(c.ONE))),r.dQ||(r.dQ=r.d.mod(r.q.subtract(c.ONE))),r.qInv||(r.qInv=r.q.modInverse(r.p));var i;do i=new c(e.util.bytesToHex(e.random.getBytes(r.n.bitLength()/8)),16);while(i.compareTo(r.n)>=0||!i.gcd(r.n).equals(c.ONE));t=t.multiply(i.modPow(r.e,r.n)).mod(r.n);for(var a=t.mod(r.p).modPow(r.dP,r.p),o=t.mod(r.q).modPow(r.dQ,r.q);a.compareTo(o)<0;)a=a.add(r.p);var s=a.subtract(o).multiply(r.qInv).mod(r.p).multiply(r.q).add(o);return s=s.multiply(i.modInverse(r.n)).mod(r.n)};f.rsa.encrypt=function(r,n,i){var a,o=i,s=Math.ceil(n.n.bitLength()/8);i!==!1&&i!==!0?(o=2===i,a=t(r,n,i)):(a=e.util.createBuffer(),a.putBytes(r));for(var u=new c(a.toHex(),16),l=m(u,n,o),f=l.toString(16),h=e.util.createBuffer(),p=s-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(e.util.hexToBytes(f)),h.getBytes()},f.rsa.decrypt=function(t,n,i,a){var o=Math.ceil(n.n.bitLength()/8);if(t.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=o,s}var u=new c(e.util.createBuffer(t).toHex(),16);if(u.compareTo(n.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=m(u,n,i),f=l.toString(16),h=e.util.createBuffer(),p=o-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(e.util.hexToBytes(f)),a!==!1?r(h.getBytes(),n,i):h.getBytes()},f.rsa.createKeyPairGenerationState=function(t,r,n){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048,n=n||{};var i,a=n.prng||e.random,o={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},s=n.algorithm||"PRIMEINC";if("PRIMEINC"!==s)throw new Error("Invalid key generation algorithm: "+s);return i={algorithm:s,state:0,bits:t,rng:o,eInt:r||65537,e:new c(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt),i},f.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new c(null);r.fromInt(30);for(var n,i=0,o=function(e,t){return e|t},s=+new Date,u=0;null===e.keys&&(t<=0||u<t);){if(0===e.state){var l=null===e.p?e.pBits:e.qBits,p=l-1;0===e.pqState?(e.num=new c(l,e.rng),e.num.testBit(p)||e.num.bitwiseTo(c.ONE.shiftLeft(p),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(a(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(h[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(c.ONE).gcd(e.e).compareTo(c.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(c.ONE),e.q1=e.q.subtract(c.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(c.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var d=e.e.modInverse(e.phi);e.keys={privateKey:f.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:f.rsa.setPublicKey(e.n,e.e)}}n=+new Date,u+=n-s,s=n}return null!==e.keys},f.rsa.generateKeyPair=function(t,r,i,a){if(1===arguments.length?"object"==typeof t?(i=t,t=void 0):"function"==typeof t&&(a=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof r?(a=r,r=void 0):"number"!=typeof r&&(i=r,r=void 0):(i=t,a=r,t=void 0,r=void 0):3===arguments.length&&("number"==typeof r?"function"==typeof i&&(a=i,i=void 0):(a=i,i=r,r=void 0)),i=i||{},void 0===t&&(t=i.bits||2048),void 0===r&&(r=i.e||65537),!e.disableNativeCode&&a&&t>=256&&t<=16384&&(65537===r||3===r)){if(o("generateKey")&&o("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:u(r),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).catch(function(e){a(e)}).then(function(t){if(t){var r=f.privateKeyFromAsn1(l.fromDer(e.util.createBuffer(t)));a(null,{privateKey:r,publicKey:f.setRsaPublicKey(r.n,r.e)})}});if(s("generateKey")&&s("exportKey")){var c=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:u(r),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var r=t.target.result,n=window.msCrypto.subtle.exportKey("pkcs8",r.privateKey);n.oncomplete=function(t){var r=t.target.result,n=f.privateKeyFromAsn1(l.fromDer(e.util.createBuffer(r)));a(null,{privateKey:n,publicKey:f.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){a(e)}},void(c.onerror=function(e){a(e)})}}var h=f.rsa.createKeyPairGenerationState(t,r,i);return a?void n(h,i,a):(f.rsa.stepKeyPairGenerationState(h,0),h.keys)},f.setRsaPublicKey=f.rsa.setPublicKey=function(n,i){var a={n:n,e:i};return a.encrypt=function(r,n,i){if("string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===n)n={encode:function(e,r,n){return t(e,r,2).getBytes()}};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={encode:function(t,r){return e.pkcs1.encode_rsa_oaep(r,t,i)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(e){return e}};else if("string"==typeof n)throw new Error('Unsupported encryption scheme: "'+n+'".');var o=n.encode(r,a,!0);return f.rsa.encrypt(o,a,!0)},a.verify=function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){t=r(t,a,!0);var n=l.fromDer(t);return e===n.value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return t=r(t,a,!0),e===t}});var i=f.rsa.decrypt(t,a,!0,!1);return n.verify(e,i,a.n.bitLength())},a},f.setRsaPrivateKey=f.rsa.setPrivateKey=function(t,n,i,a,o,s,u,c){var l={n:t,e:n,d:i,p:a,q:o,dP:s,dQ:u,qInv:c};return l.decrypt=function(t,n,i){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5");var a=f.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===n)n={decode:r};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={decode:function(t,r){return e.pkcs1.decode_rsa_oaep(r,t,i)}};else{if(["RAW","NONE","NULL",null].indexOf(n)===-1)throw new Error('Unsupported encryption scheme: "'+n+'".');
n={decode:function(e){return e}}}return n.decode(a,l,!1)},l.sign=function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:v},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return f.rsa.encrypt(n,l,r)},l},f.wrapRsaPrivateKey=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(e).getBytes())])},f.privateKeyFromAsn1=function(t){var r={},n=[];if(l.validate(t,p,r,n)&&(t=l.fromDer(e.util.createBuffer(r.privateKey))),r={},n=[],!l.validate(t,d,r,n)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=n,i}var a,o,s,u,h,y,g,v;return a=e.util.createBuffer(r.privateKeyModulus).toHex(),o=e.util.createBuffer(r.privateKeyPublicExponent).toHex(),s=e.util.createBuffer(r.privateKeyPrivateExponent).toHex(),u=e.util.createBuffer(r.privateKeyPrime1).toHex(),h=e.util.createBuffer(r.privateKeyPrime2).toHex(),y=e.util.createBuffer(r.privateKeyExponent1).toHex(),g=e.util.createBuffer(r.privateKeyExponent2).toHex(),v=e.util.createBuffer(r.privateKeyCoefficient).toHex(),f.setRsaPrivateKey(new c(a,16),new c(o,16),new c(s,16),new c(u,16),new c(h,16),new c(y,16),new c(g,16),new c(v,16))},f.privateKeyToAsn1=f.privateKeyToRSAPrivateKey=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.e)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.d)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.p)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.q)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.dP)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.dQ)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.qInv))])},f.publicKeyFromAsn1=function(t){var r={},n=[];if(l.validate(t,g,r,n)){var i=l.derToOid(r.publicKeyOid);if(i!==f.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=i,a}t=r.rsaPublicKey}if(n=[],!l.validate(t,y,r,n)){var a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=n,a}var o=e.util.createBuffer(r.publicKeyModulus).toHex(),s=e.util.createBuffer(r.publicKeyExponent).toHex();return f.setRsaPublicKey(new c(o,16),new c(s,16))},f.publicKeyToAsn1=f.publicKeyToSubjectPublicKeyInfo=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,[f.publicKeyToRSAPublicKey(e)])])},f.publicKeyToRSAPublicKey=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(e.e))])}}var t="rsa";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rsa",["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){return e.start().update(t).digest().getBytes()}function r(e){var t;if(e){if(t=s.oids[o.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return n(t)}function n(t){var r=e.md;switch(t){case"hmacWithSHA224":r=e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return r[t].create()}function i(t,r,n,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,r.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.util.hexToBytes(n.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),a}if("undefined"==typeof a)var a=e.jsbn.BigInteger;var o=e.asn1,s=e.pki=e.pki||{};s.pbe=e.pbe=e.pbe||{};var u=s.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},f={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};s.encryptPrivateKeyInfo=function(t,r,a){a=a||{},a.saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||"aes128",a.prfAlgorithm=a.prfAlgorithm||"sha1";var c,l,f,h=e.random.getBytesSync(a.saltSize),p=a.count,d=o.integerToDer(p);if(0===a.algorithm.indexOf("aes")||"des"===a.algorithm){var y,g,v;switch(a.algorithm){case"aes128":c=16,y=16,g=u["aes128-CBC"],v=e.aes.createEncryptionCipher;break;case"aes192":c=24,y=16,g=u["aes192-CBC"],v=e.aes.createEncryptionCipher;break;case"aes256":c=32,y=16,g=u["aes256-CBC"],v=e.aes.createEncryptionCipher;break;case"des":c=8,y=8,g=u.desCBC,v=e.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=a.algorithm,m}var E="hmacWith"+a.prfAlgorithm.toUpperCase(),C=n(E),b=e.pkcs5.pbkdf2(r,h,p,c,C),A=e.random.getBytesSync(y),S=v(b);S.start(A),S.update(o.toDer(t)),S.finish(),f=S.output.getBytes();var B=i(h,d,c,E);l=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.pkcs5PBES2).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.pkcs5PBKDF2).getBytes()),B]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(g).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,A)])])])}else{if("3des"!==a.algorithm){var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=a.algorithm,m}c=24;var w=new e.util.ByteBuffer(h),b=s.pbe.generatePkcs12Key(r,w,1,p,c),A=s.pbe.generatePkcs12Key(r,w,2,p,c),S=e.des.createEncryptionCipher(b);S.start(A),S.update(o.toDer(t)),S.finish(),f=S.output.getBytes(),l=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,d.getBytes())])])}var T=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[l,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,f)]);return T},s.decryptPrivateKeyInfo=function(t,r){var n=null,i={},a=[];if(!o.validate(t,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var l=o.derToOid(i.encryptionOid),f=s.pbe.getCipher(l,i.encryptionParams,r),h=e.util.createBuffer(i.encryptedData);return f.update(h),f.finish()&&(n=o.fromDer(f.output)),n},s.encryptedPrivateKeyToPem=function(t,r){var n={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(t).getBytes()};return e.pem.encode(n,{maxline:r})},s.encryptedPrivateKeyFromPem=function(t){var r=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==r.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=r.type,n}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(r.body)},s.encryptRsaPrivateKey=function(t,r,n){if(n=n||{},!n.legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return i=s.encryptPrivateKeyInfo(i,r,n),s.encryptedPrivateKeyToPem(i)}var a,u,c,l;switch(n.algorithm){case"aes128":a="AES-128-CBC",c=16,u=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,u=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,u=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,u=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,u=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw f.algorithm=n.algorithm,f}var h=e.pbe.opensslDeriveBytes(r,u.substr(0,8),c),p=l(h);p.start(u),p.update(o.toDer(s.privateKeyToAsn1(t))),p.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:e.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return e.pem.encode(d)},s.decryptRsaPrivateKey=function(t,r){var n=null,i=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(i.procType&&"ENCRYPTED"===i.procType.type){var u,c;switch(i.dekInfo.algorithm){case"DES-CBC":u=8,c=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":u=24,c=e.des.createDecryptionCipher;break;case"AES-128-CBC":u=16,c=e.aes.createDecryptionCipher;break;case"AES-192-CBC":u=24,c=e.aes.createDecryptionCipher;break;case"AES-256-CBC":u=32,c=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":u=5,c=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":u=8,c=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":u=16,c=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:var a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw a.algorithm=i.dekInfo.algorithm,a}var l=e.util.hexToBytes(i.dekInfo.parameters),f=e.pbe.opensslDeriveBytes(r,l.substr(0,8),u),h=c(f);if(h.start(l),h.update(e.util.createBuffer(i.body)),!h.finish())return n;n=h.output.getBytes()}else n=i.body;return n="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(n),r):o.fromDer(n),null!==n&&(n=s.privateKeyFromAsn1(n)),n},s.pbe.generatePkcs12Key=function(t,r,n,i,a,o){var s,u;"undefined"!=typeof o&&null!==o||(o=e.md.sha1.create());var c=o.digestLength,l=o.blockLength,f=new e.util.ByteBuffer,h=new e.util.ByteBuffer;if(null!==t&&void 0!==t){for(u=0;u<t.length;u++)h.putInt16(t.charCodeAt(u));h.putInt16(0)}var p=h.length(),d=r.length(),y=new e.util.ByteBuffer;y.fillWithByte(n,l);var g=l*Math.ceil(d/l),v=new e.util.ByteBuffer;for(u=0;u<g;u++)v.putByte(r.at(u%d));var m=l*Math.ceil(p/l),E=new e.util.ByteBuffer;for(u=0;u<m;u++)E.putByte(h.at(u%p));var C=v;C.putBuffer(E);for(var b=Math.ceil(a/c),A=1;A<=b;A++){var S=new e.util.ByteBuffer;S.putBytes(y.bytes()),S.putBytes(C.bytes());for(var B=0;B<i;B++)o.start(),o.update(S.getBytes()),S=o.digest();var w=new e.util.ByteBuffer;for(u=0;u<l;u++)w.putByte(S.at(u%c));var T=Math.ceil(d/l)+Math.ceil(p/l),I=new e.util.ByteBuffer;for(s=0;s<T;s++){var _=new e.util.ByteBuffer(C.getBytes(l)),k=511;for(u=w.length()-1;u>=0;u--)k>>=8,k+=w.at(u)+_.at(u),_.setAt(u,255&k);I.putBuffer(_)}C=I,f.putBuffer(S)}return f.truncate(f.length()-a),f},s.pbe.getCipher=function(e,t,r){switch(e){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(e,t,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(t,n,i){var a={},u=[];if(!o.validate(n,l,a,u)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=u,c}if(t=o.derToOid(a.kdfOid),t!==s.oids.pkcs5PBKDF2){var c=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw c.oid=t,c.supportedOids=["pkcs5PBKDF2"],c}if(t=o.derToOid(a.encOid),t!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids.desCBC){var c=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw c.oid=t,c.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],c}var f=a.kdfSalt,h=e.util.createBuffer(a.kdfIterationCount);h=h.getInt(h.length()<<3);var p,d;switch(s.oids[t]){case"aes128-CBC":p=16,d=e.aes.createDecryptionCipher;break;case"aes192-CBC":p=24,d=e.aes.createDecryptionCipher;break;case"aes256-CBC":p=32,d=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":p=24,d=e.des.createDecryptionCipher;break;case"desCBC":p=8,d=e.des.createDecryptionCipher}var y=r(a.prfOid),g=e.pkcs5.pbkdf2(i,f,h,p,y),v=a.encIv,m=d(g);return m.start(v),m},s.pbe.getCipherForPKCS12PBE=function(t,n,i){var a={},u=[];if(!o.validate(n,f,a,u)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=u,c}var l=e.util.createBuffer(a.salt),h=e.util.createBuffer(a.iterations);h=h.getInt(h.length()<<3);var p,d,y;switch(t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:p=24,d=8,y=e.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:p=5,d=8,y=function(t,r){var n=e.rc2.createDecryptionCipher(t,40);return n.start(r,null),n};break;default:var c=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw c.oid=t,c}var g=r(a.prfOid),v=s.pbe.generatePkcs12Key(i,l,1,h,p,g);g.start();var m=s.pbe.generatePkcs12Key(i,l,2,h,d,g);return y(v,m)},s.pbe.opensslDeriveBytes=function(r,n,i,a){"undefined"!=typeof a&&null!==a||(a=e.md.md5.create()),null===n&&(n="");for(var o=[t(a,r+n)],s=16,u=1;s<i;++u,s+=16)o.push(t(a,o[u-1]+r+n));return o.join("").substr(0,i)}}var t="pbe";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbe",["require","module","./aes","./asn1","./des","./md","./oids","./pem","./pbkdf2","./random","./rc2","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,r=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var a={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[a]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var t="pkcs7asn1";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7asn1",["require","module","./asn1","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{};var t=e.mgf.mgf1=e.mgf1=e.mgf1||{};t.create=function(t){var r={generate:function(r,n){for(var i=new e.util.ByteBuffer,a=Math.ceil(n/t.digestLength),o=0;o<a;o++){var s=new e.util.ByteBuffer;s.putInt32(o),t.start(),t.update(r+s.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return r}}var t="mgf1";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}var t="mgf";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf",["require","module","./mgf1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.pss=e.pss||{};t.create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var r=t.md,n=t.mgf,i=r.digestLength,a=t.salt||null;"string"==typeof a&&(a=e.util.createBuffer(a));var o;if("saltLength"in t)o=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");o=a.length()}if(null!==a&&a.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||e.random,u={};return u.encode=function(t,u){var c,l=u-1,f=Math.ceil(l/8),h=t.digest().getBytes();if(f<i+o+2)throw new Error("Message is too long to encrypt.");var p;p=null===a?s.getBytesSync(o):a.bytes();var d=new e.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(p),r.start(),r.update(d.getBytes());var y=r.digest().getBytes(),g=new e.util.ByteBuffer;g.fillWithByte(0,f-o-i-2),g.putByte(1),g.putBytes(p);var v=g.getBytes(),m=f-i-1,E=n.generate(y,m),C="";for(c=0;c<m;c++)C+=String.fromCharCode(v.charCodeAt(c)^E.charCodeAt(c));var b=65280>>8*f-l&255;return C=String.fromCharCode(C.charCodeAt(0)&~b)+C.substr(1),C+y+String.fromCharCode(188)},u.verify=function(t,a,s){var u,c=s-1,l=Math.ceil(c/8);if(a=a.substr(-l),l<i+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,h=a.substr(0,f),p=a.substr(f,i),d=65280>>8*l-c&255;if(0!==(h.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var y=n.generate(p,f),g="";for(u=0;u<f;u++)g+=String.fromCharCode(h.charCodeAt(u)^y.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~d)+g.substr(1);var v=l-i-o-2;for(u=0;u<v;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=g.substr(-o),E=new e.util.ByteBuffer;E.fillWithByte(0,8),E.putBytes(t),E.putBytes(m),r.start(),r.update(E.getBytes());var C=r.digest().getBytes();return p===C},u}}var t="pss";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pss",["require","module","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}function r(t){for(var r,n,i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),a=t.attributes,o=0;o<a.length;++o){r=a[o];var u=r.value,c=s.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===s.Type.UTF8&&(u=e.util.encodeUtf8(u))),n=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(r.type).getBytes()),s.create(s.Class.UNIVERSAL,c,!1,u)])]),i.value.push(n)}return i}function n(e){for(var t,r=0;r<e.length;++r){if(t=e[r],"undefined"==typeof t.name&&(t.type&&t.type in u.oids?t.name=u.oids[t.type]:t.shortName&&t.shortName in l&&(t.name=u.oids[l[t.shortName]])),"undefined"==typeof t.type){if(!(t.name&&t.name in u.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=t,n}t.type=u.oids[t.name]}if("undefined"==typeof t.shortName&&t.name&&t.name in l&&(t.shortName=l[t.name]),t.type===c.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=s.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(u.certificateExtensionToAsn1(i(t.extensions[a])))}if("undefined"==typeof t.value){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function i(t,n){if(n=n||{},"undefined"==typeof t.name&&t.id&&t.id in u.oids&&(t.name=u.oids[t.id]),"undefined"==typeof t.id){if(!(t.name&&t.name in u.oids)){var i=new Error("Extension ID not specified.");throw i.extension=t,i}t.id=u.oids[t.name]}if("undefined"!=typeof t.value)return t;if("keyUsage"===t.name){var a=0,o=0,l=0;t.digitalSignature&&(o|=128,a=7),t.nonRepudiation&&(o|=64,a=6),t.keyEncipherment&&(o|=32,a=5),t.dataEncipherment&&(o|=16,a=4),t.keyAgreement&&(o|=8,a=3),t.keyCertSign&&(o|=4,a=2),t.cRLSign&&(o|=2,a=1),t.encipherOnly&&(o|=1,a=0),t.decipherOnly&&(l|=128,a=7);var f=String.fromCharCode(a);0!==l?f+=String.fromCharCode(o)+String.fromCharCode(l):0!==o&&(f+=String.fromCharCode(o)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,f)}else if("basicConstraints"===t.name)t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);var h=t.value.value;for(var p in t)t[p]===!0&&(p in c?h.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c[p]).getBytes())):p.indexOf(".")!==-1&&h.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(p).getBytes())))}else if("nsCertType"===t.name){var a=0,o=0;t.client&&(o|=128,a=7),t.server&&(o|=64,a=6),t.email&&(o|=32,a=5),t.objsign&&(o|=16,a=4),t.reserved&&(o|=8,a=3),t.sslCA&&(o|=4,a=2),t.emailCA&&(o|=2,a=1),t.objCA&&(o|=1,a=0);var f=String.fromCharCode(a);0!==o&&(f+=String.fromCharCode(o)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,f)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);for(var d,y=0;y<t.altNames.length;++y){d=t.altNames[y];var f=d.value;if(7===d.type&&d.ip){if(f=e.util.bytesFromIP(d.ip),null===f){var i=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw i.extension=t,i}}else 8===d.type&&(f=d.oid?s.oidToDer(s.oidToDer(d.oid)):s.oidToDer(f));
t.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC,d.type,!1,f))}}else if("subjectKeyIdentifier"===t.name&&n.cert){var g=n.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=g.toHex(),t.value=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,g.getBytes())}else if("authorityKeyIdentifier"===t.name&&n.cert){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);var h=t.value.value;if(t.keyIdentifier){var v=t.keyIdentifier===!0?n.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;h.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!1,v))}if(t.authorityCertIssuer){var m=[s.create(s.Class.CONTEXT_SPECIFIC,4,!0,[r(t.authorityCertIssuer===!0?n.cert.issuer:t.authorityCertIssuer)])];h.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var E=e.util.hexToBytes(t.serialNumber===!0?n.cert.serialNumber:t.serialNumber);h.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!1,E))}}else if("cRLDistributionPoints"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);for(var d,h=t.value.value,C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),b=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]),y=0;y<t.altNames.length;++y){d=t.altNames[y];var f=d.value;if(7===d.type&&d.ip){if(f=e.util.bytesFromIP(d.ip),null===f){var i=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw i.extension=t,i}}else 8===d.type&&(f=d.oid?s.oidToDer(s.oidToDer(d.oid)):s.oidToDer(f));b.value.push(s.create(s.Class.CONTEXT_SPECIFIC,d.type,!1,f))}C.value.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[b])),h.push(C)}if("undefined"==typeof t.value){var i=new Error("Extension value not specified.");throw i.extension=t,i}return t}function a(e,t){switch(e){case c["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.saltLength).getBytes())])),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,r);default:return s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")}}function o(t){var r=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return r;for(var n=t.attributes,i=0;i<n.length;++i){var a=n[i],o=a.value,u=s.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===s.Type.UTF8&&(o=e.util.encodeUtf8(o));var c=!1;"valueConstructed"in a&&(c=a.valueConstructed);var l=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.type).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,u,c,o)])]);r.value.push(l)}return r}var s=e.asn1,u=e.pki=e.pki||{},c=u.oids,l={};l.CN=c.commonName,l.commonName="CN",l.C=c.countryName,l.countryName="C",l.L=c.localityName,l.localityName="L",l.ST=c.stateOrProvinceName,l.stateOrProvinceName="ST",l.O=c.organizationName,l.organizationName="O",l.OU=c.organizationalUnitName,l.organizationalUnitName="OU",l.E=c.emailAddress,l.emailAddress="E";var f=e.pki.rsa.publicKeyValidator,h={name:"Certificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},f,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},p={name:"rsapss",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},f,{name:"CertificationRequestInfo.attributes",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0}]}]}]},y={name:"CertificationRequest",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};u.RDNAttributesAsArray=function(e,t){for(var r,n,i,a=[],o=0;o<e.value.length;++o){r=e.value[o];for(var u=0;u<r.value.length;++u)i={},n=r.value[u],i.type=s.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in c&&(i.name=c[i.type],i.name in l&&(i.shortName=l[i.name])),t&&(t.update(i.type),t.update(i.value)),a.push(i)}return a},u.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=s.derToOid(n.value[0].value),a=n.value[1].value,o=0;o<a.length;++o){var f={};if(f.type=i,f.value=a[o].value,f.valueTagClass=a[o].type,f.type in c&&(f.name=c[f.type],f.name in l&&(f.shortName=l[f.name])),f.type===c.extensionRequest){f.extensions=[];for(var h=0;h<f.value.length;++h)f.extensions.push(u.certificateExtensionFromAsn1(f.value[h]))}t.push(f)}return t};var g=function(e,t,r){var n={};if(e!==c["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:c.sha1},mgf:{algorithmOid:c.mgf1,hash:{algorithmOid:c.sha1}},saltLength:20});var i={},a=[];if(!s.validate(t,p,i,a)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=a,o}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=s.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=s.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=s.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n};u.certificateFromPem=function(t,r,n){var i=e.pem.decode(t)[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=i.type,a}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=s.fromDer(i.body,n);return u.certificateFromAsn1(o,r)},u.certificateToPem=function(t,r){var n={type:"CERTIFICATE",body:s.toDer(u.certificateToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:r})},u.publicKeyFromPem=function(t){var r=e.pem.decode(t)[0];if("PUBLIC KEY"!==r.type&&"RSA PUBLIC KEY"!==r.type){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=r.type,n}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=s.fromDer(r.body);return u.publicKeyFromAsn1(i)},u.publicKeyToPem=function(t,r){var n={type:"PUBLIC KEY",body:s.toDer(u.publicKeyToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:r})},u.publicKeyToRSAPublicKeyPem=function(t,r){var n={type:"RSA PUBLIC KEY",body:s.toDer(u.publicKeyToRSAPublicKey(t)).getBytes()};return e.pem.encode(n,{maxline:r})},u.getPublicKeyFingerprint=function(t,r){r=r||{};var n,i=r.md||e.md.sha1.create(),a=r.type||"RSAPublicKey";switch(a){case"RSAPublicKey":n=s.toDer(u.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":n=s.toDer(u.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+r.type+'".')}i.start(),i.update(n);var o=i.digest();if("hex"===r.encoding){var c=o.toHex();return r.delimiter?c.match(/.{2}/g).join(r.delimiter):c}if("binary"===r.encoding)return o.getBytes();if(r.encoding)throw new Error('Unknown encoding "'+r.encoding+'".');return o},u.certificationRequestFromPem=function(t,r,n){var i=e.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==i.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=i.type,a}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=s.fromDer(i.body,n);return u.certificationRequestFromAsn1(o,r)},u.certificationRequestToPem=function(t,r){var n={type:"CERTIFICATE REQUEST",body:s.toDer(u.certificationRequestToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:r})},u.createCertificate=function(){var r={};return r.version=2,r.serialNumber="00",r.signatureOid=null,r.signature=null,r.siginfo={},r.siginfo.algorithmOid=null,r.validity={},r.validity.notBefore=new Date,r.validity.notAfter=new Date,r.issuer={},r.issuer.getField=function(e){return t(r.issuer,e)},r.issuer.addField=function(e){n([e]),r.issuer.attributes.push(e)},r.issuer.attributes=[],r.issuer.hash=null,r.subject={},r.subject.getField=function(e){return t(r.subject,e)},r.subject.addField=function(e){n([e]),r.subject.attributes.push(e)},r.subject.attributes=[],r.subject.hash=null,r.extensions=[],r.publicKey=null,r.md=null,r.setSubject=function(e,t){n(e),r.subject.attributes=e,delete r.subject.uniqueId,t&&(r.subject.uniqueId=t),r.subject.hash=null},r.setIssuer=function(e,t){n(e),r.issuer.attributes=e,delete r.issuer.uniqueId,t&&(r.issuer.uniqueId=t),r.issuer.hash=null},r.setExtensions=function(e){for(var t=0;t<e.length;++t)i(e[t],{cert:r});r.extensions=e},r.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,n=null,i=0;null===n&&i<r.extensions.length;++i)t=r.extensions[i],e.id&&t.id===e.id?n=t:e.name&&t.name===e.name&&(n=t);return n},r.sign=function(t,n){r.md=n||e.md.sha1.create();var i=c[r.md.algorithm+"WithRSAEncryption"];if(!i){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=r.md.algorithm,a}r.signatureOid=r.siginfo.algorithmOid=i,r.tbsCertificate=u.getTBSCertificate(r);var o=s.toDer(r.tbsCertificate);r.md.update(o.getBytes()),r.signature=t.sign(r.md)},r.verify=function(t){var n=!1;if(!r.issued(t)){var i=t.issuer,a=r.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=a.attributes,o}var l=t.md;if(null===l){if(t.signatureOid in c){var f=c[t.signatureOid];switch(f){case"sha1WithRSAEncryption":l=e.md.sha1.create();break;case"md5WithRSAEncryption":l=e.md.md5.create();break;case"sha256WithRSAEncryption":l=e.md.sha256.create();break;case"sha512WithRSAEncryption":l=e.md.sha512.create();break;case"RSASSA-PSS":l=e.md.sha256.create()}}if(null===l){var o=new Error("Could not compute certificate digest. Unknown signature OID.");throw o.signatureOid=t.signatureOid,o}var h=t.tbsCertificate||u.getTBSCertificate(t),p=s.toDer(h);l.update(p.getBytes())}if(null!==l){var d;switch(t.signatureOid){case c.sha1WithRSAEncryption:d=void 0;break;case c["RSASSA-PSS"]:var y,g;if(y=c[t.signatureParameters.mgf.hash.algorithmOid],void 0===y||void 0===e.md[y]){var o=new Error("Unsupported MGF hash function.");throw o.oid=t.signatureParameters.mgf.hash.algorithmOid,o.name=y,o}if(g=c[t.signatureParameters.mgf.algorithmOid],void 0===g||void 0===e.mgf[g]){var o=new Error("Unsupported MGF function.");throw o.oid=t.signatureParameters.mgf.algorithmOid,o.name=g,o}if(g=e.mgf[g].create(e.md[y].create()),y=c[t.signatureParameters.hash.algorithmOid],void 0===y||void 0===e.md[y])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:y};d=e.pss.create(e.md[y].create(),g,t.signatureParameters.saltLength)}n=r.publicKey.verify(l.digest().getBytes(),t.signature,d)}return n},r.isIssuer=function(e){var t=!1,n=r.issuer,i=e.subject;if(n.hash&&i.hash)t=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){t=!0;for(var a,o,s=0;t&&s<n.attributes.length;++s)a=n.attributes[s],o=i.attributes[s],a.type===o.type&&a.value===o.value||(t=!1)}return t},r.issued=function(e){return e.isIssuer(r)},r.generateSubjectKeyIdentifier=function(){return u.getPublicKeyFingerprint(r.publicKey,{type:"RSAPublicKey"})},r.verifySubjectKeyIdentifier=function(){for(var t=c.subjectKeyIdentifier,n=0;n<r.extensions.length;++n){var i=r.extensions[n];if(i.id===t){var a=r.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(i.subjectKeyIdentifier)===a}}return!1},r},u.certificateFromAsn1=function(r,i){var a={},o=[];if(!s.validate(r,h,a,o)){var l=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw l.errors=o,l}if("string"!=typeof a.certSignature){for(var f="\0",p=0;p<a.certSignature.length;++p)f+=s.toDer(a.certSignature[p]).getBytes();a.certSignature=f}var d=s.derToOid(a.publicKeyOid);if(d!==u.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var y=u.createCertificate();y.version=a.certVersion?a.certVersion.charCodeAt(0):0;var v=e.util.createBuffer(a.certSerialNumber);y.serialNumber=v.toHex(),y.signatureOid=e.asn1.derToOid(a.certSignatureOid),y.signatureParameters=g(y.signatureOid,a.certSignatureParams,!0),y.siginfo.algorithmOid=e.asn1.derToOid(a.certinfoSignatureOid),y.siginfo.parameters=g(y.siginfo.algorithmOid,a.certinfoSignatureParams,!1);var m=e.util.createBuffer(a.certSignature);++m.read,y.signature=m.getBytes();var E=[];if(void 0!==a.certValidity1UTCTime&&E.push(s.utcTimeToDate(a.certValidity1UTCTime)),void 0!==a.certValidity2GeneralizedTime&&E.push(s.generalizedTimeToDate(a.certValidity2GeneralizedTime)),void 0!==a.certValidity3UTCTime&&E.push(s.utcTimeToDate(a.certValidity3UTCTime)),void 0!==a.certValidity4GeneralizedTime&&E.push(s.generalizedTimeToDate(a.certValidity4GeneralizedTime)),E.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(E.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(y.validity.notBefore=E[0],y.validity.notAfter=E[1],y.tbsCertificate=a.tbsCertificate,i){if(y.md=null,y.signatureOid in c){var d=c[y.signatureOid];switch(d){case"sha1WithRSAEncryption":y.md=e.md.sha1.create();break;case"md5WithRSAEncryption":y.md=e.md.md5.create();break;case"sha256WithRSAEncryption":y.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":y.md=e.md.sha512.create();break;case"RSASSA-PSS":y.md=e.md.sha256.create()}}if(null===y.md){var l=new Error("Could not compute certificate digest. Unknown signature OID.");throw l.signatureOid=y.signatureOid,l}var C=s.toDer(y.tbsCertificate);y.md.update(C.getBytes())}var b=e.md.sha1.create();y.issuer.getField=function(e){return t(y.issuer,e)},y.issuer.addField=function(e){n([e]),y.issuer.attributes.push(e)},y.issuer.attributes=u.RDNAttributesAsArray(a.certIssuer,b),a.certIssuerUniqueId&&(y.issuer.uniqueId=a.certIssuerUniqueId),y.issuer.hash=b.digest().toHex();var A=e.md.sha1.create();return y.subject.getField=function(e){return t(y.subject,e)},y.subject.addField=function(e){n([e]),y.subject.attributes.push(e)},y.subject.attributes=u.RDNAttributesAsArray(a.certSubject,A),a.certSubjectUniqueId&&(y.subject.uniqueId=a.certSubjectUniqueId),y.subject.hash=A.digest().toHex(),a.certExtensions?y.extensions=u.certificateExtensionsFromAsn1(a.certExtensions):y.extensions=[],y.publicKey=u.publicKeyFromAsn1(a.subjectPublicKeyInfo),y},u.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(u.certificateExtensionFromAsn1(n.value[i]));return t},u.certificateExtensionFromAsn1=function(t){var r={};if(r.id=s.derToOid(t.value[0].value),r.critical=!1,t.value[1].type===s.Type.BOOLEAN?(r.critical=0!==t.value[1].value.charCodeAt(0),r.value=t.value[2].value):r.value=t.value[1].value,r.id in c)if(r.name=c[r.id],"keyUsage"===r.name){var n=s.fromDer(r.value),i=0,a=0;n.value.length>1&&(i=n.value.charCodeAt(1),a=n.value.length>2?n.value.charCodeAt(2):0),r.digitalSignature=128===(128&i),r.nonRepudiation=64===(64&i),r.keyEncipherment=32===(32&i),r.dataEncipherment=16===(16&i),r.keyAgreement=8===(8&i),r.keyCertSign=4===(4&i),r.cRLSign=2===(2&i),r.encipherOnly=1===(1&i),r.decipherOnly=128===(128&a)}else if("basicConstraints"===r.name){var n=s.fromDer(r.value);n.value.length>0&&n.value[0].type===s.Type.BOOLEAN?r.cA=0!==n.value[0].value.charCodeAt(0):r.cA=!1;var o=null;n.value.length>0&&n.value[0].type===s.Type.INTEGER?o=n.value[0].value:n.value.length>1&&(o=n.value[1].value),null!==o&&(r.pathLenConstraint=s.derToInteger(o))}else if("extKeyUsage"===r.name)for(var n=s.fromDer(r.value),u=0;u<n.value.length;++u){var l=s.derToOid(n.value[u].value);l in c?r[c[l]]=!0:r[l]=!0}else if("nsCertType"===r.name){var n=s.fromDer(r.value),i=0;n.value.length>1&&(i=n.value.charCodeAt(1)),r.client=128===(128&i),r.server=64===(64&i),r.email=32===(32&i),r.objsign=16===(16&i),r.reserved=8===(8&i),r.sslCA=4===(4&i),r.emailCA=2===(2&i),r.objCA=1===(1&i)}else if("subjectAltName"===r.name||"issuerAltName"===r.name){r.altNames=[];for(var f,n=s.fromDer(r.value),h=0;h<n.value.length;++h){f=n.value[h];var p={type:f.type,value:f.value};switch(r.altNames.push(p),f.type){case 1:case 2:case 6:break;case 7:p.ip=e.util.bytesToIP(f.value);break;case 8:p.oid=s.derToOid(f.value)}}}else if("subjectKeyIdentifier"===r.name){var n=s.fromDer(r.value);r.subjectKeyIdentifier=e.util.bytesToHex(n.value)}return r},u.certificationRequestFromAsn1=function(r,i){var a={},o=[];if(!s.validate(r,y,a,o)){var l=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw l.errors=o,l}if("string"!=typeof a.csrSignature){for(var f="\0",h=0;h<a.csrSignature.length;++h)f+=s.toDer(a.csrSignature[h]).getBytes();a.csrSignature=f}var p=s.derToOid(a.publicKeyOid);if(p!==u.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var d=u.createCertificationRequest();d.version=a.csrVersion?a.csrVersion.charCodeAt(0):0,d.signatureOid=e.asn1.derToOid(a.csrSignatureOid),d.signatureParameters=g(d.signatureOid,a.csrSignatureParams,!0),d.siginfo.algorithmOid=e.asn1.derToOid(a.csrSignatureOid),d.siginfo.parameters=g(d.siginfo.algorithmOid,a.csrSignatureParams,!1);var v=e.util.createBuffer(a.csrSignature);if(++v.read,d.signature=v.getBytes(),d.certificationRequestInfo=a.certificationRequestInfo,i){if(d.md=null,d.signatureOid in c){var p=c[d.signatureOid];switch(p){case"sha1WithRSAEncryption":d.md=e.md.sha1.create();break;case"md5WithRSAEncryption":d.md=e.md.md5.create();break;case"sha256WithRSAEncryption":d.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":d.md=e.md.sha512.create();break;case"RSASSA-PSS":d.md=e.md.sha256.create()}}if(null===d.md){var l=new Error("Could not compute certification request digest. Unknown signature OID.");throw l.signatureOid=d.signatureOid,l}var m=s.toDer(d.certificationRequestInfo);d.md.update(m.getBytes())}var E=e.md.sha1.create();return d.subject.getField=function(e){return t(d.subject,e)},d.subject.addField=function(e){n([e]),d.subject.attributes.push(e)},d.subject.attributes=u.RDNAttributesAsArray(a.certificationRequestInfoSubject,E),d.subject.hash=E.digest().toHex(),d.publicKey=u.publicKeyFromAsn1(a.subjectPublicKeyInfo),d.getAttribute=function(e){return t(d,e)},d.addAttribute=function(e){n([e]),d.attributes.push(e)},d.attributes=u.CRIAttributesAsArray(a.certificationRequestInfoAttributes||[]),d},u.createCertificationRequest=function(){var r={};return r.version=0,r.signatureOid=null,r.signature=null,r.siginfo={},r.siginfo.algorithmOid=null,r.subject={},r.subject.getField=function(e){return t(r.subject,e)},r.subject.addField=function(e){n([e]),r.subject.attributes.push(e)},r.subject.attributes=[],r.subject.hash=null,r.publicKey=null,r.attributes=[],r.getAttribute=function(e){return t(r,e)},r.addAttribute=function(e){n([e]),r.attributes.push(e)},r.md=null,r.setSubject=function(e){n(e),r.subject.attributes=e,r.subject.hash=null},r.setAttributes=function(e){n(e),r.attributes=e},r.sign=function(t,n){r.md=n||e.md.sha1.create();var i=c[r.md.algorithm+"WithRSAEncryption"];if(!i){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=r.md.algorithm,a}r.signatureOid=r.siginfo.algorithmOid=i,r.certificationRequestInfo=u.getCertificationRequestInfo(r);var o=s.toDer(r.certificationRequestInfo);r.md.update(o.getBytes()),r.signature=t.sign(r.md)},r.verify=function(){var t=!1,n=r.md;if(null===n){if(r.signatureOid in c){var i=c[r.signatureOid];switch(i){case"sha1WithRSAEncryption":n=e.md.sha1.create();break;case"md5WithRSAEncryption":n=e.md.md5.create();break;case"sha256WithRSAEncryption":n=e.md.sha256.create();break;case"sha512WithRSAEncryption":n=e.md.sha512.create();break;case"RSASSA-PSS":n=e.md.sha256.create()}}if(null===n){var a=new Error("Could not compute certification request digest. Unknown signature OID.");throw a.signatureOid=r.signatureOid,a}var o=r.certificationRequestInfo||u.getCertificationRequestInfo(r),l=s.toDer(o);n.update(l.getBytes())}if(null!==n){var f;switch(r.signatureOid){case c.sha1WithRSAEncryption:break;case c["RSASSA-PSS"]:var h,p;if(h=c[r.signatureParameters.mgf.hash.algorithmOid],void 0===h||void 0===e.md[h]){var a=new Error("Unsupported MGF hash function.");throw a.oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=h,a}if(p=c[r.signatureParameters.mgf.algorithmOid],void 0===p||void 0===e.mgf[p]){var a=new Error("Unsupported MGF function.");throw a.oid=r.signatureParameters.mgf.algorithmOid,a.name=p,a}if(p=e.mgf[p].create(e.md[h].create()),h=c[r.signatureParameters.hash.algorithmOid],void 0===h||void 0===e.md[h]){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=r.signatureParameters.hash.algorithmOid,a.name=h,a}f=e.pss.create(e.md[h].create(),p,r.signatureParameters.saltLength)}t=r.publicKey.verify(n.digest().getBytes(),r.signature,f)}return t},r},u.getTBSCertificate=function(t){var n=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.version).getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber)),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.siginfo.algorithmOid).getBytes()),a(t.siginfo.algorithmOid,t.siginfo.parameters)]),r(t.issuer),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notBefore)),s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notAfter))]),r(t.subject),u.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(u.certificateExtensionsToAsn1(t.extensions)),n},u.getCertificationRequestInfo=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(e.version).getBytes()),r(e.subject),u.publicKeyToAsn1(e.publicKey),o(e)]);return t},u.distinguishedNameToAsn1=function(e){return r(e)},u.certificateToAsn1=function(e){var t=e.tbsCertificate||u.getTBSCertificate(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},u.certificateExtensionsToAsn1=function(e){var t=s.create(s.Class.CONTEXT_SPECIFIC,3,!0,[]),r=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(u.certificateExtensionToAsn1(e[n]));return t},u.certificateExtensionToAsn1=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.id).getBytes())),e.critical&&t.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=s.toDer(r).getBytes()),t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,r)),t},u.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||u.getCertificationRequestInfo(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},u.createCaStore=function(t){function n(e){return i(e),a.certs[e.hash]||null}function i(t){if(!t.hash){var n=e.md.sha1.create();t.attributes=u.RDNAttributesAsArray(r(t),n),t.hash=n.digest().toHex()}}var a={certs:{}};if(a.getIssuer=function(e){var t=n(e.issuer);return t},a.addCertificate=function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),i(t.subject),!a.hasCertificate(t))if(t.subject.hash in a.certs){var r=a.certs[t.subject.hash];e.util.isArray(r)||(r=[r]),r.push(t),a.certs[t.subject.hash]=r}else a.certs[t.subject.hash]=t},a.hasCertificate=function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t));var r=n(t.subject);if(!r)return!1;e.util.isArray(r)||(r=[r]);for(var i=s.toDer(u.certificateToAsn1(t)).getBytes(),a=0;a<r.length;++a){var o=s.toDer(u.certificateToAsn1(r[a])).getBytes();if(i===o)return!0}return!1},a.listAllCertificates=function(){var t=[];for(var r in a.certs)if(a.certs.hasOwnProperty(r)){var n=a.certs[r];if(e.util.isArray(n))for(var i=0;i<n.length;++i)t.push(n[i]);else t.push(n)}return t},a.removeCertificate=function(t){var r;if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),i(t.subject),!a.hasCertificate(t))return null;var o=n(t.subject);if(!e.util.isArray(o))return r=a.certs[t.subject.hash],delete a.certs[t.subject.hash],r;for(var c=s.toDer(u.certificateToAsn1(t)).getBytes(),l=0;l<o.length;++l){var f=s.toDer(u.certificateToAsn1(o[l])).getBytes();c===f&&(r=o[l],o.splice(l,1))}return 0===o.length&&delete a.certs[t.subject.hash],r},t)for(var o=0;o<t.length;++o){var c=t[o];a.addCertificate(c)}return a},u.certificateError={
bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},u.verifyCertificateChain=function(t,r,n){r=r.slice(0);var i=r.slice(0),a=new Date,o=!0,s=null,c=0;do{var l=r.shift(),f=null,h=!1;if((a<l.validity.notBefore||a>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:u.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:a}),null===s){if(f=r[0]||t.getIssuer(l),null===f&&l.isIssuer(l)&&(h=!0,f=l),f){var p=f;e.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){f=p.shift();try{d=f.verify(l)}catch(e){}}d||(s={message:"Certificate signature is invalid.",error:u.certificateError.bad_certificate})}null===s&&(!f||h)&&!t.hasCertificate(l)&&(s={message:"Certificate is not trusted.",error:u.certificateError.unknown_ca})}if(null===s&&f&&!l.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:u.certificateError.bad_certificate}),null===s)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===s&&g<l.extensions.length;++g){var v=l.extensions[g];v.critical&&!(v.name in y)&&(s={message:"Certificate has an unsupported critical extension.",error:u.certificateError.unsupported_certificate})}if(null===s&&(!o||0===r.length&&(!f||h))){var m=l.getExtension("basicConstraints"),E=l.getExtension("keyUsage");if(null!==E&&(!E.keyCertSign||null===m)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:u.certificateError.bad_certificate}),null===s&&null!==m&&!m.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:u.certificateError.bad_certificate}),null===s&&null!==E&&"pathLenConstraint"in m){var C=c-1;C>m.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:u.certificateError.bad_certificate})}}var b=null===s||s.error,A=n?n(b,c,i):b;if(A!==!0)throw b===!0&&(s={message:"The application rejected the certificate.",error:u.certificateError.bad_certificate}),(A||0===A)&&("object"!=typeof A||e.util.isArray(A)?"string"==typeof A&&(s.error=A):(A.message&&(s.message=A.message),A.error&&(s.error=A.error))),s;s=null,o=!1,++c}while(r.length>0);return!0}}var t="x509";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n.pki}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/x509",["require","module","./aes","./asn1","./des","./md","./mgf","./oids","./pem","./pss","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var o=0;o<e[a].safeBags.length;o++){var s=e[a].safeBags[o];void 0!==n&&s.type!==n||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(r)>=0&&i.push(s):i.push(s))}return i}function r(t){if(t.composed||t.constructed){for(var r=e.util.createBuffer(),n=0;n<t.value.length;++n)r.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=r.getBytes()}return t}function n(e,t,n,o){if(t=s.fromDer(t,n),t.tagClass!==s.Class.UNIVERSAL||t.type!==s.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var c=0;c<t.value.length;c++){var f=t.value[c],h={},p=[];if(!s.validate(f,l,h,p)){var d=new Error("Cannot read ContentInfo.");throw d.errors=p,d}var y={encrypted:!1},g=null,v=h.content.value[0];switch(s.derToOid(h.contentType)){case u.oids.data:if(v.tagClass!==s.Class.UNIVERSAL||v.type!==s.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");g=r(v).value;break;case u.oids.encryptedData:g=i(v,o),y.encrypted=!0;break;default:var d=new Error("Unsupported PKCS#12 contentType.");throw d.contentType=s.derToOid(h.contentType),d}y.safeBags=a(g,n,o),e.safeContents.push(y)}}function i(t,n){var i={},a=[];if(!s.validate(t,e.pkcs7.asn1.encryptedDataValidator,i,a)){var o=new Error("Cannot read EncryptedContentInfo.");throw o.errors=a,o}var c=s.derToOid(i.contentType);if(c!==u.oids.data){var o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw o.oid=c,o}c=s.derToOid(i.encAlgorithm);var l=u.pbe.getCipher(c,i.encParameter,n),f=r(i.encryptedContentAsn1),h=e.util.createBuffer(f.value);if(l.update(h),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function a(e,t,r){if(!t&&0===e.length)return[];if(e=s.fromDer(e,t),e.tagClass!==s.Class.UNIVERSAL||e.type!==s.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],c={},l=[];if(!s.validate(a,h,c,l)){var f=new Error("Cannot read SafeBag.");throw f.errors=l,f}var p={type:s.derToOid(c.bagId),attributes:o(c.bagAttributes)};n.push(p);var y,g,v=c.bagValue.value[0];switch(p.type){case u.oids.pkcs8ShroudedKeyBag:if(v=u.decryptPrivateKeyInfo(v,r),null===v)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case u.oids.keyBag:try{p.key=u.privateKeyFromAsn1(v)}catch(e){p.key=null,p.asn1=v}continue;case u.oids.certBag:y=d,g=function(){if(s.derToOid(c.certId)!==u.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=s.derToOid(c.certId),e}var r=s.fromDer(c.cert,t);try{p.cert=u.certificateFromAsn1(r,!0)}catch(e){p.cert=null,p.asn1=r}};break;default:var f=new Error("Unsupported PKCS#12 SafeBag type.");throw f.oid=p.type,f}if(void 0!==y&&!s.validate(v,y,c,l)){var f=new Error("Cannot read PKCS#12 "+y.name);throw f.errors=l,f}g()}return n}function o(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},i=[];if(!s.validate(e[r],p,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var o=s.derToOid(n.oid);if(void 0!==u.oids[o]){t[u.oids[o]]=[];for(var c=0;c<n.values.length;++c)t[u.oids[o]].push(n.values[c].value)}}return t}var s=e.asn1,u=e.pki,c=e.pkcs12=e.pkcs12||{},l={name:"ContentInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},f={name:"PFX",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"version"},l,{name:"PFX.macData",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},h={name:"SafeBag",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},p={name:"Attribute",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0,capture:"values"}]},d={name:"CertBag",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:s.Class.UNIVERSAL,type:s.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};c.pkcs12FromAsn1=function(i,a,o){"string"==typeof a?(o=a,a=!0):void 0===a&&(a=!0);var l={},h=[];if(!s.validate(i,f,l,h)){var p=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw p.errors=p,p}var d={version:l.version.charCodeAt(0),safeContents:[],getBags:function(r){var n,i={};return"localKeyId"in r?n=r.localKeyId:"localKeyIdHex"in r&&(n=e.util.hexToBytes(r.localKeyIdHex)),void 0===n&&!("friendlyName"in r)&&"bagType"in r&&(i[r.bagType]=t(d.safeContents,null,null,r.bagType)),void 0!==n&&(i.localKeyId=t(d.safeContents,"localKeyId",n,r.bagType)),"friendlyName"in r&&(i.friendlyName=t(d.safeContents,"friendlyName",r.friendlyName,r.bagType)),i},getBagsByFriendlyName:function(e,r){return t(d.safeContents,"friendlyName",e,r)},getBagsByLocalKeyId:function(e,r){return t(d.safeContents,"localKeyId",e,r)}};if(3!==l.version.charCodeAt(0)){var p=new Error("PKCS#12 PFX of version other than 3 not supported.");throw p.version=l.version.charCodeAt(0),p}if(s.derToOid(l.contentType)!==u.oids.data){var p=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw p.oid=s.derToOid(l.contentType),p}var y=l.content.value[0];if(y.tagClass!==s.Class.UNIVERSAL||y.type!==s.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(y=r(y),l.mac){var g=null,v=0,m=s.derToOid(l.macAlgorithm);switch(m){case u.oids.sha1:g=e.md.sha1.create(),v=20;break;case u.oids.sha256:g=e.md.sha256.create(),v=32;break;case u.oids.sha384:g=e.md.sha384.create(),v=48;break;case u.oids.sha512:g=e.md.sha512.create(),v=64;break;case u.oids.md5:g=e.md.md5.create(),v=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+m);var E=new e.util.ByteBuffer(l.macSalt),C="macIterations"in l?parseInt(e.util.bytesToHex(l.macIterations),16):1,b=c.generateKey(o,E,3,C,v,g),A=e.hmac.create();A.start(g,b),A.update(y.value);var S=A.getMac();if(S.getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return n(d,y.value,a,o),d},c.toPkcs12Asn1=function(t,r,n,i){i=i||{},i.saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||i.encAlgorithm||"aes128","useMac"in i||(i.useMac=!0),"localKeyId"in i||(i.localKeyId=null),"generateLocalKeyId"in i||(i.generateLocalKeyId=!0);var a,o=i.localKeyId;if(null!==o)o=e.util.hexToBytes(o);else if(i.generateLocalKeyId)if(r){var l=e.util.isArray(r)?r[0]:r;"string"==typeof l&&(l=u.certificateFromPem(l));var f=e.md.sha1.create();f.update(s.toDer(u.certificateToAsn1(l)).getBytes()),o=f.digest().getBytes()}else o=e.random.getBytes(20);var h=[];null!==o&&h.push(s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.localKeyId).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,o)])])),"friendlyName"in i&&h.push(s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.friendlyName).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.BMPSTRING,!1,i.friendlyName)])])),h.length>0&&(a=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,h));var p=[],d=[];null!==r&&(d=e.util.isArray(r)?r:[r]);for(var y=[],g=0;g<d.length;++g){r=d[g],"string"==typeof r&&(r=u.certificateFromPem(r));var v=0===g?a:void 0,m=u.certificateToAsn1(r),E=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.certBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.x509Certificate).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(m).getBytes())])])]),v]);y.push(E)}if(y.length>0){var C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,y),b=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(C).getBytes())])]);p.push(b)}var A=null;if(null!==t){var S=u.wrapRsaPrivateKey(u.privateKeyToAsn1(t));A=null===n?s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.keyBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[S]),a]):s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.pkcs8ShroudedKeyBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[u.encryptPrivateKeyInfo(S,n,i)]),a]);var B=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[A]),w=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(B).getBytes())])]);p.push(w)}var T,I=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,p);if(i.useMac){var f=e.md.sha1.create(),_=new e.util.ByteBuffer(e.random.getBytes(i.saltSize)),k=i.count,t=c.generateKey(n,_,3,k,20),D=e.hmac.create();D.start(f,t),D.update(s.toDer(I).getBytes());var R=D.getMac();T=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.sha1).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,R.getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,_.getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(k).getBytes())])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(3).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(I).getBytes())])]),T])},c.generateKey=e.pbe.generatePkcs12Key}var t="pkcs12";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs12",["require","module","./asn1","./hmac","./oids","./pkcs7asn1","./pbe","./random","./rsa","./sha1","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,r=e.pki=e.pki||{};r.pemToDer=function(t){var r=e.pem.decode(t)[0];if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(r.body)},r.privateKeyFromPem=function(n){var i=e.pem.decode(n)[0];if("PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw a.headerType=i.type,a}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=t.fromDer(i.body);return r.privateKeyFromAsn1(o)},r.privateKeyToPem=function(n,i){var a={type:"RSA PRIVATE KEY",body:t.toDer(r.privateKeyToAsn1(n)).getBytes()};return e.pem.encode(a,{maxline:i})},r.privateKeyInfoToPem=function(r,n){var i={type:"PRIVATE KEY",body:t.toDer(r).getBytes()};return e.pem.encode(i,{maxline:n})}}var t="pki";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pki",["require","module","./asn1","./oids","./pbe","./pem","./pbkdf2","./pkcs12","./pss","./rsa","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=function(t,r,n,i){var a=e.util.createBuffer(),o=t.length>>1,s=o+(1&t.length),u=t.substr(0,s),c=t.substr(o,s),l=e.util.createBuffer(),f=e.hmac.create();n=r+n;var h=Math.ceil(i/16),p=Math.ceil(i/20);f.start("MD5",u);var d=e.util.createBuffer();l.putBytes(n);for(var y=0;y<h;++y)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+n),d.putBuffer(f.digest());f.start("SHA1",c);var g=e.util.createBuffer();l.clear(),l.putBytes(n);for(var y=0;y<p;++y)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+n),g.putBuffer(f.digest());return a.putBytes(e.util.xorBytes(d.getBytes(),g.getBytes(),i)),a},r=function(t,r,n){var i=e.hmac.create();i.start("SHA1",t);var a=e.util.createBuffer();return a.putInt32(r[0]),a.putInt32(r[1]),a.putByte(n.type),a.putByte(n.version.major),a.putByte(n.version.minor),a.putInt16(n.length),a.putBytes(n.fragment.bytes()),i.update(a.getBytes()),i.digest().getBytes()},n=function(t,r,n){var i=!1;try{var a=t.deflate(r.fragment.getBytes());r.fragment=e.util.createBuffer(a),r.length=a.length,i=!0}catch(e){}return i},i=function(t,r,n){var i=!1;try{var a=t.inflate(r.fragment.getBytes());r.fragment=e.util.createBuffer(a),r.length=a.length,i=!0}catch(e){}return i},a=function(t,r){var n=0;switch(r){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32()}return e.util.createBuffer(t.getBytes(n))},o=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},s={};s.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},s.SupportedVersions=[s.Versions.TLS_1_1,s.Versions.TLS_1_0],s.Version=s.SupportedVersions[0],s.MaxFragment=15360,s.ConnectionEnd={server:0,client:1},s.PRFAlgorithm={tls_prf_sha256:0},s.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},s.CipherType={stream:0,block:1,aead:2},s.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},s.CompressionMethod={none:0,deflate:1},s.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},s.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},s.Alert={},s.Alert.Level={warning:1,fatal:2},s.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},s.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},s.CipherSuites={},s.getCipherSuite=function(e){var t=null;for(var r in s.CipherSuites){var n=s.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},s.handleUnexpected=function(e,t){var r=!e.open&&e.entity===s.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})},s.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(s.queue(e,s.createAlert(e,{level:s.Alert.Level.warning,description:s.Alert.Description.no_renegotiation})),s.flush(e)),e.process()},s.parseHelloMessage=function(t,r,n){var i=null,o=t.entity===s.ConnectionEnd.client;if(n<38)t.error(t,{message:o?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var u=r.fragment,c=u.length();if(i={version:{major:u.getByte(),minor:u.getByte()},random:e.util.createBuffer(u.getBytes(32)),session_id:a(u,1),extensions:[]},o?(i.cipher_suite=u.getBytes(2),i.compression_method=u.getByte()):(i.cipher_suites=a(u,2),i.compression_methods=a(u,1)),c=n-(c-u.length()),c>0){for(var l=a(u,2);l.length()>0;)i.extensions.push({type:[l.getByte(),l.getByte()],data:a(l,2)});if(!o)for(var f=0;f<i.extensions.length;++f){var h=i.extensions[f];if(0===h.type[0]&&0===h.type[1])for(var p=a(h.data,2);p.length()>0;){var d=p.getByte();if(0!==d)break;t.session.extensions.server_name.serverNameList.push(a(p,2).getBytes())}}}if(t.session.version&&(i.version.major!==t.session.version.major||i.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}});if(o)t.session.cipherSuite=s.getCipherSuite(i.cipher_suite);else for(var y=e.util.createBuffer(i.cipher_suites.bytes());y.length()>0&&(t.session.cipherSuite=s.getCipherSuite(y.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(i.cipher_suite)});o?t.session.compressionMethod=i.compression_method:t.session.compressionMethod=s.CompressionMethod.none}return i},s.createSecurityParameters=function(e,t){var r=e.entity===s.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,a=r?n:s.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:s.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}},s.handleServerHello=function(e,t,r){var n=s.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=p,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=c,e.session.resuming=!1,s.createSecurityParameters(e,n)),e.session.id=i,e.process()}},s.handleClientHello=function(t,r,n){var i=s.parseHelloMessage(t,r,n);if(!t.fail){var a=i.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(a),null===o?a="":(o.version.major!==i.version.major||o.version.minor>i.version.minor)&&(o=null,a="")),0===a.length&&(a=e.random.getBytes(32)),t.session.id=a,t.session.clientHelloVersion=i.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var u,c=1;c<s.SupportedVersions.length&&(u=s.SupportedVersions[c],!(u.minor<=i.version.minor));++c);t.version={major:u.major,minor:u.minor},t.session.version=t.version}null!==o?(t.expect=b,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=t.verifyClient!==!1?m:E,t.session.resuming=!1,s.createSecurityParameters(t,i)),t.open=!0,s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerHello(t)})),t.session.resuming?(s.queue(t,s.createRecord(t,{type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),t.state.pending=s.createConnectionState(t),t.state.current.write=t.state.pending.write,s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createFinished(t)}))):(s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificate(t)})),t.fail||(s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerKeyExchange(t)})),t.verifyClient!==!1&&s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificateRequest(t)})),s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerHelloDone(t)})))),s.flush(t),t.process()}},s.handleCertificate=function(t,r,n){if(n<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var i,o,u=r.fragment,c={certificate_list:a(u,3)},f=[];try{for(;c.certificate_list.length()>0;)i=a(c.certificate_list,3),o=e.asn1.fromDer(i),i=e.pki.certificateFromAsn1(o,!0),f.push(i)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}var h=t.entity===s.ConnectionEnd.client;!h&&t.verifyClient!==!0||0!==f.length?0===f.length?t.expect=h?l:E:(h?t.session.serverCertificate=f[0]:t.session.clientCertificate=f[0],s.verifyCertificateChain(t,f)&&(t.expect=h?l:E)):t.error(t,{message:h?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}}),t.process()},s.handleServerKeyExchange=function(e,t,r){return r>0?e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}}):(e.expect=f,void e.process())},s.handleClientKeyExchange=function(t,r,n){if(n<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}});var i=r.fragment,o={enc_pre_master_secret:a(i,2).getBytes()},u=null;if(t.getPrivateKey)try{u=t.getPrivateKey(t,t.session.serverCertificate),u=e.pki.privateKeyFromPem(u)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}if(null===u)return t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}});try{var c=t.session.sp;c.pre_master_secret=u.decrypt(o.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==c.pre_master_secret.charCodeAt(0)||l.minor!==c.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(t){c.pre_master_secret=e.random.getBytes(48)}t.expect=b,null!==t.session.clientCertificate&&(t.expect=C),t.process()},s.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:a(n,1),certificate_authorities:a(n,2)};e.session.certificateRequest=i,e.expect=h,e.process()},s.handleCertificateVerify=function(t,r,n){if(n<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var i=r.fragment;i.read-=4;var o=i.bytes();i.read+=4;var u={signature:a(i,2).getBytes()},c=e.util.createBuffer();c.putBuffer(t.session.md5.digest()),c.putBuffer(t.session.sha1.digest()),c=c.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(c,u.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(o),t.session.sha1.update(o)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure}})}t.expect=b,t.process()},s.handleServerHelloDone=function(t,r,n){if(n>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.record_overflow}});if(null===t.serverCertificate){var i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.insufficient_security}},a=0,o=t.verify(t,i.alert.description,a,[]);if(o!==!0)return(o||0===o)&&("object"!=typeof o||e.util.isArray(o)?"number"==typeof o&&(i.alert.description=o):(o.message&&(i.message=o.message),o.alert&&(i.alert.description=o.alert))),t.error(t,i)}null!==t.session.certificateRequest&&(r=s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificate(t)}),s.queue(t,r)),r=s.createRecord(t,{type:s.ContentType.handshake,data:s.createClientKeyExchange(t)}),s.queue(t,r),t.expect=g;var u=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&s.queue(e,s.createRecord(e,{type:s.ContentType.handshake,data:s.createCertificateVerify(e,t)})),s.queue(e,s.createRecord(e,{type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),e.state.pending=s.createConnectionState(e),e.state.current.write=e.state.pending.write,s.queue(e,s.createRecord(e,{type:s.ContentType.handshake,data:s.createFinished(e)})),e.expect=p,s.flush(e),e.process()};return null===t.session.certificateRequest||null===t.session.clientCertificate?u(t,null):void s.getClientSignature(t,u)},s.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var r=e.entity===s.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=s.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?d:A,e.process()},s.handleFinished=function(r,n,i){var a=n.fragment;a.read-=4;var o=a.bytes();a.read+=4;var u=n.fragment.getBytes();a=e.util.createBuffer(),a.putBuffer(r.session.md5.digest()),a.putBuffer(r.session.sha1.digest());var c=r.entity===s.ConnectionEnd.client,l=c?"server finished":"client finished",f=r.session.sp,h=12,p=t;return a=p(f.master_secret,l,a.getBytes(),h),a.getBytes()!==u?r.error(r,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decrypt_error}}):(r.session.md5.update(o),r.session.sha1.update(o),(r.session.resuming&&c||!r.session.resuming&&!c)&&(s.queue(r,s.createRecord(r,{
type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),r.state.current.write=r.state.pending.write,r.state.pending=null,s.queue(r,s.createRecord(r,{type:s.ContentType.handshake,data:s.createFinished(r)}))),r.expect=c?y:S,r.handshaking=!1,++r.handshakes,r.peerCertificate=c?r.session.serverCertificate:r.session.clientCertificate,s.flush(r),r.isConnected=!0,r.connected(r),r.process(),void 0)},s.handleAlert=function(e,t){var r,n=t.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case s.Alert.Description.close_notify:r="Connection closed.";break;case s.Alert.Description.unexpected_message:r="Unexpected message.";break;case s.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case s.Alert.Description.decryption_failed:r="Decryption failed.";break;case s.Alert.Description.record_overflow:r="Record overflow.";break;case s.Alert.Description.decompression_failure:r="Decompression failed.";break;case s.Alert.Description.handshake_failure:r="Handshake failure.";break;case s.Alert.Description.bad_certificate:r="Bad certificate.";break;case s.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case s.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case s.Alert.Description.certificate_expired:r="Certificate expired.";break;case s.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case s.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case s.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case s.Alert.Description.access_denied:r="Access denied.";break;case s.Alert.Description.decode_error:r="Decode error.";break;case s.Alert.Description.decrypt_error:r="Decrypt error.";break;case s.Alert.Description.export_restriction:r="Export restriction.";break;case s.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case s.Alert.Description.insufficient_security:r="Insufficient security.";break;case s.Alert.Description.internal_error:r="Internal error.";break;case s.Alert.Description.user_canceled:r="User canceled.";break;case s.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}return i.description===s.Alert.Description.close_notify?e.close():(e.error(e,{message:r,send:!1,origin:e.entity===s.ConnectionEnd.client?"server":"client",alert:i}),void e.process())},s.handleHandshake=function(t,r){var n=r.fragment,i=n.getByte(),a=n.getInt24();if(a>n.length())return t.fragmented=r,r.fragment=e.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var o=n.bytes(a+4);n.read+=4,i in P[t.entity][t.expect]?(t.entity===s.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),i!==s.HandshakeType.hello_request&&i!==s.HandshakeType.certificate_verify&&i!==s.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),P[t.entity][t.expect][i](t,r,a)):s.handleUnexpected(t,r)},s.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},s.handleHeartbeat=function(t,r){var n=r.fragment,i=n.getByte(),a=n.getInt16(),o=n.getBytes(a);if(i===s.HeartbeatMessageType.heartbeat_request){if(t.handshaking||a>o.length)return t.process();s.queue(t,s.createRecord(t,{type:s.ContentType.heartbeat,data:s.createHeartbeat(s.HeartbeatMessageType.heartbeat_response,o)})),s.flush(t)}else if(i===s.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,e.util.createBuffer(o))}t.process()};var u=0,c=1,l=2,f=3,h=4,p=5,d=6,y=7,g=8,v=0,m=1,E=2,C=3,b=4,A=5,S=6,B=s.handleUnexpected,w=s.handleChangeCipherSpec,T=s.handleAlert,I=s.handleHandshake,_=s.handleApplicationData,k=s.handleHeartbeat,D=[];D[s.ConnectionEnd.client]=[[B,T,I,B,k],[B,T,I,B,k],[B,T,I,B,k],[B,T,I,B,k],[B,T,I,B,k],[w,T,B,B,k],[B,T,I,B,k],[B,T,I,_,k],[B,T,I,B,k]],D[s.ConnectionEnd.server]=[[B,T,I,B,k],[B,T,I,B,k],[B,T,I,B,k],[B,T,I,B,k],[w,T,B,B,k],[B,T,I,B,k],[B,T,I,_,k],[B,T,I,B,k]];var R=s.handleHelloRequest,N=s.handleServerHello,L=s.handleCertificate,x=s.handleServerKeyExchange,U=s.handleCertificateRequest,F=s.handleServerHelloDone,O=s.handleFinished,P=[];P[s.ConnectionEnd.client]=[[B,B,N,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,L,x,U,F,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,x,U,F,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,B,U,F,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,B,B,F,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O],[R,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[R,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]];var M=s.handleClientHello,V=s.handleClientKeyExchange,j=s.handleCertificateVerify;P[s.ConnectionEnd.server]=[[B,M,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,L,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,V,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,j,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]],s.generateKeys=function(e,r){var n=t,i=r.client_random+r.server_random;e.session.resuming||(r.master_secret=n(r.pre_master_secret,"master secret",i,48).bytes(),r.pre_master_secret=null),i=r.server_random+r.client_random;var a=2*r.mac_key_length+2*r.enc_key_length,o=e.version.major===s.Versions.TLS_1_0.major&&e.version.minor===s.Versions.TLS_1_0.minor;o&&(a+=2*r.fixed_iv_length);var u=n(r.master_secret,"key expansion",i,a),c={client_write_MAC_key:u.getBytes(r.mac_key_length),server_write_MAC_key:u.getBytes(r.mac_key_length),client_write_key:u.getBytes(r.enc_key_length),server_write_key:u.getBytes(r.enc_key_length)};return o&&(c.client_write_IV=u.getBytes(r.fixed_iv_length),c.server_write_IV=u.getBytes(r.fixed_iv_length)),c},s.createConnectionState=function(e){var t=e.entity===s.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},a={read:r(),write:r()};if(a.read.update=function(e,t){return a.read.cipherFunction(t,a.read)?a.read.compressFunction(e,t,a.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_record_mac}}),!e.fail},a.write.update=function(e,t){return a.write.compressFunction(e,t,a.write)?a.write.cipherFunction(t,a.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}),!e.fail},e.session){var o=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(o),o.keys=s.generateKeys(e,o),a.read.macKey=t?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,a.write.macKey=t?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(a,e,o),o.compression_algorithm){case s.CompressionMethod.none:break;case s.CompressionMethod.deflate:a.read.compressFunction=i,a.write.compressFunction=n;break;default:throw new Error("Unsupported compression algorithm.")}}return a},s.createRandom=function(){var t=new Date,r=+t+6e4*t.getTimezoneOffset(),n=e.util.createBuffer();return n.putInt32(r),n.putBytes(e.random.getBytes(28)),n},s.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r},s.createAlert=function(t,r){var n=e.util.createBuffer();return n.putByte(r.level),n.putByte(r.description),s.createRecord(t,{type:s.ContentType.alert,data:n})},s.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var r=e.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var i=t.cipherSuites[n];r.putByte(i.id[0]),r.putByte(i.id[1])}var a=r.length(),u=e.util.createBuffer();u.putByte(s.CompressionMethod.none);var c=u.length(),l=e.util.createBuffer();if(t.virtualHost){var f=e.util.createBuffer();f.putByte(0),f.putByte(0);var h=e.util.createBuffer();h.putByte(0),o(h,2,e.util.createBuffer(t.virtualHost));var p=e.util.createBuffer();o(p,2,h),o(f,2,p),l.putBuffer(f)}var d=l.length();d>0&&(d+=2);var y=t.session.id,g=y.length+1+2+4+28+2+a+1+c+d,v=e.util.createBuffer();return v.putByte(s.HandshakeType.client_hello),v.putInt24(g),v.putByte(t.version.major),v.putByte(t.version.minor),v.putBytes(t.session.sp.client_random),o(v,1,e.util.createBuffer(y)),o(v,2,r),o(v,1,u),d>0&&o(v,2,l),v},s.createServerHello=function(t){var r=t.session.id,n=r.length+1+2+4+28+2+1,i=e.util.createBuffer();return i.putByte(s.HandshakeType.server_hello),i.putInt24(n),i.putByte(t.version.major),i.putByte(t.version.minor),i.putBytes(t.session.sp.server_random),o(i,1,e.util.createBuffer(r)),i.putByte(t.session.cipherSuite.id[0]),i.putByte(t.session.cipherSuite.id[1]),i.putByte(t.session.compressionMethod),i},s.createCertificate=function(t){var r=t.entity===s.ConnectionEnd.client,n=null;if(t.getCertificate){var i;i=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,i)}var a=e.util.createBuffer();if(null!==n)try{e.util.isArray(n)||(n=[n]);for(var u=null,c=0;c<n.length;++c){var l=e.pem.decode(n[c])[0];if("CERTIFICATE"!==l.type&&"X509 CERTIFICATE"!==l.type&&"TRUSTED CERTIFICATE"!==l.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=l.type,f}if(l.procType&&"ENCRYPTED"===l.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var h=e.util.createBuffer(l.body);null===u&&(u=e.asn1.fromDer(h.bytes(),!1));var p=e.util.createBuffer();o(p,3,h),a.putBuffer(p)}n=e.pki.certificateFromAsn1(u),r?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}var d=3+a.length(),y=e.util.createBuffer();return y.putByte(s.HandshakeType.certificate),y.putInt24(d),o(y,3,a),y},s.createClientKeyExchange=function(t){var r=e.util.createBuffer();r.putByte(t.session.clientHelloVersion.major),r.putByte(t.session.clientHelloVersion.minor),r.putBytes(e.random.getBytes(46));var n=t.session.sp;n.pre_master_secret=r.getBytes();var i=t.session.serverCertificate.publicKey;r=i.encrypt(n.pre_master_secret);var a=r.length+2,o=e.util.createBuffer();return o.putByte(s.HandshakeType.client_key_exchange),o.putInt24(a),o.putInt16(r.length),o.putBytes(r),o},s.createServerKeyExchange=function(t){var r=0,n=e.util.createBuffer();return r>0&&(n.putByte(s.HandshakeType.server_key_exchange),n.putInt24(r)),n},s.getClientSignature=function(t,r){var n=e.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(t,r,n){var i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.clientCertificate),i=e.pki.privateKeyFromPem(i)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}null===i?t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):r=i.sign(r,null),n(t,r)},t.getSignature(t,n,r)},s.createCertificateVerify=function(t,r){var n=r.length+2,i=e.util.createBuffer();return i.putByte(s.HandshakeType.certificate_verify),i.putInt24(n),i.putInt16(r.length),i.putBytes(r),i},s.createCertificateRequest=function(t){var r=e.util.createBuffer();r.putByte(1);var n=e.util.createBuffer();for(var i in t.caStore.certs){var a=t.caStore.certs[i],u=e.pki.distinguishedNameToAsn1(a.subject),c=e.asn1.toDer(u);n.putInt16(c.length()),n.putBuffer(c)}var l=1+r.length()+2+n.length(),f=e.util.createBuffer();return f.putByte(s.HandshakeType.certificate_request),f.putInt24(l),o(f,1,r),o(f,2,n),f},s.createServerHelloDone=function(t){var r=e.util.createBuffer();return r.putByte(s.HandshakeType.server_hello_done),r.putInt24(0),r},s.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},s.createFinished=function(r){var n=e.util.createBuffer();n.putBuffer(r.session.md5.digest()),n.putBuffer(r.session.sha1.digest());var i=r.entity===s.ConnectionEnd.client,a=r.session.sp,o=12,u=t,c=i?"client finished":"server finished";n=u(a.master_secret,c,n.getBytes(),o);var l=e.util.createBuffer();return l.putByte(s.HandshakeType.finished),l.putInt24(n.length()),l.putBuffer(n),l},s.createHeartbeat=function(t,r,n){"undefined"==typeof n&&(n=r.length);var i=e.util.createBuffer();i.putByte(t),i.putInt16(n),i.putBytes(r);var a=i.length(),o=Math.max(16,a-n-3);return i.putBytes(e.random.getBytes(o)),i},s.queue=function(t,r){if(r&&(0!==r.fragment.length()||r.type!==s.ContentType.handshake&&r.type!==s.ContentType.alert&&r.type!==s.ContentType.change_cipher_spec)){if(r.type===s.ContentType.handshake){var n=r.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n),n=null}var i;if(r.fragment.length()<=s.MaxFragment)i=[r];else{i=[];for(var a=r.fragment.bytes();a.length>s.MaxFragment;)i.push(s.createRecord(t,{type:r.type,data:e.util.createBuffer(a.slice(0,s.MaxFragment))})),a=a.slice(s.MaxFragment);a.length>0&&i.push(s.createRecord(t,{type:r.type,data:e.util.createBuffer(a)}))}for(var o=0;o<i.length&&!t.fail;++o){var u=i[o],c=t.state.current.write;c.update(t,u)&&t.records.push(u)}}},s.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var K=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return s.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return s.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return s.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return s.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return s.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return s.Alert.Description.unknown_ca;default:return s.Alert.Description.bad_certificate}},q=function(t){switch(t){case!0:return!0;case s.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case s.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case s.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case s.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case s.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case s.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};s.verifyCertificateChain=function(t,r){try{e.pki.verifyCertificateChain(t.caStore,r,function(r,n,i){var a=(K(r),t.verify(t,r,n,i));if(a!==!0){if("object"==typeof a&&!e.util.isArray(a)){var o=new Error("The application rejected the certificate.");throw o.send=!0,o.alert={level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate},a.message&&(o.message=a.message),a.alert&&(o.alert.description=a.alert),o}a!==r&&(a=q(a))}return a})}catch(r){var n=r;("object"!=typeof n||e.util.isArray(n))&&(n={send:!0,alert:{level:s.Alert.Level.fatal,description:K(r)}}),"send"in n||(n.send=!0),"alert"in n||(n.alert={level:s.Alert.Level.fatal,description:K(n.error)}),t.error(t,n)}return!t.fail},s.createSessionCache=function(t,r){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{n={},n.cache=t||{},n.capacity=Math.max(r||100,1),n.order=[];for(var i in t)n.order.length<=r?n.order.push(i):delete t[i];n.getSession=function(t){var r=null,i=null;if(t?i=e.util.bytesToHex(t):n.order.length>0&&(i=n.order[0]),null!==i&&i in n.cache){r=n.cache[i],delete n.cache[i];for(var a in n.order)if(n.order[a]===i){n.order.splice(a,1);break}}return r},n.setSession=function(t,r){if(n.order.length===n.capacity){var i=n.order.shift();delete n.cache[i]}var i=e.util.bytesToHex(t);n.order.push(i),n.cache[i]=r}}return n},s.createConnection=function(t){var r=null;r=t.caStore?e.util.isArray(t.caStore)?e.pki.createCaStore(t.caStore):t.caStore:e.pki.createCaStore();var n=t.cipherSuites||null;if(null===n){n=[];for(var i in s.CipherSuites)n.push(s.CipherSuites[i])}var a=t.server?s.ConnectionEnd.server:s.ConnectionEnd.client,o=t.sessionCache?s.createSessionCache(t.sessionCache):null,c={version:{major:s.Version.major,minor:s.Version.minor},entity:a,sessionId:t.sessionId,caStore:r,sessionCache:o,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,r,n){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===s.ConnectionEnd.client?"client":"server"),r.send&&(s.queue(e,s.createAlert(e,r.alert)),s.flush(e));var n=r.fatal!==!1;n&&(e.fail=!0),t.error(e,r),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};c.reset=function(e){c.version={major:s.Version.major,minor:s.Version.minor},c.record=null,c.session=null,c.peerCertificate=null,c.state={pending:null,current:null},c.expect=c.entity===s.ConnectionEnd.client?u:v,c.fragmented=null,c.records=[],c.open=!1,c.handshakes=0,c.handshaking=!1,c.isConnected=!1,c.fail=!e&&"undefined"!=typeof e,c.input.clear(),c.tlsData.clear(),c.data.clear(),c.state.current=s.createConnectionState(c)},c.reset();var l=function(e,t){var r=t.type-s.ContentType.change_cipher_spec,n=D[e.entity][e.expect];r in n?n[r](e,t):s.handleUnexpected(e,t)},f=function(t){var r=0,n=t.input,i=n.length();if(i<5)r=5-i;else{t.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:e.util.createBuffer(),ready:!1};var a=t.record.version.major===t.version.major;a&&t.session&&t.session.version&&(a=t.record.version.minor===t.version.minor),a||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}})}return r},h=function(e){var t=0,r=e.input,n=r.length();if(n<e.record.length)t=e.record.length-n;else{e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact();var i=e.state.current.read;i.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return c.handshake=function(t){if(c.entity!==s.ConnectionEnd.client)c.error(c,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(c.handshaking)c.error(c,{message:"Handshake already in progress.",fatal:!1});else{c.fail&&!c.open&&0===c.handshakes&&(c.fail=!1),c.handshaking=!0,t=t||"";var r=null;t.length>0&&(c.sessionCache&&(r=c.sessionCache.getSession(t)),null===r&&(t="")),0===t.length&&c.sessionCache&&(r=c.sessionCache.getSession(),null!==r&&(t=r.id)),c.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},r&&(c.version=r.version,c.session.sp=r.sp),c.session.sp.client_random=s.createRandom().getBytes(),c.open=!0,s.queue(c,s.createRecord(c,{type:s.ContentType.handshake,data:s.createClientHello(c)})),s.flush(c)}},c.process=function(e){var t=0;return e&&c.input.putBytes(e),c.fail||(null!==c.record&&c.record.ready&&c.record.fragment.isEmpty()&&(c.record=null),null===c.record&&(t=f(c)),!c.fail&&null!==c.record&&!c.record.ready&&(t=h(c)),!c.fail&&null!==c.record&&c.record.ready&&l(c,c.record)),t},c.prepare=function(t){return s.queue(c,s.createRecord(c,{type:s.ContentType.application_data,data:e.util.createBuffer(t)})),s.flush(c)},c.prepareHeartbeatRequest=function(t,r){return t instanceof e.util.ByteBuffer&&(t=t.bytes()),"undefined"==typeof r&&(r=t.length),c.expectedHeartbeatPayload=t,s.queue(c,s.createRecord(c,{type:s.ContentType.heartbeat,data:s.createHeartbeat(s.HeartbeatMessageType.heartbeat_request,t,r)})),s.flush(c)},c.close=function(e){if(!c.fail&&c.sessionCache&&c.session){var t={id:c.session.id,version:c.session.version,sp:c.session.sp};t.sp.keys=null,c.sessionCache.setSession(t.id,t)}c.open&&(c.open=!1,c.input.clear(),(c.isConnected||c.handshaking)&&(c.isConnected=c.handshaking=!1,s.queue(c,s.createAlert(c,{level:s.Alert.Level.warning,description:s.Alert.Description.close_notify})),s.flush(c)),c.closed(c)),c.reset(e)},c},e.tls=e.tls||{};for(var H in s)"function"!=typeof s[H]&&(e.tls[H]=s[H]);e.tls.prf_tls1=t,e.tls.hmac_sha1=r,e.tls.createSessionCache=s.createSessionCache,e.tls.createConnection=s.createConnection}var t="tls";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/tls",["require","module","./asn1","./hmac","./md","./pem","./pki","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,i){var o=n.entity===e.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",o?i.keys.server_write_key:i.keys.client_write_key),iv:o?i.keys.server_write_IV:i.keys.client_write_IV},t.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",o?i.keys.client_write_key:i.keys.server_write_key),iv:o?i.keys.client_write_IV:i.keys.server_write_IV},t.read.cipherFunction=a,t.write.cipherFunction=r,t.read.macLength=t.write.macLength=i.mac_length,t.read.macFunction=t.write.macFunction=s.hmac_sha1}function r(t,r){var i=!1,a=r.macFunction(r.macKey,r.sequenceNumber,t);t.fragment.putBytes(a),r.updateSequenceNumber();var o;o=t.version.minor===s.Versions.TLS_1_0.minor?r.cipherState.init?null:r.cipherState.iv:e.random.getBytesSync(16),r.cipherState.init=!0;var u=r.cipherState.cipher;return u.start({iv:o}),t.version.minor>=s.Versions.TLS_1_1.minor&&u.output.putBytes(o),u.update(t.fragment),u.finish(n)&&(t.fragment=u.output,t.length=t.fragment.length(),i=!0),i}function n(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function i(e,t,r){var n=!0;if(r){for(var i=t.length(),a=t.last(),o=i-1-a;o<i-1;++o)n=n&&t.at(o)==a;n&&t.truncate(a+1)}return n}function a(t,r){var n=!1;++u;var a;a=t.version.minor===s.Versions.TLS_1_0.minor?r.cipherState.init?null:r.cipherState.iv:t.fragment.getBytes(16),r.cipherState.init=!0;var c=r.cipherState.cipher;c.start({iv:a}),c.update(t.fragment),n=c.finish(i);var l=r.macLength,f=e.random.getBytesSync(l),h=c.output.length();h>=l?(t.fragment=c.output.getBytes(h-l),f=c.output.getBytes(l)):t.fragment=c.output.getBytes(),t.fragment=e.util.createBuffer(t.fragment),t.length=t.fragment.length();var p=r.macFunction(r.macKey,r.sequenceNumber,t);return r.updateSequenceNumber(),n=o(r.macKey,f,p)&&n}function o(t,r,n){var i=e.hmac.create();return i.start("SHA1",t),i.update(r),r=i.digest().getBytes(),i.start(null,null),i.update(n),n=i.digest().getBytes(),r===n}var s=e.tls;s.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=s.BulkCipherAlgorithm.aes,e.cipher_type=s.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=s.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t},s.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=s.BulkCipherAlgorithm.aes,e.cipher_type=s.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=s.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t};var u=0}var t="aesCipherSuites";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aesCipherSuites",["require","module","./aes","./tls"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,r){var n;return"undefined"==typeof t?n=e.debug.storage:t in e.debug.storage&&(n="undefined"==typeof r?e.debug.storage[t]:e.debug.storage[t][r]),n},e.debug.set=function(t,r,n){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][r]=n},e.debug.clear=function(t,r){"undefined"==typeof t?e.debug.storage={}:t in e.debug.storage&&("undefined"==typeof r?delete e.debug.storage[t]:delete e.debug.storage[t][r])}}var t="debug";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/debug",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r,n,i){t.generate=function(t,a){for(var o=new e.util.ByteBuffer,s=Math.ceil(a/i)+n,u=new e.util.ByteBuffer,c=n;c<s;++c){u.putInt32(c),r.start(),r.update(t+u.getBytes());var l=r.digest();o.putBytes(l.getBytes(i))}return o.truncate(o.length()-a),o.getBytes()}}e.kem=e.kem||{};var r=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(t,n){n=n||{};var i=n.prng||e.random,a={};return a.encrypt=function(n,a){var o,s=Math.ceil(n.n.bitLength()/8);do o=new r(e.util.bytesToHex(i.getBytesSync(s)),16).mod(n.n);while(o.equals(r.ZERO));o=e.util.hexToBytes(o.toString(16));var u=s-o.length;u>0&&(o=e.util.fillString(String.fromCharCode(0),u)+o);var c=n.encrypt(o,"NONE"),l=t.generate(o,a);return{encapsulation:c,key:l}},a.decrypt=function(e,r,n){var i=e.decrypt(r,"NONE");return t.generate(i,n)},a},e.kem.kdf1=function(e,r){t(this,e,0,r||e.digestLength)},e.kem.kdf2=function(e,r){t(this,e,1,r||e.digestLength)}}var t="kem";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/kem",["require","module","./util","./random","./jsbn"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},r=[],n=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var i=0;i<e.log.levels.length;++i){var a=e.log.levels[i];t[a]={index:i,name:a.toUpperCase()}}e.log.logMessage=function(n){for(var i=t[n.level].index,a=0;a<r.length;++a){var o=r[a];if(o.flags&e.log.NO_LEVEL_CHECK)o.f(n);else{var s=t[o.level].index;i<=s&&o.f(o,n)}}},e.log.prepareStandard=function(e){"standard"in e||(e.standard=t[e.level].name+" ["+e.category+"] "+e.message)},e.log.prepareFull=function(t){if(!("full"in t)){var r=[t.message];r=r.concat([]||t.arguments),t.full=e.util.format.apply(this,r)}},e.log.prepareStandardFull=function(t){"standardFull"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)};for(var o=["error","warning","info","debug","verbose"],i=0;i<o.length;++i)(function(t){e.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:r,message:n,arguments:i};e.log.logMessage(a)}})(o[i]);if(e.log.makeLogger=function(t){var r={flags:0,f:t};return e.log.setLevel(r,"none"),r},e.log.setLevel=function(t,r){var n=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var i=0;i<e.log.levels.length;++i){var a=e.log.levels[i];if(r==a){t.level=r,n=!0;break}}return n},e.log.lock=function(t,r){"undefined"==typeof r||r?t.flags|=e.log.LEVEL_LOCKED:t.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){r.push(e)},"undefined"!=typeof console&&"log"in console){var s;if(console.error&&console.warn&&console.info&&console.debug){var u={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},c=function(t,r){e.log.prepareStandard(r);var n=u[r.level],i=[r.standard];i=i.concat(r.arguments.slice()),n.apply(console,i)};s=e.log.makeLogger(c)}else{var c=function(t,r){e.log.prepareStandardFull(r),console.log(r.standardFull)};s=e.log.makeLogger(c)}e.log.setLevel(s,"debug"),e.log.addLogger(s),n=s}else console={log:function(){}};if(null!==n){var l=e.util.getQueryVariables();if("console.level"in l&&e.log.setLevel(n,l["console.level"].slice(-1)[0]),"console.lock"in l){var f=l["console.lock"].slice(-1)[0];"true"==f&&e.log.lock(n)}}e.log.consoleLogger=n}var t="log";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/log",["require","module","./util"],function(){
s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){var r={},n=[];if(!h.validate(t,p.asn1.recipientInfoValidator,r,n)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=n,i}return{version:r.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(r.issuer),serialNumber:e.util.createBuffer(r.serial).toHex(),encryptedContent:{algorithm:h.derToOid(r.encAlgorithm),parameter:r.encParameter.value,content:r.encKey}}}function r(t){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(t.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.encryptedContent.algorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")]),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function n(e){for(var r=[],n=0;n<e.length;++n)r.push(t(e[n]));return r}function i(e){for(var t=[],n=0;n<e.length;++n)t.push(r(e[n]));return t}function a(t){var r={},n=[];if(!h.validate(t,p.asn1.signerInfoValidator,r,n)){var i=new Error("Cannot read PKCS#7 SignerInfo. ASN.1 object is not an PKCS#7 SignerInfo.");throw i.errors=n,i}var a={version:r.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(r.issuer),serialNumber:e.util.createBuffer(r.serial).toHex(),digestAlgorithm:h.derToOid(r.digestAlgorithm),signatureAlgorithm:h.derToOid(r.signatureAlgorithm),signature:r.signature,authenticatedAttributes:[],unauthenticatedAttributes:[]};r.authenticatedAttributes||[],r.unauthenticatedAttributes||[];return a}function o(t){var r=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(t.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.digestAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&r.value.push(t.authenticatedAttributesAsn1),r.value.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.signatureAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")])),r.value.push(h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=h.create(h.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var a=t.unauthenticatedAttributes[i];n.values.push(u(a))}r.value.push(n)}return r}function s(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}function u(t){var r;if(t.type===e.pki.oids.contentType)r=h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.value).getBytes());else if(t.type===e.pki.oids.messageDigest)r=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===e.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=t.value;if("string"==typeof a){var o=Date.parse(a);a=isNaN(o)?13===a.length?h.utcTimeToDate(a):h.generalizedTimeToDate(a):new Date(o)}r=a>=n&&a<i?h.create(h.Class.UNIVERSAL,h.Type.UTCTIME,!1,h.dateToUtcTime(a)):h.create(h.Class.UNIVERSAL,h.Type.GENERALIZEDTIME,!1,h.dateToGeneralizedTime(a))}return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.type).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[r])])}function c(t){return[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.pki.oids.data).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.algorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,t.parameter.getBytes())]),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,t.content.getBytes())])]}function l(t,r,n){var i={},a=[];if(!h.validate(r,n,i,a)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=h.derToOid(i.contentType);if(s!==e.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var u="";if(e.util.isArray(i.encryptedContent))for(var c=0;c<i.encryptedContent.length;++c){if(i.encryptedContent[c].type!==h.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");u+=i.encryptedContent[c].value}else u=i.encryptedContent;t.encryptedContent={algorithm:h.derToOid(i.encAlgorithm),parameter:e.util.createBuffer(i.encParameter.value),content:e.util.createBuffer(u)}}if(i.content){var u="";if(e.util.isArray(i.content))for(var c=0;c<i.content.length;++c){if(i.content[c].type!==h.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");u+=i.content[c].value}else u=i.content;t.content=e.util.createBuffer(u)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function f(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var r;switch(t.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:r=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:r=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(r.start(t.encryptedContent.parameter),r.update(t.encryptedContent.content),!r.finish())throw new Error("Symmetric decryption failed.");t.content=r.output}}var h=e.asn1,p=e.pkcs7=e.pkcs7||{};p.messageFromPem=function(t){var r=e.pem.decode(t)[0];if("PKCS7"!==r.type){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=r.type,n}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=h.fromDer(r.body);return p.messageFromAsn1(i)},p.messageToPem=function(t,r){var n={type:"PKCS7",body:h.toDer(t.toAsn1()).getBytes()};return e.pem.encode(n,{maxline:r})},p.messageFromAsn1=function(t){var r={},n=[];if(!h.validate(t,p.asn1.contentInfoValidator,r,n)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=n,i}var a,o=h.derToOid(r.contentType);switch(o){case e.pki.oids.envelopedData:a=p.createEnvelopedData();break;case e.pki.oids.encryptedData:a=p.createEncryptedData();break;case e.pki.oids.signedData:a=p.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+o+" is not (yet) supported.")}return a.fromAsn1(r.content.value[0]),a},p.createSignedData=function(){function t(){for(var t={},r=0;r<n.signers.length;++r){var i=n.signers[r],a=i.digestAlgorithm;a in t||(t[a]=e.md[e.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=t[a]:i.md=e.md[e.pki.oids[a]].create()}n.digestAlgorithmIdentifiers=[];for(var a in t)n.digestAlgorithmIdentifiers.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(a).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")]));return t}function r(t){if(n.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var r=h.derToOid(n.contentInfo.value[0].value),i=n.contentInfo.value[1];i=i.value[0];var a=h.toDer(i);a.getByte(),h.getBerValueLength(a),a=a.getBytes();for(var o in t)t[o].start().update(a);for(var c=new Date,l=0;l<n.signers.length;++l){var f=n.signers[l];if(0===f.authenticatedAttributes.length){if(r!==e.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[]),d=0;d<f.authenticatedAttributes.length;++d){var y=f.authenticatedAttributes[d];y.type===e.pki.oids.messageDigest?y.value=t[f.digestAlgorithm].digest():y.type===e.pki.oids.signingTime&&(y.value||(y.value=c)),p.value.push(u(y)),f.authenticatedAttributesAsn1.value.push(u(y))}a=h.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}n.signerInfos=s(n.signers)}var n=null;return n={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){l(n,t,p.asn1.signedDataValidator),n.certificates=[],n.crls=[],n.digestAlgorithmIdentifiers=[],n.contentInfo=null,n.signerInfos=[];for(var r=n.rawCapture.certificates.value,i=0;i<r.length;++i)n.certificates.push(e.pki.certificateFromAsn1(r[i]))},toAsn1:function(){n.contentInfo||n.sign();for(var t=[],r=0;r<n.certificates.length;++r)t.push(e.pki.certificateToAsn1(n.certificates[r]));var i=[],a=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(n.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,n.digestAlgorithmIdentifiers),n.contentInfo])]);return t.length>0&&a.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&a.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(h.create(h.Class.UNIVERSAL,h.Type.SET,!0,n.signerInfos)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(n.type).getBytes()),a])},addSigner:function(t){var r=t.issuer,i=t.serialNumber;if(t.certificate){var a=t.certificate;"string"==typeof a&&(a=e.pki.certificateFromPem(a)),r=a.issuer.attributes,i=a.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=e.pki.privateKeyFromPem(o));var s=t.digestAlgorithm||e.pki.oids.sha1;switch(s){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,f=0;f<u.length;++f){var h=u[f];if(c||h.type!==e.pki.oids.contentType){if(l||h.type!==e.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}n.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:s,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(){if(("object"!=typeof n.content||null===n.contentInfo)&&(n.contentInfo=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.pki.oids.data).getBytes())]),"content"in n)){var i;n.content instanceof e.util.ByteBuffer?i=n.content.bytes():"string"==typeof n.content&&(i=e.util.encodeUtf8(n.content)),n.contentInfo.value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,i)]))}if(0!==n.signers.length){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t)),n.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},p.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){l(t,e,p.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),f(t)}}},p.createEnvelopedData=function(){var t=null;return t={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=l(t,e,p.asn1.envelopedDataValidator);t.recipients=n(r.recipientInfos.value)},toAsn1:function(){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(t.type).getBytes()),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(t.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,i(t.recipients)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,c(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(a[s].type!==r[s].type||a[s].value!==r[s].value){o=!1;break}if(o)return i}}return null},decrypt:function(r,n){if(void 0===t.encryptedContent.key&&void 0!==r&&void 0!==n)switch(r.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var i=n.decrypt(r.encryptedContent.content);t.encryptedContent.key=e.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+r.encryptedContent.algorithm)}f(t)},addRecipient:function(r){t.recipients.push({version:0,issuer:r.issuer.attributes,serialNumber:r.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:r.publicKey}})},encrypt:function(r,n){if(void 0===t.encryptedContent.content){n=n||t.encryptedContent.algorithm,r=r||t.encryptedContent.key;var i,a,o;switch(n){case e.pki.oids["aes128-CBC"]:i=16,a=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:i=24,a=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:i=32,a=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:i=24,a=8,o=e.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===r)r=e.util.createBuffer(e.random.getBytes(i));else if(r.length()!=i)throw new Error("Symmetric key has wrong length; got "+r.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=r,t.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(a));var s=o(r);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var u=0;u<t.recipients.length;++u){var c=t.recipients[u];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}}}}var t="pkcs7";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7",["require","module","./aes","./asn1","./des","./oids","./pem","./pkcs7asn1","./random","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r){var n=r.toString(16);n[0]>="8"&&(n="00"+n);var i=e.util.hexToBytes(n);t.putInt32(i.length),t.putBytes(i)}function r(e,t){e.putInt32(t.length),e.putString(t)}function n(){for(var t=e.md.sha1.create(),r=arguments.length,n=0;n<r;++n)t.update(arguments[n]);return t.digest()}var i=e.ssh=e.ssh||{};i.privateKeyToPutty=function(i,a,o){o=o||"",a=a||"";var s="ssh-rsa",u=""===a?"none":"aes256-cbc",c="PuTTY-User-Key-File-2: "+s+"\r\n";c+="Encryption: "+u+"\r\n",c+="Comment: "+o+"\r\n";var l=e.util.createBuffer();r(l,s),t(l,i.e),t(l,i.n);var f=e.util.encode64(l.bytes(),64),h=Math.floor(f.length/66)+1;c+="Public-Lines: "+h+"\r\n",c+=f;var p=e.util.createBuffer();t(p,i.d),t(p,i.p),t(p,i.q),t(p,i.qInv);var d;if(a){var y=p.length()+16-1;y-=y%16;var g=n(p.bytes());g.truncate(g.length()-y+p.length()),p.putBuffer(g);var v=e.util.createBuffer();v.putBuffer(n("\0\0\0\0",a)),v.putBuffer(n("\0\0\0",a));var m=e.aes.createEncryptionCipher(v.truncate(8),"CBC");m.start(e.util.createBuffer().fillWithByte(0,16)),m.update(p.copy()),m.finish();var E=m.output;E.truncate(16),d=e.util.encode64(E.bytes(),64)}else d=e.util.encode64(p.bytes(),64);h=Math.floor(d.length/66)+1,c+="\r\nPrivate-Lines: "+h+"\r\n",c+=d;var C=n("putty-private-key-file-mac-key",a),b=e.util.createBuffer();r(b,s),r(b,u),r(b,o),b.putInt32(l.length()),b.putBuffer(l),b.putInt32(p.length()),b.putBuffer(p);var A=e.hmac.create();return A.start("sha1",C),A.update(b.bytes()),c+="\r\nPrivate-MAC: "+A.digest().toHex()+"\r\n"},i.publicKeyToOpenSSH=function(n,i){var a="ssh-rsa";i=i||"";var o=e.util.createBuffer();return r(o,a),t(o,n.e),t(o,n.n),a+" "+e.util.encode64(o.bytes())+" "+i},i.privateKeyToOpenSSH=function(t,r){return r?e.pki.encryptRsaPrivateKey(t,r,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(t)},i.getPublicKeyFingerprint=function(n,i){i=i||{};var a=i.md||e.md.md5.create(),o="ssh-rsa",s=e.util.createBuffer();r(s,o),t(s,n.e),t(s,n.n),a.start(),a.update(s.getBytes());var u=a.digest();if("hex"===i.encoding){var c=u.toHex();return i.delimiter?c.match(/.{2}/g).join(i.delimiter):c}if("binary"===i.encoding)return u.getBytes();if(i.encoding)throw new Error('Unknown encoding "'+i.encoding+'".');return u}}var t="ssh";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/ssh",["require","module","./aes","./hmac","./md5","./sha1","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t="forge.task",r=0,n={},i=0;e.debug.set(t,"tasks",n);var a={};e.debug.set(t,"queues",a);var o="?",s=30,u=20,c="ready",l="running",f="blocked",h="sleeping",p="done",d="error",y="stop",g="start",v="block",m="unblock",E="sleep",C="wakeup",b="cancel",A="fail",S={};S[c]={},S[c][y]=c,S[c][g]=l,S[c][b]=p,S[c][A]=d,S[l]={},S[l][y]=c,S[l][g]=l,S[l][v]=f,S[l][m]=l,S[l][E]=h,S[l][C]=l,S[l][b]=p,S[l][A]=d,S[f]={},S[f][y]=f,S[f][g]=f,S[f][v]=f,S[f][m]=f,S[f][E]=f,S[f][C]=f,S[f][b]=p,S[f][A]=d,S[h]={},S[h][y]=h,S[h][g]=h,S[h][v]=h,S[h][m]=h,S[h][E]=h,S[h][C]=h,S[h][b]=p,S[h][A]=d,S[p]={},S[p][y]=p,S[p][g]=p,S[p][v]=p,S[p][m]=p,S[p][E]=p,S[p][C]=p,S[p][b]=p,S[p][A]=d,S[d]={},S[d][y]=d,S[d][g]=d,S[d][v]=d,S[d][m]=d,S[d][E]=d,S[d][C]=d,S[d][b]=d,S[d][A]=d;var B=function(a){this.id=-1,this.name=a.name||o,this.parent=a.parent||null,this.run=a.run,this.subtasks=[],this.error=!1,this.state=c,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=i++,n[this.id]=this,r>=1&&e.log.verbose(t,"[%s][%s] init",this.id,this.name,this)};B.prototype.debug=function(r){r=r||"",e.log.debug(t,r,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",a)},B.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var r=new B({run:t,name:e,parent:this});return r.state=l,r.type=this.type,r.successCallback=this.successCallback||null,r.failureCallback=this.failureCallback||null,this.subtasks.push(r),this},B.prototype.parallel=function(t,r){return e.util.isArray(t)&&(r=t,t=this.name),this.next(t,function(n){var i=n;i.block(r.length);for(var a=function(t,n){e.task.start({type:t,run:function(e){r[n](e)},success:function(e){i.unblock()},failure:function(e){i.unblock()}})},o=0;o<r.length;o++){var s=t+"__parallel-"+n.id+"-"+o,u=o;a(s,u)}})},B.prototype.stop=function(){this.state=S[this.state][y]},B.prototype.start=function(){this.error=!1,this.state=S[this.state][g],this.state===l&&(this.start=new Date,this.run(this),T(this,0))},B.prototype.block=function(e){e="undefined"==typeof e?1:e,this.blocks+=e,this.blocks>0&&(this.state=S[this.state][v])},B.prototype.unblock=function(e){return e="undefined"==typeof e?1:e,this.blocks-=e,0===this.blocks&&this.state!==p&&(this.state=l,T(this,0)),this.blocks},B.prototype.sleep=function(e){e="undefined"==typeof e?0:e,this.state=S[this.state][E];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=l,T(t,0)},e)},B.prototype.wait=function(e){e.wait(this)},B.prototype.wakeup=function(){this.state===h&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=l,T(this,0))},B.prototype.cancel=function(){this.state=S[this.state][b],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},B.prototype.fail=function(e){if(this.error=!0,I(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,T(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;I(t,!0)}this.failureCallback&&this.failureCallback(this)}};var w=function(e){e.error=!1,e.state=S[e.state][g],setTimeout(function(){e.state===l&&(e.swapTime=+new Date,e.run(e),T(e,0))},0)},T=function(e,t){var r=t>s||+new Date-e.swapTime>u,n=function(t){if(t++,e.state===l)if(r&&(e.swapTime=+new Date),e.subtasks.length>0){var n=e.subtasks.shift();n.error=e.error,n.swapTime=e.swapTime,n.userData=e.userData,n.run(n),n.error||T(n,t)}else I(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,T(e.parent,t))};r?setTimeout(n,0):n(t)},I=function(i,o){i.state=p,delete n[i.id],r>=1&&e.log.verbose(t,"[%s][%s] finish",i.id,i.name,i),null===i.parent&&(i.type in a?0===a[i.type].length?e.log.error(t,"[%s][%s] task queue empty [%s]",i.id,i.name,i.type):a[i.type][0]!==i?e.log.error(t,"[%s][%s] task not first in queue [%s]",i.id,i.name,i.type):(a[i.type].shift(),0===a[i.type].length?(r>=1&&e.log.verbose(t,"[%s][%s] delete queue [%s]",i.id,i.name,i.type),delete a[i.type]):(r>=1&&e.log.verbose(t,"[%s][%s] queue start next [%s] remain:%s",i.id,i.name,i.type,a[i.type].length),a[i.type][0].start())):e.log.error(t,"[%s][%s] task queue missing [%s]",i.id,i.name,i.type),o||(i.error&&i.failureCallback?i.failureCallback(i):!i.error&&i.successCallback&&i.successCallback(i)))};e.task=e.task||{},e.task.start=function(n){var i=new B({run:n.run,name:n.name||o});i.type=n.type,i.successCallback=n.success||null,i.failureCallback=n.failure||null,i.type in a?a[n.type].push(i):(r>=1&&e.log.verbose(t,"[%s][%s] create queue [%s]",i.id,i.name,i.type),a[i.type]=[i],w(i))},e.task.cancel=function(e){e in a&&(a[e]=[a[e][0]])},e.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var r in t)t[r].unblock()},e}}var t="task";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;i=function(e,t){t(n,o)}}var a,s=function(r,n){n.exports=function(n){var i=a.map(function(e){return r(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[t]}},u=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/task",["require","module","./debug","./log","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var e="forge";if("function"!=typeof i){if("object"!=typeof o||!o.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var t=!0;i=function(e,t){t(n,o)}}var r,a=function(t,n){n.exports=function(n){var i=r.map(function(e){return t(e)});if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<i.length;++a)"function"==typeof i[a]&&i[a](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},s=i;(i=function(e,n){return r="string"==typeof e?n.slice(2):e.slice(2),t?(delete i,s.apply(null,Array.prototype.slice.call(arguments,0))):(i=s,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/forge",["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){a.apply(null,Array.prototype.slice.call(arguments,0))})}(),n("js/forge")})}).call(t,r(5),r(116).setImmediate,r(147)(e),r(74).Buffer)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){console.log("-- Added DB Listener -- "),B.push(e)}function o(e){console.log("-- Removed DB Listener -- "),B=B.filter(function(t){return t!==e})}function s(e,t){return f("POST",e,t)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return f("GET",e,null,t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return f("DELETE",e,null,t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return f("PUT",e,null,t)}function f(e,t,r){var n,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v.default.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n={method:e,headers:new Headers},n.headers.set("X-Insomnia-Client",d()),r&&(n.body=(0,E.default)(r,null,2),n.headers.set("Content-Type","application/json")),s=s||A.getCurrentSessionId(),s&&n.headers.set("X-Session-Id",s),u.next=7,v.default.awrap(fetch(h(t),n));case 7:if(i=u.sent,403===i.status||402===i.status,a=i.headers.get("x-insomnia-command"),a&&p(a),i.ok){u.next=17;break}return o=new Error("Response "+i.status+" for "+t),u.next=15,v.default.awrap(i.text());case 15:throw o.message=u.sent,o;case 17:if("application/json"!==i.headers.get("content-type")){u.next=21;break}return u.abrupt("return",i.json());case 21:return u.abrupt("return",i.text());case 22:case"end":return u.stop()}},null,this)}function h(e){return y()?"http://localhost:8000"+e:"https://api.insomnia.rest"+e}function p(e){var t=(0,C.parse)(e,!0),r=""+t.hostname+t.pathname,n=JSON.parse((0,E.default)(t.query));B.map(function(e){return e(r,n)})}function d(){return(y()?"development":"production")+"::browser::"+S.version}function y(){return"production"!==e.env.NODE_ENV}Object.defineProperty(t,"__esModule",{value:!0});var g=r(3),v=i(g),m=r(78),E=i(m);t.onCommand=a,t.offCommand=o,t.post=s,t.get=u,t.del=c,t.put=l;var C=r(149),b=r(73),A=n(b),S=r(155),B=[]}).call(t,r(5))},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function a(e){return c.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=r(150),c=r(151);t.parse=i,t.resolve=o,t.resolveObject=s,t.format=a,t.Url=n;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),y=["'"].concat(d),g=["%","/","?",";","#"].concat(y),v=["/","?","#"],m=255,E=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},B=r(152);n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",a=e.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),e=a.join(i);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var f=h.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=B.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(s);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,s=s.substr(p.length)}if(r||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===s.substr(0,2);!w||p&&A[p]||(s=s.substr(2),this.slashes=!0)}if(!A[p]&&(w||p&&!S[p])){for(var T=-1,I=0;I<v.length;I++){var _=s.indexOf(v[I]);_!==-1&&(T===-1||_<T)&&(T=_)}var k,D;D=T===-1?s.lastIndexOf("@"):s.lastIndexOf("@",T),D!==-1&&(k=s.slice(0,D),s=s.slice(D+1),this.auth=decodeURIComponent(k)),T=-1;for(var I=0;I<g.length;I++){var _=s.indexOf(g[I]);_!==-1&&(T===-1||_<T)&&(T=_)}T===-1&&(T=s.length),this.host=s.slice(0,T),s=s.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var N=this.hostname.split(/\./),I=0,L=N.length;I<L;I++){var x=N[I];if(x&&!x.match(E)){for(var U="",F=0,O=x.length;F<O;F++)U+=x.charCodeAt(F)>127?"x":x[F];if(!U.match(E)){var P=N.slice(0,I),M=N.slice(I+1),V=x.match(C);V&&(P.push(V[1]),M.unshift(V[2])),M.length&&(s="/"+M.join(".")+s),this.hostname=P.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var j=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+j,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[d])for(var I=0,L=y.length;I<L;I++){var q=y[I];if(s.indexOf(q)!==-1){var H=encodeURIComponent(q);H===q&&(H=escape(q)),s=s.split(q).join(H)}}var z=s.indexOf("#");z!==-1&&(this.hash=s.substr(z),s=s.slice(0,z));var G=s.indexOf("?");if(G!==-1?(this.search=s.substr(G),this.query=s.substr(G+1),t&&(this.query=B.parse(this.query)),s=s.slice(0,G)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",Q=this.search||"";this.path=j+Q}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(a=B.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),
n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+r+o+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=e[l])}return S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||A[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",g=r.search||"";r.path=y+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=m||v||r.host&&e.pathname,C=E,b=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],B=r.protocol&&!S[r.protocol];if(B&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),E=E&&(""===d[0]||""===b[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(B){r.hostname=r.host=b.shift();var w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.host=r.hostname=w.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=b.slice(-1)[0],I=(r.host||e.host||b.length>1)&&("."===T||".."===T)||""===T,_=0,k=b.length;k>=0;k--)T=b[k],"."===T?b.splice(k,1):".."===T?(b.splice(k,1),_++):_&&(b.splice(k,1),_--);if(!E&&!C)for(;_--;_)b.unshift("..");!E||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),I&&"/"!==b.join("/").substr(-1)&&b.push("");var D=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(B){r.hostname=r.host=D?"":b.length?b.shift():"";var w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.host=r.hostname=w.shift())}return E=E||r.host&&b.length,E&&!D&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){var n;(function(e,i){!function(a){function o(e){throw RangeError(N[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,".");var i=e.split("."),a=s(i,t).join(".");return n+a}function c(e){for(var t,r,n=[],i=0,a=e.length;i<a;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<a?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=U(e>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?x(e/w):e>>1,e+=x(e/t);e>L*S>>1;n+=b)e=x(e/L);return x(n+(L+1)*e/(e+B))}function d(e){var t,r,n,i,a,s,u,c,h,d,y=[],g=e.length,v=0,m=I,E=T;for(r=e.lastIndexOf(_),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&o("not-basic"),y.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(a=v,s=1,u=b;i>=g&&o("invalid-input"),c=f(e.charCodeAt(i++)),(c>=b||c>x((C-v)/s))&&o("overflow"),v+=c*s,h=u<=E?A:u>=E+S?S:u-E,!(c<h);u+=b)d=b-h,s>x(C/d)&&o("overflow"),s*=d;t=y.length+1,E=p(v-a,t,0==a),x(v/t)>C-m&&o("overflow"),m+=x(v/t),v%=t,y.splice(v++,0,m)}return l(y)}function y(e){var t,r,n,i,a,s,u,l,f,d,y,g,v,m,E,B=[];for(e=c(e),g=e.length,t=I,r=0,a=T,s=0;s<g;++s)y=e[s],y<128&&B.push(U(y));for(n=i=B.length,i&&B.push(_);n<g;){for(u=C,s=0;s<g;++s)y=e[s],y>=t&&y<u&&(u=y);for(v=n+1,u-t>x((C-r)/v)&&o("overflow"),r+=(u-t)*v,t=u,s=0;s<g;++s)if(y=e[s],y<t&&++r>C&&o("overflow"),y==t){for(l=r,f=b;d=f<=a?A:f>=a+S?S:f-a,!(l<d);f+=b)E=l-d,m=b-d,B.push(U(h(d+E%m,0))),l=x(E/m);B.push(U(h(l,0))),a=p(r,v,n==i),r=0,++n}++r,++t}return B.join("")}function g(e){return u(e,function(e){return k.test(e)?d(e.slice(4).toLowerCase()):e})}function v(e){return u(e,function(e){return D.test(e)?"xn--"+y(e):e})}var m=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);m.global!==m&&m.window!==m&&m.self!==m||(a=m);var E,C=2147483647,b=36,A=1,S=26,B=38,w=700,T=72,I=128,_="-",k=/^xn--/,D=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=b-A,x=Math.floor,U=String.fromCharCode;E={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:y,toASCII:v,toUnicode:g},n=function(){return E}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(147)(e),function(){return this}())},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(153),t.encode=t.stringify=r(154)},function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,h,p,d=e[c].replace(o,"%20"),y=d.indexOf(n);y>=0?(l=d.substr(0,y),f=d.substr(y+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),r(a,h)?Array.isArray(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a}},function(e,t){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var a=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},function(e,t){e.exports={name:"insomnia-website",private:!0,version:"1.0.0",description:"Website for https://insomnia.rest",author:"Gregory Schier <gschier1990@gmail.com>",licence:"MIT",scripts:{"task:changelog":"rm -rf ./content/changelog-json && cp -r ./content/changelog ./content/changelog-json","build:clean":"rm -rf _hugo _speedpack","build:generate":"npm run task:changelog && hugo --destination _hugo","build:pack":"speedpack _hugo --output _speedpack","build:js":"NODE_ENV=production webpack --config webpack.config.babel.js",build:"npm run build:clean && npm run build:js && npm run build:generate && npm run build:pack","deploy:surge":"npm run deploy:push","deploy:push":"surge _speedpack",deploy:"npm run build && npm run deploy:surge","dev:js":"webpack --config webpack.config.babel.js --watch","dev:serve":"hugo serve --buildDrafts --bind 0.0.0.0",dev:"npm run task:changelog && npm run dev:serve","start:serve":"hugo serve --bind 0.0.0.0",start:"npm run task:changelog && npm run start:serve"},repository:{type:"git",url:"git+https://github.com/getinsomnia/website.git"},homepage:"https://github.com/getinsomnia/website#readme",devDependencies:{speedpack:"^0.1.2",surge:"^0.18.0",webpack:"^1.14.0",babel:"6.3.13","babel-core":"6.1.18","babel-eslint":"5.0.0","babel-loader":"6.1.0","babel-plugin-add-module-exports":"0.1.2","babel-plugin-transform-object-rest-spread":"^6.6.5","babel-plugin-transform-regenerator":"^6.16.1","babel-plugin-transform-runtime":"^6.15.0","babel-preset-es2015":"6.3.13"},dependencies:{hkdf:"0.0.2","isomorphic-fetch":"^2.2.1",lie:"^3.1.0","node-forge":"^0.6.46","json-loader":"^0.5.4",preact:"^7.1.0","preact-router":"^2.3.2",sjcl:"^1.0.6",srp:"git@github.com:getinsomnia/srp-js.git#6ebd8c3acfbcf69645e4c6e6f8f6b55138ff22c3"},babel:{presets:["es2015"],plugins:["transform-object-rest-spread","add-module-exports","transform-regenerator","transform-runtime"]}}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e.match(/^\/app\/signup\/$/)){v=1,o();var t=!0,r=!1,n=void 0;try{for(var i,a=(0,d.default)(document.querySelectorAll(".step-back"));!(t=(i=a.next()).done);t=!0){var u=i.value;u.addEventListener("click",s)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}document.querySelector("form").addEventListener("submit",c),document.querySelector('input[name="password-confirm"]').addEventListener("keydown",l)}}function o(){for(var e=document.querySelectorAll("[data-step]"),t=0;t<e.length;t++){var r=e[t];v===t+1?(r.style.display="block",r.querySelector("input").focus()):r.style.display="none"}}function s(e){e.preventDefault(),v--,o()}function u(){return{firstName:document.querySelector('input[name="first-name"]').value,lastName:document.querySelector('input[name="last-name"]').value,email:document.querySelector('input[name="email"]').value,password:document.querySelector('input[name="password"]').value,password2:document.querySelector('input[name="password-confirm"]').value}}function c(e){var t,r,n,i,a;return h.default.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),2!==v){s.next=13;break}return t=u(),r=t.firstName,n=t.lastName,i=t.email,a=t.password,s.prev=3,s.next=6,h.default.awrap(g.signup(r,n,i,a));case 6:window.location="/app",s.next=13;break;case 9:return s.prev=9,s.t0=s.catch(3),alert(s.t0.message),s.abrupt("return");case 13:v++,o();case 15:case"end":return s.stop()}},null,this,[[3,9]])}function l(e){var t=u();2===v&&t.password!==t.password2?e.target.setCustomValidity("Passwords did not match"):e.target.setCustomValidity("")}Object.defineProperty(t,"__esModule",{value:!0});var f=r(3),h=i(f),p=r(157),d=i(p);t.init=a;var y=r(73),g=n(y),v=void 0},function(e,t,r){e.exports={default:r(158),__esModule:!0}},function(e,t,r){r(51),r(45),e.exports=r(159)},function(e,t,r){var n=r(33),i=r(62);e.exports=r(15).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(){return u.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o(l.hasSessionId()),e.prev=1,e.next=4,u.default.awrap(l.whoami());case 4:o(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o(!1);case 10:case"end":return e.stop()}},null,this,[[1,7]])}function o(e){e?document.body.setAttribute("data-logged-in","yes"):document.body.setAttribute("data-logged-in","no")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),u=i(s);t.init=a;var c=r(73),l=n(c)}])});
//# sourceMappingURL=app.js.map